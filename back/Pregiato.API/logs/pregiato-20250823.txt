2025-08-23 00:49:24.037 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 00:49:24.208 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 00:49:26.216 -03:00 [INF] Conectado ao serviço de mensagens
2025-08-23 02:35:16.649 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:35:16.640 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:35:16.640 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:35:16.649 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:35:16.720 -03:00 [INF] Request finished GET /api/health - 404 in 85.4700ms
2025-08-23 02:35:16.760 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:35:16.761 -03:00 [INF] Request finished GET /api/health - 404 in 0.6540ms
2025-08-23 02:35:18.150 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:35:18.611 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1962.5300ms
2025-08-23 02:35:18.612 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1962.8870ms
2025-08-23 02:35:18.641 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:35:18.715 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:35:21.992 -03:00 [INF] Request finished GET /whatsappHub - 101 in 3277.0370ms
2025-08-23 02:35:23.321 -03:00 [INF] Request starting GET /api/talents
2025-08-23 02:35:23.677 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 02:35:25.585 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 02:35:25.881 -03:00 [INF] Request finished GET /api/chats - 200 in 7729.9860ms
2025-08-23 02:35:25.881 -03:00 [INF] Request finished GET /api/chats - 200 in 9245.6160ms
2025-08-23 02:35:25.937 -03:00 [INF] Request finished GET /api/talents - 200 in 2615.5670ms
2025-08-23 02:35:26.027 -03:00 [INF] Request starting GET /api/talents
2025-08-23 02:35:26.362 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 02:35:26.829 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 02:35:26.875 -03:00 [INF] Request finished GET /api/talents - 200 in 848.0660ms
2025-08-23 02:36:09.439 -03:00 [INF] Request finished GET /whatsappHub - 101 in 50794.7080ms
2025-08-23 02:38:38.572 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:38:38.572 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:38:38.591 -03:00 [INF] Request finished GET /api/health - 404 in 20.3450ms
2025-08-23 02:38:38.600 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:38:38.600 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:38:38.600 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:38:38.615 -03:00 [INF] Request finished GET /api/health - 404 in 15.2230ms
2025-08-23 02:38:38.656 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 56.0150ms
2025-08-23 02:38:38.656 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 55.8300ms
2025-08-23 02:38:38.660 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:38:38.687 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:38:39.645 -03:00 [INF] Request finished GET /api/chats - 200 in 1074.5620ms
2025-08-23 02:38:40.886 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:38:42.469 -03:00 [INF] Request finished GET /api/chats - 200 in 1583.6430ms
2025-08-23 02:46:53.727 -03:00 [INF] Request finished GET /whatsappHub - 101 in 495063.5740ms
2025-08-23 02:46:53.727 -03:00 [INF] Request finished GET /whatsappHub - 101 in 495035.0660ms
2025-08-23 02:46:58.628 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:46:58.628 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:46:58.676 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:46:58.680 -03:00 [INF] Request finished GET /api/health - 404 in 55.1150ms
2025-08-23 02:46:58.686 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 02:46:58.696 -03:00 [INF] Request starting GET /api/health
2025-08-23 02:46:58.696 -03:00 [INF] Request finished GET /api/health - 404 in 0.4820ms
2025-08-23 02:46:58.757 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 70.7860ms
2025-08-23 02:46:58.757 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 80.5310ms
2025-08-23 02:46:58.772 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:46:58.801 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 02:47:01.463 -03:00 [INF] Request finished GET /api/chats - 200 in 2838.3680ms
2025-08-23 02:47:01.493 -03:00 [INF] Request starting GET /api/chats
2025-08-23 02:47:02.175 -03:00 [INF] Request finished GET /api/chats - 200 in 681.6020ms
2025-08-23 02:55:47.156 -03:00 [INF] Request starting POST /api/whatsapp/generate-qr
2025-08-23 02:55:48.783 -03:00 [INF] 📥 Requisição de geração de QR recebida
2025-08-23 02:55:48.790 -03:00 [INF] Iniciado pedido de QR Code. RequestId: 5367cff3-a744-4357-8b76-6053efe821a5
2025-08-23 02:55:48.851 -03:00 [INF] Comando publicado: {"command":"generate_qr","requestId":"5367cff3-a744-4357-8b76-6053efe821a5","timestamp":"2025-08-23T05:55:48.791186Z"}
2025-08-23 02:55:48.857 -03:00 [INF] Request finished POST /api/whatsapp/generate-qr - 200 in 1702.9320ms
2025-08-23 03:11:56.909 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 03:11:58.369 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 1460.2530ms
2025-08-23 03:13:17.281 -03:00 [INF] Request starting POST /api/whatsapp/generate-qr
2025-08-23 03:13:17.449 -03:00 [INF] 📥 Requisição de geração de QR recebida
2025-08-23 03:13:17.481 -03:00 [INF] Request finished POST /api/whatsapp/generate-qr - 409 in 200.4210ms
2025-08-23 03:14:27.387 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1648615.0140ms
2025-08-23 03:14:27.387 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1648584.7600ms
2025-08-23 03:14:28.221 -03:00 [INF] Request starting GET /api/whatsapp/qr-code/current
2025-08-23 03:14:28.420 -03:00 [INF] Request finished GET /api/whatsapp/qr-code/current - 404 in 199.5890ms
2025-08-23 05:16:06.516 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:16:06.706 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:16:06.859 -03:00 [ERR] ❌ Falha ao conectar ao RabbitMQ
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (49): Can't assign requested address
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP)
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
   at System.Threading.Thread.StartCallback()
--- End of stack trace from previous location ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Pregiato.API.Services.RabbitBackgroundService.ConnectToRabbitMQAsync() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 132
2025-08-23 05:16:06.891 -03:00 [ERR] Erro no serviço RabbitMQ
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (49): Can't assign requested address
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP)
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
   at System.Threading.Thread.StartCallback()
--- End of stack trace from previous location ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Pregiato.API.Services.RabbitBackgroundService.ConnectToRabbitMQAsync() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 132
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 72
2025-08-23 05:16:06.903 -03:00 [ERR] Hosting failed to start
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (49): Can't assign requested address
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP)
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
   at System.Threading.Thread.StartCallback()
--- End of stack trace from previous location ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Pregiato.API.Services.RabbitBackgroundService.ConnectToRabbitMQAsync() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 132
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 72
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 113
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-08-23 05:16:06.923 -03:00 [FTL] Aplicação falhou ao iniciar
RabbitMQ.Client.Exceptions.BrokerUnreachableException: None of the specified endpoints were reachable
 ---> System.AggregateException: One or more errors occurred. (Connection failed)
 ---> RabbitMQ.Client.Exceptions.ConnectFailureException: Connection failed
 ---> System.Net.Sockets.SocketException (49): Can't assign requested address
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.CreateException(SocketError error, Boolean forAsyncThrow)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ConnectAsync(Socket socket)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.ConnectAsync(EndPoint remoteEP)
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.ExecutionContextCallback(Object s)
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext(Thread threadPoolThread)
   at System.Runtime.CompilerServices.AsyncTaskMethodBuilder`1.AsyncStateMachineBox`1.MoveNext()
   at System.Threading.Tasks.AwaitTaskContinuation.RunOrScheduleAction(IAsyncStateMachineBox box, Boolean allowInlining)
   at System.Threading.Tasks.Task.RunContinuations(Object continuationObject)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
   at System.Threading.ThreadPoolWorkQueue.Dispatch()
   at System.Threading.PortableThreadPool.WorkerThread.WorkerThreadStart()
   at System.Threading.Thread.StartCallback()
--- End of stack trace from previous location ---
   at RabbitMQ.Client.TcpClientAdapter.ConnectAsync(String host, Int32 port)
   at RabbitMQ.Client.Impl.TaskExtensions.TimeoutAfter(Task task, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectOrFail(ITcpClient socket, AmqpTcpEndpoint endpoint, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingAddressFamily(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout, AddressFamily family)
   at RabbitMQ.Client.Impl.SocketFrameHandler.ConnectUsingIPv4(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan timeout)
   at RabbitMQ.Client.Impl.SocketFrameHandler..ctor(AmqpTcpEndpoint endpoint, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.Framing.Impl.IProtocolExtensions.CreateFrameHandler(IProtocol protocol, AmqpTcpEndpoint endpoint, ArrayPool`1 pool, Func`2 socketFactory, TimeSpan connectionTimeout, TimeSpan readTimeout, TimeSpan writeTimeout)
   at RabbitMQ.Client.ConnectionFactory.CreateFrameHandler(AmqpTcpEndpoint endpoint)
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.EndpointResolverExtensions.SelectOne[T](IEndpointResolver resolver, Func`2 selector)
   at RabbitMQ.Client.Framing.Impl.AutorecoveringConnection.Init(IEndpointResolver endpoints)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   --- End of inner exception stack trace ---
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(IEndpointResolver endpointResolver, String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection(String clientProvidedName)
   at RabbitMQ.Client.ConnectionFactory.CreateConnection()
   at Pregiato.API.Services.RabbitBackgroundService.ConnectToRabbitMQAsync() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 132
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 72
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 113
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 148
2025-08-23 05:40:18.836 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:40:19.080 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:40:19.082 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:40:19.175 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (:0): None of the specified endpoints were reachable
2025-08-23 05:40:19.179 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:40:29.181 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:40:29.203 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (:0): None of the specified endpoints were reachable
2025-08-23 05:40:29.203 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:40:36.053 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 05:45:12.541 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:45:12.715 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:45:12.717 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:45:13.262 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:45:13.266 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:45:23.268 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:45:23.279 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:45:23.281 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:45:33.381 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:45:33.522 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:45:33.523 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:45:43.535 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:45:43.663 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:45:43.669 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:45:53.672 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:45:53.695 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:45:53.695 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:03.697 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:03.715 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:03.715 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:13.717 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:13.742 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:13.742 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:23.744 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:23.753 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:23.754 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:33.757 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:33.781 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:33.781 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:43.784 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:43.799 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:43.799 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:46:53.801 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:46:53.823 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:46:53.823 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:47:03.830 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:47:03.850 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:47:03.851 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:47:13.853 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:47:13.863 -03:00 [WRN] ❌ Falha ao conectar ao RabbitMQ (amqp://:0): None of the specified endpoints were reachable
2025-08-23 05:47:13.863 -03:00 [WRN] ⚠️ Não foi possível conectar ao RabbitMQ. Tentando novamente em breve...
2025-08-23 05:47:17.483 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 05:48:02.650 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:48:02.824 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:48:02.825 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:48:04.674 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 05:48:05.963 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 05:48:06.161 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 05:48:06.162 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 05:49:05.802 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 05:49:06.176 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:49:07.626 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 05:49:08.753 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 05:49:08.947 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 05:49:08.947 -03:00 [INF] ✅ RabbitMQ conectado e configurado
5-08-23 05:48:11.761 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 05:48:12.204 -03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5656: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-08-23 05:48:12.228 -03:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 108
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-08-23 05:48:12.228 -03:00 [FTL] Aplicação falhou ao iniciar
System.IO.IOException: Failed to bind to address http://127.0.0.1:5656: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 151
2025-08-23 05:48:12.233 -03:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 108
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-08-23 05:49:15.593 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:49:15.804 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:49:15.805 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:49:17.559 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 05:49:18.724 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 05:49:18.918 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 05:49:18.918 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 05:50:03.274 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 05:50:26.572 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 05:50:26.865 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 05:50:26.869 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 05:50:28.753 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 05:50:30.012 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 05:50:30.212 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 05:50:30.213 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 05:52:03.637 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 05:52:03.637 -03:00 [INF] Request starting GET /api/chats
2025-08-23 05:52:03.637 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 05:52:03.637 -03:00 [INF] Request starting GET /api/health
2025-08-23 05:52:03.641 -03:00 [INF] Request finished GET /api/health - 404 in 4.3220ms
2025-08-23 05:52:03.656 -03:00 [INF] Request starting GET /api/health
2025-08-23 05:52:03.656 -03:00 [INF] Request finished GET /api/health - 404 in 0.2940ms
2025-08-23 05:52:03.667 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 29.6480ms
2025-08-23 05:52:03.668 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 31.0160ms
2025-08-23 05:52:03.671 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 05:52:03.740 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 05:52:08.347 -03:00 [INF] Request starting GET /api/chats
2025-08-23 05:52:09.863 -03:00 [INF] Request finished GET /api/chats - 200 in 6226.3290ms
2025-08-23 05:52:10.114 -03:00 [INF] Request finished GET /api/chats - 200 in 1767.0450ms
2025-08-23 05:52:12.440 -03:00 [INF] Request starting POST /api/whatsapp/generate-qr
2025-08-23 05:52:12.601 -03:00 [INF] 📥 Requisição de geração de QR recebida
2025-08-23 05:52:12.604 -03:00 [INF] Iniciado pedido de QR Code. RequestId: 9ea09fb1-b144-4457-bf7a-9286094c9015
2025-08-23 05:52:12.621 -03:00 [INF] 📤 Comando enviado para RabbitMQ: {"command":"generate_qr","requestId":"9ea09fb1-b144-4457-bf7a-9286094c9015","timestamp":"2025-08-23T08:52:12.604423Z"}
2025-08-23 05:52:12.635 -03:00 [INF] Request finished POST /api/whatsapp/generate-qr - 200 in 194.7550ms
2025-08-23 05:52:47.478 -03:00 [INF] 📱 QR Code recebido via RabbitMQ
2025-08-23 05:54:19.724 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:54:20.076 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=false
2025-08-23 05:54:20.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 358.0490ms
2025-08-23 05:54:20.100 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:54:20.255 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.7510ms
2025-08-23 05:54:35.117 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:54:35.290 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.6070ms
2025-08-23 05:54:42.642 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 05:54:43.081 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 439.1530ms
2025-08-23 05:54:50.127 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:54:50.297 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.0930ms
2025-08-23 05:55:05.119 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:55:05.266 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0900ms
2025-08-23 05:55:20.125 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:55:20.282 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.1230ms
2025-08-23 05:55:35.135 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:55:35.292 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.1660ms
2025-08-23 05:55:50.442 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:55:50.659 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 217.9600ms
2025-08-23 05:56:05.200 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:56:05.377 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.1360ms
2025-08-23 05:56:20.242 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:56:20.435 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 192.6260ms
2025-08-23 05:56:35.551 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:56:35.742 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 191.3960ms
2025-08-23 05:56:50.264 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:56:50.440 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.3780ms
2025-08-23 05:57:05.250 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:57:05.394 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6640ms
2025-08-23 05:57:20.272 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:57:20.442 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.5620ms
2025-08-23 05:57:35.275 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:57:35.493 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 217.6430ms
2025-08-23 05:57:50.292 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:57:50.466 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.7740ms
2025-08-23 05:58:05.294 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:58:05.575 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 281.8380ms
2025-08-23 05:58:20.416 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:58:20.730 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 313.9380ms
2025-08-23 05:58:35.321 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:58:35.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.9550ms
2025-08-23 05:58:50.338 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:58:50.518 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.4050ms
2025-08-23 05:59:05.313 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:59:05.628 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 316.0280ms
2025-08-23 05:59:20.506 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:59:20.746 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 239.7660ms
2025-08-23 05:59:24.822 -03:00 [INF] Request starting GET /api/chats
2025-08-23 05:59:27.078 -03:00 [INF] Request finished GET /api/chats - 200 in 2255.6050ms
2025-08-23 05:59:28.159 -03:00 [INF] Request finished GET /whatsappHub - 101 in 444419.1780ms
2025-08-23 05:59:28.159 -03:00 [INF] Request finished GET /whatsappHub - 101 in 444487.5260ms
2025-08-23 05:59:31.389 -03:00 [INF] Request starting GET /api/health
2025-08-23 05:59:31.391 -03:00 [INF] Request finished GET /api/health - 404 in 1.1380ms
2025-08-23 05:59:31.379 -03:00 [INF] Request starting GET /api/chats
2025-08-23 05:59:31.398 -03:00 [INF] Request starting GET /api/health
2025-08-23 05:59:31.399 -03:00 [INF] Request finished GET /api/health - 404 in 0.1650ms
2025-08-23 05:59:31.419 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 05:59:31.419 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 05:59:31.438 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 18.2500ms
2025-08-23 05:59:31.439 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 20.7790ms
2025-08-23 05:59:31.442 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 05:59:31.474 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 05:59:32.306 -03:00 [INF] Request finished GET /api/chats - 200 in 926.1410ms
2025-08-23 05:59:33.134 -03:00 [INF] Request starting GET /api/chats
2025-08-23 05:59:33.828 -03:00 [INF] Request finished GET /api/chats - 200 in 693.6790ms
2025-08-23 05:59:35.450 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:59:35.591 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8010ms
2025-08-23 05:59:50.333 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 05:59:50.475 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5150ms
2025-08-23 06:00:05.338 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:00:05.493 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4440ms
2025-08-23 06:00:20.331 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:00:20.478 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3040ms
2025-08-23 06:00:35.344 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:00:35.486 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0570ms
2025-08-23 06:00:50.387 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:00:50.555 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.2540ms
2025-08-23 06:01:05.371 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:01:05.534 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.7170ms
2025-08-23 06:01:20.365 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:01:20.509 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5160ms
2025-08-23 06:01:35.525 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:01:35.692 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.3020ms
2025-08-23 06:01:50.361 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:01:50.524 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.1100ms
2025-08-23 06:02:05.564 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:02:05.741 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.5190ms
2025-08-23 06:02:20.493 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:02:20.657 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.2830ms
2025-08-23 06:02:35.478 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:02:35.621 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2430ms
2025-08-23 06:02:50.533 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:02:50.699 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.2520ms
2025-08-23 06:03:05.515 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:03:05.696 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.5830ms
2025-08-23 06:03:20.806 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:03:21.036 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 230.0940ms
2025-08-23 06:03:24.296 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:03:24.456 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=true
2025-08-23 06:03:24.457 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.3500ms
2025-08-23 06:03:35.899 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:03:36.070 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.7800ms
2025-08-23 06:03:50.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:03:50.677 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.6030ms
2025-08-23 06:04:05.518 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:04:05.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1570ms
2025-08-23 06:04:20.530 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:04:20.680 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2660ms
2025-08-23 06:04:35.536 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:04:35.686 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.0490ms
2025-08-23 06:04:50.523 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:04:50.662 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3580ms
2025-08-23 06:05:05.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:05:05.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1110ms
2025-08-23 06:05:20.528 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:05:20.670 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9060ms
2025-08-23 06:05:35.589 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:05:35.849 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 260.4410ms
2025-08-23 06:05:50.528 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:05:50.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8690ms
2025-08-23 06:06:00.572 -03:00 [INF] Request finished GET /whatsappHub - 101 in 389116.2460ms
2025-08-23 06:06:01.115 -03:00 [INF] Request finished GET /whatsappHub - 101 in 389640.6000ms
2025-08-23 06:06:03.497 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:06:03.499 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:06:03.500 -03:00 [INF] Request finished GET /api/health - 404 in 0.7460ms
2025-08-23 06:06:03.523 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:06:03.526 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:06:03.526 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:06:03.528 -03:00 [INF] Request finished GET /api/health - 404 in 1.6180ms
2025-08-23 06:06:03.545 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 22.2450ms
2025-08-23 06:06:03.545 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 19.6880ms
2025-08-23 06:06:03.557 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:06:03.782 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:06:05.539 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:06:05.678 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9680ms
2025-08-23 06:06:05.738 -03:00 [INF] Request finished GET /api/chats - 200 in 2240.9680ms
2025-08-23 06:06:05.758 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:06:06.431 -03:00 [INF] Request finished GET /api/chats - 200 in 673.2540ms
2025-08-23 06:06:20.593 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:06:20.740 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0920ms
2025-08-23 06:06:35.669 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:06:35.857 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 188.0620ms
2025-08-23 06:06:50.661 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:06:50.823 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.2120ms
2025-08-23 06:07:05.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:05.916 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 191.6870ms
2025-08-23 06:07:16.028 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:16.028 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:16.167 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=false
2025-08-23 06:07:16.169 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6600ms
2025-08-23 06:07:18.111 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 2083.1140ms
2025-08-23 06:07:20.853 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:21.025 -03:00 [INF] 📥 Webhook session/updated: connected=false number=null validated=false
2025-08-23 06:07:21.027 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 173.8710ms
2025-08-23 06:07:35.683 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:35.825 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4860ms
2025-08-23 06:07:50.680 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:07:50.827 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5240ms
2025-08-23 06:08:05.688 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:08:05.826 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.6370ms
2025-08-23 06:08:20.681 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:08:20.835 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9930ms
2025-08-23 06:08:35.689 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:08:35.830 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6220ms
2025-08-23 06:08:50.689 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:08:50.828 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.0290ms
2025-08-23 06:09:05.692 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:09:05.831 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5800ms
2025-08-23 06:09:20.694 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:09:20.834 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9000ms
2025-08-23 06:09:35.690 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:09:35.833 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3270ms
2025-08-23 06:09:50.694 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:09:50.836 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4740ms
2025-08-23 06:10:05.702 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:10:05.841 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7030ms
2025-08-23 06:10:20.699 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:10:20.843 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.8430ms
2025-08-23 06:10:35.740 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:10:35.878 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.8240ms
2025-08-23 06:10:50.705 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:10:50.846 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.3380ms
2025-08-23 06:11:05.704 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:11:05.843 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.0930ms
2025-08-23 06:11:20.712 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:11:20.849 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9330ms
2025-08-23 06:11:35.774 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:11:35.924 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4400ms
2025-08-23 06:11:50.730 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:11:50.873 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8770ms
2025-08-23 06:12:05.744 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:12:05.907 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.2580ms
2025-08-23 06:12:20.768 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:12:20.947 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 178.5780ms
2025-08-23 06:12:35.796 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:12:36.044 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 248.0160ms
2025-08-23 06:12:50.756 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:12:50.898 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3700ms
2025-08-23 06:13:05.756 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:13:05.895 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3000ms
2025-08-23 06:13:20.789 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:13:20.927 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7980ms
2025-08-23 06:13:35.758 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:13:35.907 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.2890ms
2025-08-23 06:13:50.763 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:13:50.907 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1950ms
2025-08-23 06:14:05.765 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:14:05.904 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1150ms
2025-08-23 06:14:20.774 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:14:20.911 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.6740ms
2025-08-23 06:14:35.775 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:14:35.917 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.3030ms
2025-08-23 06:14:50.939 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:14:51.108 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.6630ms
2025-08-23 06:15:05.814 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:15:05.955 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4480ms
2025-08-23 06:15:20.815 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:15:20.953 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.5850ms
2025-08-23 06:15:35.906 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:15:36.050 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3450ms
2025-08-23 06:15:50.851 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:15:50.988 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8010ms
2025-08-23 06:16:05.970 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:16:06.127 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.6430ms
2025-08-23 06:16:20.918 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:16:21.060 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1560ms
2025-08-23 06:16:36.052 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:16:36.204 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5430ms
2025-08-23 06:16:50.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:16:51.031 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9670ms
2025-08-23 06:17:05.886 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:17:06.028 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7660ms
2025-08-23 06:17:20.946 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:17:21.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.4650ms
2025-08-23 06:17:35.897 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 06:17:35.978 -03:00 [INF] Request finished GET /whatsappHub - 101 in 692196.0120ms
2025-08-23 06:17:35.978 -03:00 [INF] Request finished GET /whatsappHub - 101 in 692421.1530ms
2025-08-23 06:17:36.038 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5630ms
2025-08-23 06:17:36.049 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 06:19:38.926 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 06:19:39.126 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 06:19:39.128 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 06:19:40.763 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 06:19:42.300 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 06:19:42.493 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 06:19:42.685 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 06:19:42.686 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 06:19:42.777 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 551140041144 -> 5511949908369
2025-08-23 06:19:42.783 -03:00 [ERR] Erro ao processar mensagem recebida: 551140041144
System.InvalidOperationException: Cannot resolve scoped service 'Pregiato.API.Services.AttendanceService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 418
2025-08-23 06:19:42.822 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 551140041144 -> 5511949908369
2025-08-23 06:19:42.823 -03:00 [ERR] Erro ao processar mensagem recebida: 551140041144
System.InvalidOperationException: Cannot resolve scoped service 'Pregiato.API.Services.AttendanceService' from root provider.
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.CallSiteValidator.ValidateResolution(ServiceCallSite callSite, IServiceScope scope, IServiceScope rootScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProvider.GetService(ServiceIdentifier serviceIdentifier, ServiceProviderEngineScope serviceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetService[T](IServiceProvider provider)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 418
2025-08-23 06:24:56.467 -03:00 [INF] Request starting GET /health
2025-08-23 06:24:56.497 -03:00 [INF] Request finished GET /health - 404 in 30.4500ms
2025-08-23 06:26:56.037 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:26:56.037 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:26:56.039 -03:00 [INF] Request finished GET /api/health - 404 in 1.7390ms
2025-08-23 06:27:02.389 -03:00 [INF] Request finished GET /api/chats - 200 in 6352.1780ms
2025-08-23 06:27:02.404 -03:00 [INF] Desconectando do RabbitMQ...
guradas
2025-08-23 06:25:08.965 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 06:25:09.155 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 06:25:09.156 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 06:25:09.760 -03:00 [ERR] Hosting failed to start
System.IO.IOException: Failed to bind to address http://127.0.0.1:5656: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
2025-08-23 06:25:09.794 -03:00 [ERR] BackgroundService failed
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 108
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-08-23 06:25:09.794 -03:00 [FTL] Aplicação falhou ao iniciar
System.IO.IOException: Failed to bind to address http://127.0.0.1:5656: address already in use.
 ---> Microsoft.AspNetCore.Connections.AddressInUseException: Address already in use
 ---> System.Net.Sockets.SocketException (48): Address already in use
   at System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.Sockets.Socket.Bind(EndPoint localEP)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportOptions.CreateDefaultBoundListenSocket(EndPoint endpoint)
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketConnectionListener.Bind()
   at Microsoft.AspNetCore.Server.Kestrel.Transport.Sockets.SocketTransportFactory.BindAsync(EndPoint endpoint, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Infrastructure.TransportManager.BindAsync(EndPoint endPoint, ConnectionDelegate connectionDelegate, EndpointConfig endpointConfig, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.<>c__DisplayClass28_0`1.<<StartAsync>g__OnBind|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindEndpointAsync(ListenOptions endpoint, AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.LocalhostListenOptions.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.AddressesStrategy.BindAsync(AddressBindContext context, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.AddressBinder.BindAsync(ListenOptions[] listenOptions, AddressBindContext context, Func`2 useHttps, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.BindAsync(CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Server.Kestrel.Core.KestrelServerImpl.StartAsync[TContext](IHttpApplication`1 application, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Hosting.GenericWebHostService.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.Internal.Host.<StartAsync>b__15_1(IHostedService service, CancellationToken token)
   at Microsoft.Extensions.Hosting.Internal.Host.ForeachService[T](IEnumerable`1 services, CancellationToken token, Boolean concurrent, Boolean abortOnFirstException, List`1 exceptions, Func`3 operation)
   at Microsoft.Extensions.Hosting.Internal.Host.StartAsync(CancellationToken cancellationToken)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.RunAsync(IHost host, CancellationToken token)
   at Microsoft.Extensions.Hosting.HostingAbstractionsHostExtensions.Run(IHost host)
   at Program.<Main>$(String[] args) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 151
2025-08-23 06:25:09.801 -03:00 [FTL] The HostOptions.BackgroundServiceExceptionBehavior is configured to StopHost. A BackgroundService has thrown an unhandled exception, and the IHost instance is stopping. To avoid this behavior, configure this to Ignore; however the BackgroundService will not be restarted.
System.Threading.Tasks.TaskCanceledException: A task was canceled.
   at Pregiato.API.Services.RabbitBackgroundService.ExecuteAsync(CancellationToken stoppingToken) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 108
   at Microsoft.Extensions.Hosting.Internal.Host.TryExecuteBackgroundServiceAsync(BackgroundService backgroundService)
2025-08-23 06:46:26.567 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 06:46:26.721 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 06:46:26.723 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 06:46:28.255 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 06:46:30.290 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 06:46:30.521 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 06:46:30.739 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 06:46:30.749 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 06:46:40.574 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:46:40.574 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:46:40.574 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:46:40.574 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:46:40.578 -03:00 [INF] Request finished GET /api/health - 404 in 4.6130ms
2025-08-23 06:46:40.589 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:46:40.589 -03:00 [INF] Request finished GET /api/health - 404 in 0.2690ms
2025-08-23 06:46:40.609 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 35.0690ms
2025-08-23 06:46:40.609 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 35.0650ms
2025-08-23 06:46:40.637 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:46:40.670 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:46:45.273 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:46:47.506 -03:00 [INF] Request finished GET /api/chats - 200 in 2232.9670ms
2025-08-23 06:46:47.522 -03:00 [INF] Request finished GET /api/chats - 200 in 6948.1050ms
2025-08-23 06:48:27.401 -03:00 [INF] Request finished GET /whatsappHub - 101 in 106763.8690ms
2025-08-23 06:48:27.394 -03:00 [INF] Request finished GET /whatsappHub - 101 in 106720.2720ms
2025-08-23 06:48:38.976 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:48:38.976 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:48:39.075 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:48:39.093 -03:00 [INF] Request finished GET /api/health - 404 in 117.9640ms
2025-08-23 06:48:39.115 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:48:39.151 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:48:39.155 -03:00 [INF] Request finished GET /api/health - 404 in 3.6580ms
2025-08-23 06:48:39.171 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 95.6360ms
2025-08-23 06:48:39.172 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 56.9580ms
2025-08-23 06:48:39.263 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:48:39.457 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:48:40.729 -03:00 [INF] Request finished GET /api/chats - 200 in 1753.4260ms
2025-08-23 06:48:40.906 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:48:41.705 -03:00 [INF] Request finished GET /api/chats - 200 in 801.4610ms
2025-08-23 06:49:43.042 -03:00 [INF] Request finished GET /whatsappHub - 101 in 63584.6790ms
2025-08-23 06:49:43.042 -03:00 [INF] Request finished GET /whatsappHub - 101 in 63777.5540ms
2025-08-23 06:49:49.191 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:49:49.199 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:49:49.188 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:49:49.188 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:49:49.215 -03:00 [INF] Request finished GET /api/health - 404 in 27.6210ms
2025-08-23 06:49:49.230 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:49:49.231 -03:00 [INF] Request finished GET /api/health - 404 in 0.3440ms
2025-08-23 06:49:49.238 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 39.3560ms
2025-08-23 06:49:49.240 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 52.1710ms
2025-08-23 06:49:49.294 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:49:49.323 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:49:50.106 -03:00 [INF] Request finished GET /api/chats - 200 in 922.4450ms
2025-08-23 06:49:51.780 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:49:52.638 -03:00 [INF] Request finished GET /api/chats - 200 in 858.3940ms
2025-08-23 06:50:55.777 -03:00 [INF] Request finished GET /whatsappHub - 101 in 66466.9760ms
2025-08-23 06:50:55.777 -03:00 [INF] Request finished GET /whatsappHub - 101 in 66453.8300ms
2025-08-23 06:51:08.403 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:51:08.404 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:51:08.411 -03:00 [INF] Request finished GET /api/health - 404 in 9.8570ms
2025-08-23 06:51:08.433 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:51:08.434 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:51:08.438 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:51:08.438 -03:00 [INF] Request finished GET /api/health - 404 in 0.2380ms
2025-08-23 06:51:08.440 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.0000ms
2025-08-23 06:51:08.440 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.9000ms
2025-08-23 06:51:08.571 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:51:08.615 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:51:09.453 -03:00 [INF] Request finished GET /api/chats - 200 in 1050.8250ms
2025-08-23 06:51:10.926 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:51:12.054 -03:00 [INF] Request finished GET /api/chats - 200 in 1127.3080ms
2025-08-23 06:51:17.897 -03:00 [INF] Request finished GET /whatsappHub - 101 in 9325.8250ms
2025-08-23 06:51:17.897 -03:00 [INF] Request finished GET /whatsappHub - 101 in 9282.2750ms
2025-08-23 06:51:23.497 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:51:23.497 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:51:23.510 -03:00 [INF] Request finished GET /api/health - 404 in 9.7330ms
2025-08-23 06:51:23.608 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:51:23.610 -03:00 [INF] Request finished GET /api/health - 404 in 1.6240ms
2025-08-23 06:51:23.628 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:51:23.629 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:51:23.636 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.6170ms
2025-08-23 06:51:23.639 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 10.6850ms
2025-08-23 06:51:23.697 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:51:23.756 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:51:24.388 -03:00 [INF] Request finished GET /api/chats - 200 in 889.2360ms
2025-08-23 06:51:26.255 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:51:27.340 -03:00 [INF] Request finished GET /api/chats - 200 in 1084.8420ms
2025-08-23 06:53:19.977 -03:00 [INF] Request finished GET /whatsappHub - 101 in 116280.3830ms
2025-08-23 06:53:19.978 -03:00 [INF] Request finished GET /whatsappHub - 101 in 116221.4130ms
2025-08-23 06:53:27.175 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:53:27.175 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:53:27.192 -03:00 [INF] Request finished GET /api/health - 404 in 18.0840ms
2025-08-23 06:53:27.212 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:53:27.212 -03:00 [INF] Request finished GET /api/health - 404 in 0.4570ms
2025-08-23 06:53:27.308 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:53:27.309 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:53:27.311 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 2.5330ms
2025-08-23 06:53:27.311 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 2.1020ms
2025-08-23 06:53:27.359 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:53:27.398 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:53:27.976 -03:00 [INF] Request finished GET /api/chats - 200 in 801.6030ms
2025-08-23 06:53:29.743 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:53:30.567 -03:00 [INF] Request finished GET /api/chats - 200 in 823.2640ms
2025-08-23 06:53:53.919 -03:00 [INF] Request finished GET /whatsappHub - 101 in 26552.5930ms
2025-08-23 06:53:53.959 -03:00 [INF] Request finished GET /whatsappHub - 101 in 26561.0710ms
2025-08-23 06:53:59.299 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:53:59.299 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:53:59.339 -03:00 [INF] Request finished GET /api/health - 404 in 42.7150ms
2025-08-23 06:53:59.370 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:53:59.370 -03:00 [INF] Request finished GET /api/health - 404 in 0.1680ms
2025-08-23 06:53:59.420 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:53:59.472 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 51.8500ms
2025-08-23 06:53:59.478 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:53:59.478 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.3480ms
2025-08-23 06:53:59.541 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:53:59.607 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:54:00.889 -03:00 [INF] Request finished GET /api/chats - 200 in 1589.7580ms
2025-08-23 06:54:01.734 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:54:02.434 -03:00 [INF] Request finished GET /api/chats - 200 in 699.4230ms
2025-08-23 06:54:34.178 -03:00 [INF] Request finished GET /whatsappHub - 101 in 34561.2450ms
2025-08-23 06:54:34.178 -03:00 [INF] Request finished GET /whatsappHub - 101 in 34626.9720ms
2025-08-23 06:54:40.443 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:54:40.443 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:54:40.492 -03:00 [INF] Request finished GET /api/health - 404 in 51.3780ms
2025-08-23 06:54:40.504 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:54:40.505 -03:00 [INF] Request finished GET /api/health - 404 in 0.8050ms
2025-08-23 06:54:40.527 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:54:40.528 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:54:40.559 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 31.3120ms
2025-08-23 06:54:40.563 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 35.9020ms
2025-08-23 06:54:40.594 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:54:40.615 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:54:41.351 -03:00 [INF] Request finished GET /api/chats - 200 in 908.7210ms
2025-08-23 06:54:42.941 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:54:44.167 -03:00 [INF] Request finished GET /api/chats - 200 in 1210.1710ms
2025-08-23 06:55:42.620 -03:00 [INF] Request finished GET /whatsappHub - 101 in 61991.4220ms
2025-08-23 06:55:42.737 -03:00 [INF] Request finished GET /whatsappHub - 101 in 62142.6470ms
2025-08-23 06:55:52.426 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:55:52.430 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:55:52.436 -03:00 [INF] Request finished GET /api/health - 404 in 13.9870ms
2025-08-23 06:55:52.445 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:55:52.447 -03:00 [INF] Request finished GET /api/health - 404 in 0.7520ms
2025-08-23 06:55:52.587 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:55:52.596 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:55:52.619 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 22.4440ms
2025-08-23 06:55:52.620 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 33.9230ms
2025-08-23 06:55:52.680 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:55:52.837 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:55:53.729 -03:00 [INF] Request finished GET /api/chats - 200 in 1304.1510ms
2025-08-23 06:55:54.738 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:55:55.852 -03:00 [INF] Request finished GET /api/chats - 200 in 1113.3620ms
2025-08-23 06:56:16.916 -03:00 [INF] Request finished GET /whatsappHub - 101 in 24078.6530ms
2025-08-23 06:56:16.922 -03:00 [INF] Request finished GET /whatsappHub - 101 in 24242.0150ms
2025-08-23 06:56:22.699 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:56:22.700 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:56:22.713 -03:00 [INF] Request finished GET /api/health - 404 in 11.5840ms
2025-08-23 06:56:22.760 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:56:22.760 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:56:22.762 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:56:22.763 -03:00 [INF] Request finished GET /api/health - 404 in 0.7690ms
2025-08-23 06:56:22.773 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 13.1390ms
2025-08-23 06:56:22.774 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 14.4420ms
2025-08-23 06:56:22.807 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:56:22.830 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:56:23.567 -03:00 [INF] Request finished GET /api/chats - 200 in 867.4590ms
2025-08-23 06:56:24.788 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:56:25.499 -03:00 [INF] Request finished GET /api/chats - 200 in 711.6570ms
2025-08-23 06:56:55.840 -03:00 [INF] Request finished GET /whatsappHub - 101 in 33009.6530ms
2025-08-23 06:56:55.841 -03:00 [INF] Request finished GET /whatsappHub - 101 in 33033.3210ms
2025-08-23 06:57:05.214 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:57:05.214 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:57:05.270 -03:00 [INF] Request finished GET /api/health - 404 in 54.5660ms
2025-08-23 06:57:05.274 -03:00 [INF] Request starting GET /api/health
2025-08-23 06:57:05.274 -03:00 [INF] Request finished GET /api/health - 404 in 0.2510ms
2025-08-23 06:57:05.320 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:57:05.320 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 06:57:05.327 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.2970ms
2025-08-23 06:57:05.329 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 8.3800ms
2025-08-23 06:57:05.394 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:57:05.409 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 06:57:06.443 -03:00 [INF] Request finished GET /api/chats - 200 in 1228.6910ms
2025-08-23 06:57:07.728 -03:00 [INF] Request starting GET /api/chats
2025-08-23 06:57:08.436 -03:00 [INF] Request finished GET /api/chats - 200 in 707.4680ms
2025-08-23 07:02:40.486 -03:00 [INF] Request finished GET /whatsappHub - 101 in 335076.7960ms
2025-08-23 07:02:40.485 -03:00 [INF] Request finished GET /whatsappHub - 101 in 335090.0960ms
2025-08-23 07:02:46.185 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:02:46.185 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:02:46.194 -03:00 [INF] Request finished GET /api/health - 404 in 7.3630ms
2025-08-23 07:02:46.209 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:02:46.210 -03:00 [INF] Request finished GET /api/health - 404 in 0.2710ms
2025-08-23 07:02:46.251 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:02:46.251 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:02:46.274 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 22.7760ms
2025-08-23 07:02:46.275 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 23.1400ms
2025-08-23 07:02:46.380 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:02:46.403 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:02:49.095 -03:00 [INF] Request finished GET /api/chats - 200 in 2909.9830ms
2025-08-23 07:02:49.158 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:02:49.940 -03:00 [INF] Request finished GET /api/chats - 200 in 781.5180ms
2025-08-23 07:03:53.806 -03:00 [INF] Request finished GET /whatsappHub - 101 in 67425.8250ms
2025-08-23 07:03:53.806 -03:00 [INF] Request finished GET /whatsappHub - 101 in 67402.5620ms
2025-08-23 07:04:01.140 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:04:01.139 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:04:01.141 -03:00 [INF] Request finished GET /api/health - 404 in 2.1590ms
2025-08-23 07:04:01.143 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:04:01.144 -03:00 [INF] Request finished GET /api/health - 404 in 0.3700ms
2025-08-23 07:04:01.243 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:04:01.245 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:04:01.245 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.7970ms
2025-08-23 07:04:01.245 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.5920ms
2025-08-23 07:04:01.281 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:04:01.300 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:04:01.826 -03:00 [INF] Request finished GET /api/chats - 200 in 686.3430ms
2025-08-23 07:04:03.726 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:04:04.467 -03:00 [INF] Request finished GET /api/chats - 200 in 740.9200ms
2025-08-23 07:05:02.990 -03:00 [INF] Request finished GET /whatsappHub - 101 in 61706.9560ms
2025-08-23 07:05:02.993 -03:00 [INF] Request finished GET /whatsappHub - 101 in 61693.3330ms
2025-08-23 07:05:13.275 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:05:13.275 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:05:13.277 -03:00 [INF] Request finished GET /api/health - 404 in 2.7440ms
2025-08-23 07:05:13.281 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:05:13.281 -03:00 [INF] Request finished GET /api/health - 404 in 0.2050ms
2025-08-23 07:05:13.416 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:05:13.416 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:05:13.421 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 5.0250ms
2025-08-23 07:05:13.421 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 5.0550ms
2025-08-23 07:05:13.463 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:05:13.487 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:05:14.047 -03:00 [INF] Request finished GET /api/chats - 200 in 771.6820ms
2025-08-23 07:05:14.807 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1343.6910ms
2025-08-23 07:05:14.807 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1320.2220ms
2025-08-23 07:05:18.237 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:05:18.240 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:05:18.289 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:05:18.291 -03:00 [INF] Request finished GET /api/health - 404 in 56.4360ms
2025-08-23 07:05:18.302 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:05:18.307 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:05:18.312 -03:00 [INF] Request finished GET /api/health - 404 in 5.4760ms
2025-08-23 07:05:18.386 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 97.0780ms
2025-08-23 07:05:18.389 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 87.5050ms
2025-08-23 07:05:18.417 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:05:18.432 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:05:19.350 -03:00 [INF] Request finished GET /api/chats - 200 in 1116.5920ms
2025-08-23 07:05:20.744 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:05:21.571 -03:00 [INF] Request finished GET /api/chats - 200 in 823.7920ms
2025-08-23 07:07:46.518 -03:00 [INF] Request finished GET /whatsappHub - 101 in 148072.9860ms
2025-08-23 07:07:46.518 -03:00 [INF] Request finished GET /whatsappHub - 101 in 148101.1230ms
2025-08-23 07:07:58.188 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:07:58.188 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:07:58.189 -03:00 [INF] Request finished GET /api/health - 404 in 1.6540ms
2025-08-23 07:07:58.195 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:07:58.196 -03:00 [INF] Request finished GET /api/health - 404 in 1.8230ms
2025-08-23 07:07:58.323 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:07:58.331 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:07:58.343 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 20.6430ms
2025-08-23 07:07:58.344 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 13.0720ms
2025-08-23 07:07:58.417 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:07:58.480 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:07:59.080 -03:00 [INF] Request finished GET /api/chats - 200 in 892.0670ms
2025-08-23 07:08:00.822 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:08:01.735 -03:00 [INF] Request finished GET /api/chats - 200 in 913.8280ms
2025-08-23 07:08:20.837 -03:00 [INF] Request finished GET /whatsappHub - 101 in 22419.9740ms
2025-08-23 07:08:20.837 -03:00 [INF] Request finished GET /whatsappHub - 101 in 22356.4410ms
2025-08-23 07:08:26.075 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:08:26.075 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:08:26.112 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:08:26.089 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:08:26.266 -03:00 [INF] Request finished GET /api/health - 404 in 205.8680ms
2025-08-23 07:08:26.360 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:08:26.360 -03:00 [INF] Request finished GET /api/health - 404 in 0.1620ms
2025-08-23 07:08:26.561 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 472.2050ms
2025-08-23 07:08:26.562 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 450.3900ms
2025-08-23 07:08:26.868 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:08:26.909 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:08:27.604 -03:00 [INF] Request finished GET /api/chats - 200 in 1558.1240ms
2025-08-23 07:08:27.997 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:08:28.699 -03:00 [INF] Request finished GET /api/chats - 200 in 703.7440ms
2025-08-23 07:09:12.253 -03:00 [INF] Request finished GET /whatsappHub - 101 in 45384.5070ms
2025-08-23 07:09:12.253 -03:00 [INF] Request finished GET /whatsappHub - 101 in 45343.4470ms
2025-08-23 07:09:19.519 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:09:19.534 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:09:19.519 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:09:19.526 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:09:19.576 -03:00 [INF] Request finished GET /api/health - 404 in 57.3300ms
2025-08-23 07:09:19.586 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:09:19.586 -03:00 [INF] Request finished GET /api/health - 404 in 0.2250ms
2025-08-23 07:09:19.589 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 54.9360ms
2025-08-23 07:09:19.593 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 67.3960ms
2025-08-23 07:09:19.744 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:09:19.769 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:09:21.912 -03:00 [INF] Request finished GET /api/chats - 200 in 2269.0340ms
2025-08-23 07:09:22.226 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:09:23.386 -03:00 [INF] Request finished GET /api/chats - 200 in 1163.5520ms
2025-08-23 07:14:52.062 -03:00 [INF] Request finished GET /whatsappHub - 101 in 332312.6590ms
2025-08-23 07:14:52.061 -03:00 [INF] Request finished GET /whatsappHub - 101 in 332287.1330ms
2025-08-23 07:14:59.230 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:14:59.229 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:14:59.240 -03:00 [INF] Request finished GET /api/health - 404 in 6.2880ms
2025-08-23 07:14:59.265 -03:00 [INF] Request starting GET /api/health
2025-08-23 07:14:59.266 -03:00 [INF] Request finished GET /api/health - 404 in 0.2010ms
2025-08-23 07:14:59.408 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:14:59.412 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:14:59.444 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 31.9020ms
2025-08-23 07:14:59.446 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 38.1130ms
2025-08-23 07:14:59.469 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:14:59.505 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:15:02.882 -03:00 [INF] Request finished GET /api/chats - 200 in 3652.6820ms
2025-08-23 07:15:02.886 -03:00 [INF] Request starting GET /api/chats
2025-08-23 07:15:03.915 -03:00 [INF] Request finished GET /api/chats - 200 in 1027.5610ms
2025-08-23 07:18:02.137 -03:00 [INF] Request finished GET /whatsappHub - 101 in 182668.0480ms
2025-08-23 07:18:02.137 -03:00 [INF] Request finished GET /whatsappHub - 101 in 182631.2420ms
2025-08-23 07:18:02.202 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:18:02.202 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:18:02.205 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 3.0320ms
2025-08-23 07:18:02.206 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 3.6700ms
2025-08-23 07:18:02.239 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:18:02.240 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.3600ms
2025-08-23 07:18:02.246 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 07:18:02.248 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.5950ms
2025-08-23 07:18:02.247 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:18:02.251 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 07:18:02.290 -03:00 [INF] Request finished GET /whatsappHub - 200 in 38.6740ms
2025-08-23 07:18:02.290 -03:00 [INF] Request finished GET /whatsappHub - 200 in 43.2870ms
2025-08-23 07:18:02.316 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 07:18:46.628 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 07:18:46.986 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 07:18:46.992 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 07:18:49.552 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 07:18:50.844 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 07:18:51.054 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 07:18:51.245 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 07:18:51.245 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 08:04:01.217 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 08:04:01.347 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 08:04:01.349 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 08:04:03.534 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 08:04:04.701 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 08:04:04.890 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 08:04:05.082 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 08:04:05.083 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 08:04:31.136 -03:00 [INF] Request starting POST /api/leads/import
2025-08-23 08:04:33.806 -03:00 [INF] Request finished POST /api/leads/import - 400 in 2670.3050ms
2025-08-23 08:05:11.397 -03:00 [INF] Request starting POST /api/leads/import
2025-08-23 08:05:11.574 -03:00 [INF] Request finished POST /api/leads/import - 400 in 177.5210ms
2025-08-23 09:22:15.989 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:22:20.835 -03:00 [WRN] Compiling a query which loads related collections for more than one collection navigation, either via 'Include' or through projection, but no 'QuerySplittingBehavior' has been configured. By default, Entity Framework will use 'QuerySplittingBehavior.SingleQuery', which can potentially result in slow query performance. See https://go.microsoft.com/fwlink/?linkid=2134277 for more information. To identify the query that's triggering this warning call 'ConfigureWarnings(w => w.Throw(RelationalEventId.MultipleCollectionIncludeWarning))'.
2025-08-23 09:22:22.227 -03:00 [INF] Request finished GET /api/leads - 200 in 6244.0730ms
2025-08-23 09:22:22.243 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:22:22.669 -03:00 [INF] Request finished GET /api/leads - 200 in 425.2760ms
2025-08-23 09:23:47.124 -03:00 [INF] Request starting GET /api/talents
2025-08-23 09:23:47.123 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:23:47.735 -03:00 [INF] Request finished GET /api/leads - 200 in 612.1850ms
2025-08-23 09:23:47.741 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:23:48.149 -03:00 [INF] Request finished GET /api/leads - 200 in 408.1300ms
2025-08-23 09:23:48.386 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 09:23:48.800 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 09:23:48.821 -03:00 [INF] Request finished GET /api/talents - 200 in 1697.5160ms
2025-08-23 09:23:48.825 -03:00 [INF] Request starting GET /api/talents
2025-08-23 09:23:48.976 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 09:23:49.252 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 09:23:49.253 -03:00 [INF] Request finished GET /api/talents - 200 in 427.8580ms
2025-08-23 09:24:33.541 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:24:34.005 -03:00 [INF] Request finished GET /api/leads - 200 in 464.1690ms
2025-08-23 09:24:34.009 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:24:34.438 -03:00 [INF] Request finished GET /api/leads - 200 in 429.5550ms
2025-08-23 09:35:39.419 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:35:42.415 -03:00 [INF] Request finished GET /api/leads - 200 in 3006.1570ms
2025-08-23 09:35:42.430 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:35:42.874 -03:00 [INF] Request finished GET /api/leads - 200 in 444.4430ms
2025-08-23 09:41:04.159 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:41:06.466 -03:00 [INF] Request finished GET /api/leads - 200 in 2309.4390ms
2025-08-23 09:41:06.481 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:41:06.914 -03:00 [INF] Request finished GET /api/leads - 200 in 433.2340ms
2025-08-23 09:41:59.301 -03:00 [INF] Request starting GET /api/chats
2025-08-23 09:41:59.318 -03:00 [INF] Request starting GET /api/health
2025-08-23 09:41:59.338 -03:00 [INF] Request finished GET /api/health - 404 in 19.0030ms
2025-08-23 09:41:59.347 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 09:41:59.347 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 09:41:59.347 -03:00 [INF] Request starting GET /api/health
2025-08-23 09:41:59.356 -03:00 [INF] Request finished GET /api/health - 404 in 9.3210ms
2025-08-23 09:41:59.461 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 114.0700ms
2025-08-23 09:41:59.462 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 114.9490ms
2025-08-23 09:41:59.480 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 09:41:59.551 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 09:42:00.797 -03:00 [INF] Request finished GET /api/chats - 200 in 1496.7220ms
2025-08-23 09:42:00.863 -03:00 [INF] Request starting GET /api/chats
2025-08-23 09:42:01.566 -03:00 [INF] Request finished GET /api/chats - 200 in 703.3450ms
2025-08-23 09:48:49.974 -03:00 [INF] Request finished GET /whatsappHub - 101 in 410492.3160ms
2025-08-23 09:48:51.768 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:48:55.142 -03:00 [INF] Request finished GET /api/leads - 200 in 3372.0500ms
2025-08-23 09:48:55.283 -03:00 [INF] Request starting GET /api/leads
2025-08-23 09:48:55.975 -03:00 [INF] Request finished GET /api/leads - 200 in 692.6940ms
2025-08-23 10:35:38.702 -03:00 [INF] Request finished GET /whatsappHub - 101 in 3219143.1130ms
2025-08-23 10:35:41.125 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:35:44.019 -03:00 [INF] Request finished GET /api/leads - 200 in 2894.9760ms
2025-08-23 10:35:44.033 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:35:44.460 -03:00 [INF] Request finished GET /api/leads - 200 in 426.5420ms
2025-08-23 10:37:53.201 -03:00 [INF] Request starting POST /api/leads/import
2025-08-23 10:38:07.845 -03:00 [INF] Request finished POST /api/leads/import - 200 in 14644.5170ms
2025-08-23 10:39:20.651 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:39:20.651 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:39:21.280 -03:00 [INF] Request finished GET /api/leads - 200 in 629.6700ms
2025-08-23 10:39:21.289 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:39:21.722 -03:00 [INF] Request finished GET /api/leads - 200 in 432.7580ms
2025-08-23 10:39:21.741 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:39:22.030 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:39:22.034 -03:00 [INF] Request finished GET /api/talents - 200 in 1383.5230ms
2025-08-23 10:39:22.041 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:39:22.186 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:39:22.475 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:39:22.479 -03:00 [INF] Request finished GET /api/talents - 200 in 437.2560ms
2025-08-23 10:40:08.175 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:40:08.175 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:40:08.332 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:40:08.615 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:40:08.623 -03:00 [INF] Request finished GET /api/talents - 200 in 448.1260ms
2025-08-23 10:40:08.625 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:40:08.766 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:40:09.046 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:40:09.048 -03:00 [INF] Request finished GET /api/talents - 200 in 422.9340ms
2025-08-23 10:40:09.474 -03:00 [INF] Request finished GET /api/leads - 200 in 1299.0810ms
2025-08-23 10:40:09.477 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:40:09.885 -03:00 [INF] Request finished GET /api/leads - 200 in 408.5730ms
2025-08-23 10:40:14.891 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:40:14.891 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:40:15.041 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:40:15.321 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:40:15.327 -03:00 [INF] Request finished GET /api/talents - 200 in 435.3690ms
2025-08-23 10:40:15.333 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:40:15.336 -03:00 [INF] Request finished GET /api/leads - 200 in 444.3320ms
2025-08-23 10:40:15.337 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:40:15.469 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:40:15.743 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:40:15.743 -03:00 [INF] Request finished GET /api/talents - 200 in 410.4780ms
2025-08-23 10:40:15.759 -03:00 [INF] Request finished GET /api/leads - 200 in 421.7620ms
2025-08-23 10:44:19.987 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:44:19.987 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:44:21.224 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:44:22.475 -03:00 [INF] Request finished GET /api/leads - 200 in 2488.7790ms
2025-08-23 10:44:22.489 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:44:22.491 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:44:22.495 -03:00 [INF] Request finished GET /api/talents - 200 in 2508.1780ms
2025-08-23 10:44:22.499 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:44:22.647 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:44:22.955 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:44:22.956 -03:00 [INF] Request finished GET /api/talents - 200 in 457.3910ms
2025-08-23 10:44:22.972 -03:00 [INF] Request finished GET /api/leads - 200 in 483.0610ms
2025-08-23 10:54:03.605 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 10:54:03.605 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 10:54:03.642 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 41.0770ms
2025-08-23 10:54:03.642 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 41.0550ms
2025-08-23 10:54:03.676 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 10:54:03.676 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 10:54:03.676 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.1590ms
2025-08-23 10:54:03.676 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 0.2310ms
2025-08-23 10:54:14.032 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 10:54:14.032 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 10:54:14.034 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 2.7370ms
2025-08-23 10:54:14.034 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 2.7560ms
2025-08-23 10:54:14.038 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 10:54:14.038 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 0.1240ms
2025-08-23 10:54:14.040 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 10:54:14.040 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.0890ms
2025-08-23 10:54:19.035 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:54:19.035 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:54:22.096 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:54:23.359 -03:00 [INF] Request finished GET /api/leads - 200 in 4324.8760ms
2025-08-23 10:54:23.371 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:54:23.401 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:54:23.407 -03:00 [INF] Request finished GET /api/talents - 200 in 4372.1280ms
2025-08-23 10:54:23.409 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:54:23.548 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:54:23.826 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:54:23.826 -03:00 [INF] Request finished GET /api/talents - 200 in 417.3250ms
2025-08-23 10:54:23.838 -03:00 [INF] Request finished GET /api/leads - 200 in 466.2840ms
2025-08-23 10:57:29.690 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:57:29.690 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:57:30.170 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:57:30.636 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:57:30.659 -03:00 [INF] Request finished GET /api/talents - 200 in 982.7180ms
2025-08-23 10:57:30.656 -03:00 [INF] Request finished GET /api/leads - 200 in 979.9610ms
2025-08-23 10:57:30.682 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:57:30.682 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:57:30.821 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:57:31.116 -03:00 [INF] Request finished GET /api/leads - 200 in 433.6200ms
2025-08-23 10:57:31.115 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:57:31.116 -03:00 [INF] Request finished GET /api/talents - 200 in 434.1900ms
2025-08-23 10:58:05.370 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:58:05.369 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:58:05.656 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:58:05.993 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:58:06.001 -03:00 [INF] Request finished GET /api/leads - 200 in 630.4280ms
2025-08-23 10:58:06.002 -03:00 [INF] Request finished GET /api/talents - 200 in 633.3100ms
2025-08-23 10:58:06.010 -03:00 [INF] Request starting GET /api/talents
2025-08-23 10:58:06.010 -03:00 [INF] Request starting GET /api/leads
2025-08-23 10:58:06.164 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 10:58:06.445 -03:00 [INF] Request finished GET /api/leads - 200 in 434.9680ms
2025-08-23 10:58:06.481 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 10:58:06.486 -03:00 [INF] Request finished GET /api/talents - 200 in 476.5470ms
2025-08-23 11:08:07.036 -03:00 [INF] Request starting GET /api/leads
2025-08-23 11:08:07.036 -03:00 [INF] Request starting GET /api/talents
2025-08-23 11:08:08.542 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 11:08:09.801 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 11:08:09.836 -03:00 [INF] Request finished GET /api/leads - 200 in 2801.5780ms
2025-08-23 11:08:09.836 -03:00 [INF] Request finished GET /api/talents - 200 in 2801.5620ms
2025-08-23 11:08:09.860 -03:00 [INF] Request starting GET /api/talents
2025-08-23 11:08:09.862 -03:00 [INF] Request starting GET /api/leads
2025-08-23 11:08:10.017 -03:00 [INF] Buscando talentos paginados: página 1, tamanho 20, busca: nenhuma
2025-08-23 11:08:10.300 -03:00 [INF] Retornando 1 talentos de 1 total
2025-08-23 11:08:10.302 -03:00 [INF] Request finished GET /api/talents - 200 in 441.5990ms
2025-08-23 11:08:10.314 -03:00 [INF] Request finished GET /api/leads - 200 in 452.0030ms
2025-08-23 11:14:09.152 -03:00 [INF] Request starting GET /api/health
2025-08-23 11:14:09.152 -03:00 [INF] Request starting GET /api/chats
2025-08-23 11:14:09.169 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 11:14:09.182 -03:00 [INF] Request finished GET /api/health - 404 in 31.6700ms
2025-08-23 11:14:09.186 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 11:14:09.190 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 11:14:09.214 -03:00 [INF] Request starting GET /api/health
2025-08-23 11:14:09.215 -03:00 [INF] Request finished GET /api/health - 404 in 0.5020ms
2025-08-23 11:14:09.385 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 195.2800ms
2025-08-23 11:14:09.394 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 208.1530ms
2025-08-23 11:14:09.451 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 11:14:09.535 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 11:14:11.132 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 500 in 1962.9470ms
2025-08-23 11:14:11.144 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 11:14:11.282 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 500 in 138.7760ms
2025-08-23 11:14:11.684 -03:00 [INF] Request starting POST /api/whatsapp/generate-qr
2025-08-23 11:14:11.832 -03:00 [INF] 📥 Requisição de geração de QR recebida
2025-08-23 11:14:11.841 -03:00 [INF] Iniciado pedido de QR Code. RequestId: 6b227459-3226-4e13-9b18-e34ef63d26b6
2025-08-23 11:14:11.942 -03:00 [INF] 📤 Comando enviado para RabbitMQ: {"command":"generate_qr","requestId":"6b227459-3226-4e13-9b18-e34ef63d26b6","timestamp":"2025-08-23T14:14:11.84209Z"}
2025-08-23 11:14:11.946 -03:00 [INF] Request finished POST /api/whatsapp/generate-qr - 200 in 262.0530ms
2025-08-23 11:14:12.108 -03:00 [INF] Request starting GET /api/chats
2025-08-23 11:14:12.108 -03:00 [INF] Request finished GET /api/chats - 200 in 2959.1390ms
2025-08-23 11:14:12.785 -03:00 [INF] Request finished GET /api/chats - 200 in 677.1290ms
2025-08-23 11:14:41.689 -03:00 [INF] 📱 QR Code recebido via RabbitMQ
2025-08-23 11:16:21.182 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:16:21.644 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=false
2025-08-23 11:16:21.674 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 493.1830ms
2025-08-23 11:16:21.696 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:16:22.276 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 580.2280ms
2025-08-23 11:16:37.146 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:16:37.539 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 393.3580ms
2025-08-23 11:16:46.310 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:16:47.634 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:16:48.762 -03:00 [ERR] Failed executing DbCommand (158ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:16:50.479 -03:00 [ERR] Failed executing DbCommand (873ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:16:50.569 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:16:50.643 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:16:50.648 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:16:50.704 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:16:51.731 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:16:51.877 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.8600ms
2025-08-23 11:17:06.683 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:17:06.733 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:17:06.901 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.2880ms
2025-08-23 11:17:07.972 -03:00 [ERR] Failed executing DbCommand (185ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:17:08.392 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:17:09.117 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:17:18.100 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:17:20.222 -03:00 [ERR] Failed executing DbCommand (199ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:17:20.406 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:17:20.549 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:17:23.128 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:17:23.354 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 225.8540ms
2025-08-23 11:17:36.816 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:17:37.023 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 207.5200ms
2025-08-23 11:17:45.429 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 11:17:46.372 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 943.4240ms
2025-08-23 11:17:51.746 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:17:51.913 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.5810ms
2025-08-23 11:18:06.820 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:18:07.046 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 225.8650ms
2025-08-23 11:18:12.643 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:18:13.755 -03:00 [ERR] Failed executing DbCommand (155ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:18:13.933 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:18:13.947 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:18:17.398 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:18:18.508 -03:00 [ERR] Failed executing DbCommand (185ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:18:18.707 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:18:18.743 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:18:21.865 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:18:22.028 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.0290ms
2025-08-23 11:18:23.849 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 11:18:24.881 -03:00 [ERR] Failed executing DbCommand (156ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:18:25.028 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:18:25.043 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985095661
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:18:36.778 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:18:36.929 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.3090ms
2025-08-23 11:18:51.848 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:18:52.995 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1145.5090ms
2025-08-23 11:19:06.853 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:19:07.049 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.4610ms
2025-08-23 11:19:22.395 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:19:22.743 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 344.6310ms
2025-08-23 11:19:37.011 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:19:37.243 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 231.5820ms
2025-08-23 11:19:51.975 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:19:52.505 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 530.6220ms
2025-08-23 11:20:07.592 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:20:07.895 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 306.4500ms
2025-08-23 11:20:21.946 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:20:22.126 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.4330ms
2025-08-23 11:20:36.986 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:20:37.131 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6020ms
2025-08-23 11:20:51.924 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:20:52.267 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 343.0060ms
2025-08-23 11:21:07.368 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:21:07.750 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 382.1960ms
2025-08-23 11:21:14.984 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> 5511949908369
2025-08-23 11:21:16.517 -03:00 [ERR] Failed executing DbCommand (167ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:21:16.726 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:21:16.752 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:21:22.052 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:21:22.247 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.1020ms
2025-08-23 11:21:36.980 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:21:37.175 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.5360ms
2025-08-23 11:21:52.177 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:21:52.397 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 217.9470ms
2025-08-23 11:22:07.814 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:22:08.026 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 211.3440ms
2025-08-23 11:22:22.196 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:22:22.385 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 188.5150ms
2025-08-23 11:22:36.994 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:22:37.148 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5000ms
2025-08-23 11:22:52.109 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:22:52.356 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 247.1910ms
2025-08-23 11:23:07.227 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:23:07.450 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 223.1910ms
2025-08-23 11:23:22.161 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:23:22.315 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9140ms
2025-08-23 11:23:37.157 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:23:37.317 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.4910ms
2025-08-23 11:23:52.175 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:23:52.325 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8300ms
2025-08-23 11:24:08.205 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:24:08.422 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 216.1530ms
2025-08-23 11:24:22.553 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:24:22.706 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.2030ms
2025-08-23 11:24:37.692 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:24:37.929 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 236.8600ms
2025-08-23 11:24:53.180 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:24:53.378 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 196.9590ms
2025-08-23 11:25:07.614 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:25:07.823 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 210.6880ms
2025-08-23 11:25:22.501 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:25:22.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.1040ms
2025-08-23 11:25:37.530 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:25:38.168 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 637.9470ms
2025-08-23 11:25:52.599 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:25:53.212 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 613.1170ms
2025-08-23 11:25:53.969 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511989401558 -> 5511949908369
2025-08-23 11:26:01.314 -03:00 [ERR] Failed executing DbCommand (171ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:26:01.643 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:26:01.763 -03:00 [ERR] Erro ao processar mensagem recebida: 5511989401558
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:26:07.897 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:26:08.289 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 391.6620ms
2025-08-23 11:26:20.904 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511989401558 -> 5511949908369
2025-08-23 11:26:22.442 -03:00 [ERR] Failed executing DbCommand (198ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:26:22.538 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:26:22.677 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3130ms
2025-08-23 11:26:22.701 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:26:22.734 -03:00 [ERR] Erro ao processar mensagem recebida: 5511989401558
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:26:37.744 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:26:37.903 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.4880ms
2025-08-23 11:26:52.627 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:26:52.967 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 340.6930ms
2025-08-23 11:27:07.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:27:08.914 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1160.5190ms
2025-08-23 11:27:22.655 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:27:23.301 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 646.3400ms
2025-08-23 11:27:37.715 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:27:37.891 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 175.1470ms
2025-08-23 11:27:52.647 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:27:52.806 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.8380ms
2025-08-23 11:28:07.833 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:28:08.273 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 441.8520ms
2025-08-23 11:28:22.635 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:28:22.805 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.5900ms
2025-08-23 11:28:37.670 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:28:37.822 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.2390ms
2025-08-23 11:28:52.687 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:28:52.845 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.9810ms
2025-08-23 11:29:05.468 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511916937604 -> 5511949908369
2025-08-23 11:29:06.580 -03:00 [ERR] Failed executing DbCommand (163ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 100), @p2='?' (Size = 150), @p3='?' (DbType = Guid), @p4='?' (DbType = Guid), @p5='?' (DbType = DateTime), @p6='?' (DbType = Int32), @p7='?' (Size = 4000), @p8='?' (DbType = DateTime), @p9='?' (Size = 100), @p10='?' (Size = 150), @p11='?' (DbType = DateTime), @p12='?' (DbType = Int32), @p13='?' (DbType = Int32), @p14='?' (DbType = DateTime), @p15='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `AttendanceTickets` (`Id`, `AssignedUserId`, `AssignedUserName`, `ChatId`, `ChatLogId`, `CreatedAtUtc`, `CurrentStep`, `Description`, `EndedAtUtc`, `OperatorId`, `OperatorName`, `StartedAtUtc`, `Status`, `Step`, `UpdatedAtUtc`, `Verified`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15);
SELECT `RowVersion`
FROM `AttendanceTickets`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 11:29:06.747 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 11:29:06.762 -03:00 [ERR] Erro ao processar mensagem recebida: 5511916937604
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Cannot add or update a child row: a foreign key constraint fails (`railway`.`AttendanceTickets`, CONSTRAINT `FK_AttendanceTickets_ChatLogs_ChatLogId` FOREIGN KEY (`ChatLogId`) REFERENCES `ChatLogs` (`Id`) ON DELETE CASCADE)
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 41
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 423
2025-08-23 11:29:07.629 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:29:07.769 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9170ms
2025-08-23 11:29:12.470 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:29:12.608 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=true
2025-08-23 11:29:12.609 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.5830ms
2025-08-23 11:29:22.627 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:29:22.765 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.6030ms
2025-08-23 11:29:37.635 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:29:37.779 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2300ms
2025-08-23 11:29:44.838 -03:00 [INF] Request finished GET /whatsappHub - 101 in 935303.6550ms
2025-08-23 11:29:44.838 -03:00 [INF] Request finished GET /whatsappHub - 101 in 935386.7390ms
2025-08-23 11:29:52.635 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:29:52.772 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.7420ms
2025-08-23 11:30:07.638 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:30:07.778 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4640ms
2025-08-23 11:30:22.657 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:30:22.805 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0870ms
2025-08-23 11:30:37.645 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:30:37.792 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0570ms
2025-08-23 11:30:52.658 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:30:52.798 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0160ms
2025-08-23 11:31:07.654 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:31:07.792 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1310ms
2025-08-23 11:31:22.661 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:31:22.798 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0660ms
2025-08-23 11:31:37.643 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:31:37.785 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1800ms
2025-08-23 11:31:52.665 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:31:52.808 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4800ms
2025-08-23 11:32:07.667 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:32:07.808 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8190ms
2025-08-23 11:32:22.651 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:32:22.791 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9660ms
2025-08-23 11:32:37.647 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 11:32:37.784 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0830ms
2025-08-23 11:32:46.787 -03:00 [INF] Desconectando do RabbitMQ...
2025-08-23 11:53:42.637 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 11:53:42.852 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 11:53:42.853 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 11:53:44.655 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 11:53:45.777 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 11:53:45.997 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 11:53:46.180 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 11:53:46.181 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 12:09:54.191 -03:00 [INF] Request starting GET /api/users/by-email/test@example.com
2025-08-23 12:09:56.798 -03:00 [INF] Request finished GET /api/users/by-email/test@example.com - 500 in 2607.3470ms
2025-08-23 12:17:43.882 -03:00 [INF] Request starting GET /api/users/by-email/test@example.com
2025-08-23 12:17:45.096 -03:00 [INF] Request finished GET /api/users/by-email/test@example.com - 500 in 1214.4920ms
2025-08-23 13:39:09.029 -03:00 [INF] Iniciando Pregiato API...
2025-08-23 13:39:09.181 -03:00 [INF] RabbitMQ Background Service iniciado
2025-08-23 13:39:09.182 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 13:39:10.631 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 13:39:11.776 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 13:39:11.974 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 13:39:12.161 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 13:39:12.161 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 13:39:35.658 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:39:35.660 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:39:35.660 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:35.664 -03:00 [INF] Request finished GET /api/health - 404 in 8.6580ms
2025-08-23 13:39:35.714 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 13:39:35.716 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 13:39:35.721 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:39:35.721 -03:00 [INF] Request finished GET /api/health - 404 in 0.3520ms
2025-08-23 13:39:35.812 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 97.5430ms
2025-08-23 13:39:35.815 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 98.5780ms
2025-08-23 13:39:35.836 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 13:39:36.037 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 13:39:39.588 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:39:52.632 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 16976.6500ms
2025-08-23 13:39:52.642 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:52.708 -03:00 [INF] Request finished GET /api/chats - 200 in 17053.0000ms
2025-08-23 13:39:52.708 -03:00 [INF] Request finished GET /api/chats - 200 in 13120.2340ms
2025-08-23 13:39:53.501 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 858.6940ms
2025-08-23 13:39:53.507 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:53.973 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 465.4890ms
2025-08-23 13:39:53.976 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:54.397 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 421.1880ms
2025-08-23 13:39:54.413 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:54.566 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:39:54.829 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 415.8060ms
2025-08-23 13:39:54.982 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 415.9410ms
2025-08-23 13:42:34.771 -03:00 [INF] Request starting POST /api/whatsapp/generate-qr
2025-08-23 13:42:34.951 -03:00 [INF] 📥 Requisição de geração de QR recebida
2025-08-23 13:42:34.959 -03:00 [INF] Iniciado pedido de QR Code. RequestId: 2cac7733-743f-46a3-9044-52141b3197fe
2025-08-23 13:42:34.974 -03:00 [INF] 📤 Comando enviado para RabbitMQ: {"command":"generate_qr","requestId":"2cac7733-743f-46a3-9044-52141b3197fe","timestamp":"2025-08-23T16:42:34.959884Z"}
2025-08-23 13:42:34.980 -03:00 [INF] Request finished POST /api/whatsapp/generate-qr - 200 in 209.4710ms
2025-08-23 13:43:40.701 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> null
2025-08-23 13:43:42.446 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:43:42.683 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=false
2025-08-23 13:43:42.686 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 240.3700ms
2025-08-23 13:43:42.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:43:42.873 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.2140ms
2025-08-23 13:43:43.192 -03:00 [ERR] Failed executing DbCommand (146ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:43:43.848 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:43:43.879 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:43:44.142 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> 5511949908369
2025-08-23 13:43:45.115 -03:00 [ERR] Failed executing DbCommand (137ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:43:45.253 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:43:45.260 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:43:46.311 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:43:47.172 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:43:48.447 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:43:48.561 -03:00 [INF] 📝 Novo ChatLog criado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:43:48.642 -03:00 [ERR] Failed executing DbCommand (144ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:43:48.792 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511956069922' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511956069922' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:43:48.797 -03:00 [ERR] Erro ao processar mensagem recebida: 5511956069922
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511956069922' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:43:50.511 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:43:51.033 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:43:51.176 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:43:53.507 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 13:43:53.928 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 421.9070ms
2025-08-23 13:43:57.795 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:43:58.045 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 250.3960ms
2025-08-23 13:44:12.105 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:44:12.261 -03:00 [INF] 📥 Webhook session/updated: connected=true number=5511949908369 validated=true
2025-08-23 13:44:12.264 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6980ms
2025-08-23 13:44:13.022 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:44:13.371 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 348.2730ms
2025-08-23 13:44:14.832 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:44:15.248 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:44:15.660 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:44:16.051 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:44:16.285 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:44:16.333 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:44:16.356 -03:00 [ERR] Erro ao processar mensagem recebida: 5511956069922
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:44:16.786 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:44:17.062 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:44:17.372 -03:00 [ERR] Erro ao processar mensagem recebida: 5511956069922
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:44:17.844 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 194545039994990 -> 5511949908369
2025-08-23 13:44:18.069 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 194545039994990 -> 5511949908369
2025-08-23 13:44:19.038 -03:00 [INF] 📝 Novo ChatLog criado para 194545039994990: "4d1940c3-ece0-4cb3-b7ff-7e2358e57087"
2025-08-23 13:44:19.070 -03:00 [ERR] Failed executing DbCommand (157ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = -1), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:44:19.214 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:44:19.229 -03:00 [ERR] Erro ao processar mensagem recebida: 194545039994990
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:44:20.017 -03:00 [INF] 📨 Chat criado/atualizado para 194545039994990: "5394e46b-6e41-4b55-a766-9a95918a8f92"
2025-08-23 13:44:20.630 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985670692 -> 5511949908369
2025-08-23 13:44:21.846 -03:00 [INF] 📝 Novo ChatLog criado para 5511985670692: "5366bb4f-35f9-4e1d-b6fc-e5635049682d"
2025-08-23 13:44:22.595 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363174574729244 -> 5511949908369
2025-08-23 13:44:22.814 -03:00 [INF] 📨 Chat criado/atualizado para 5511985670692: "fe3d3f09-c443-4a41-8c8f-e2dd0a1a9afe"
2025-08-23 13:44:24.224 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5521998748299 -> 5511949908369
2025-08-23 13:44:24.630 -03:00 [ERR] Failed executing DbCommand (233ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:44:24.776 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:44:24.788 -03:00 [ERR] Erro ao processar mensagem recebida: 120363174574729244
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:44:25.648 -03:00 [ERR] Failed executing DbCommand (151ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:44:27.801 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:44:27.873 -03:00 [ERR] Erro ao processar mensagem recebida: 5521998748299
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:44:28.255 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:44:28.438 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 182.0990ms
2025-08-23 13:44:29.833 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 13:44:31.042 -03:00 [INF] 📝 Novo ChatLog criado para 5511985095661: "153c53b2-d7c1-4563-8256-a2cf0a2c9350"
2025-08-23 13:44:31.724 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 13:44:31.999 -03:00 [INF] 📨 Chat criado/atualizado para 5511985095661: "82fab660-d0b1-47b0-b3fa-5c3943781dd5"
2025-08-23 13:44:32.782 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 13:44:32.844 -03:00 [INF] 📝 ChatLog atualizado para 5511985095661: "153c53b2-d7c1-4563-8256-a2cf0a2c9350"
2025-08-23 13:44:33.118 -03:00 [INF] 📨 Chat criado/atualizado para 5511985095661: "82fab660-d0b1-47b0-b3fa-5c3943781dd5"
2025-08-23 13:44:33.620 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 13:44:33.919 -03:00 [INF] 📝 ChatLog atualizado para 5511985095661: "153c53b2-d7c1-4563-8256-a2cf0a2c9350"
2025-08-23 13:44:34.207 -03:00 [INF] 📨 Chat criado/atualizado para 5511985095661: "82fab660-d0b1-47b0-b3fa-5c3943781dd5"
2025-08-23 13:44:34.377 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985095661 -> 5511949908369
2025-08-23 13:44:34.806 -03:00 [INF] 📝 ChatLog atualizado para 5511985095661: "153c53b2-d7c1-4563-8256-a2cf0a2c9350"
2025-08-23 13:44:35.236 -03:00 [INF] 📨 Chat criado/atualizado para 5511985095661: "82fab660-d0b1-47b0-b3fa-5c3943781dd5"
2025-08-23 13:44:35.487 -03:00 [INF] 📝 ChatLog atualizado para 5511985095661: "153c53b2-d7c1-4563-8256-a2cf0a2c9350"
2025-08-23 13:44:35.760 -03:00 [INF] 📨 Chat criado/atualizado para 5511985095661: "82fab660-d0b1-47b0-b3fa-5c3943781dd5"
2025-08-23 13:44:36.846 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511916937604 -> 5511949908369
2025-08-23 13:44:38.655 -03:00 [ERR] Failed executing DbCommand (219ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:44:38.892 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:44:38.925 -03:00 [ERR] Erro ao processar mensagem recebida: 5511916937604
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:44:42.860 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:44:43.020 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.6040ms
2025-08-23 13:44:44.878 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:45.191 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:46.183 -03:00 [INF] 📝 Novo ChatLog criado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:46.223 -03:00 [ERR] Failed executing DbCommand (188ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:44:46.385 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511991024103' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511991024103' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:44:46.396 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Duplicate entry '5511991024103' for key 'ChatLogs.IX_ChatLogs_ContactPhoneE164'
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:44:47.168 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:48.510 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:49.678 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:49.950 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:49.979 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:50.592 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:51.063 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:51.372 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:51.696 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:44:52.230 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:54.341 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:54.470 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:54.632 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:55.600 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:55.630 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:55.906 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:56.009 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:56.884 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:57.011 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:44:57.084 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:57.164 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:57.819 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:44:57.972 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.7360ms
2025-08-23 13:44:58.128 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:58.224 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:58.356 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:44:58.504 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:44:59.225 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:44:59.501 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:44:59.501 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:00.536 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> 5511949908369
2025-08-23 13:45:01.658 -03:00 [ERR] Failed executing DbCommand (210ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:01.803 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:01.809 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:01.953 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:03.325 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:04.528 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:05.954 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:06.838 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> 5511949908369
2025-08-23 13:45:07.213 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511966137443 -> 5511949908369
2025-08-23 13:45:07.349 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:07.617 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:07.821 -03:00 [ERR] Failed executing DbCommand (142ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:07.923 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:07.971 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:07.975 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:08.155 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:08.187 -03:00 [ERR] Failed executing DbCommand (145ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:08.328 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:08.338 -03:00 [ERR] Erro ao processar mensagem recebida: 5511966137443
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:08.540 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:08.766 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:09.002 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:09.102 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:09.260 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:09.378 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:09.662 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:10.621 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:10.847 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:10.895 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:11.092 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:11.172 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:11.225 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:11.938 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:12.211 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:12.269 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:12.371 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363173003902460 -> 5511949908369
2025-08-23 13:45:12.626 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:13.206 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363172556943876 -> 5511949908369
2025-08-23 13:45:13.239 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:13.322 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:45:13.991 -03:00 [ERR] Failed executing DbCommand (243ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:14.173 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:14.174 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511916937604 -> 5511949908369
2025-08-23 13:45:14.178 -03:00 [ERR] Erro ao processar mensagem recebida: 120363173003902460
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:14.344 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511916937604 -> 5511949908369
2025-08-23 13:45:14.375 -03:00 [ERR] Failed executing DbCommand (138ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:14.515 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:14.531 -03:00 [ERR] Erro ao processar mensagem recebida: 120363172556943876
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:14.884 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1558.1790ms
2025-08-23 13:45:15.539 -03:00 [ERR] Failed executing DbCommand (149ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:15.539 -03:00 [ERR] Failed executing DbCommand (152ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:15.709 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:15.710 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:15.724 -03:00 [ERR] Erro ao processar mensagem recebida: 5511916937604
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:15.729 -03:00 [ERR] Erro ao processar mensagem recebida: 5511916937604
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:17.330 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:18.246 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:18.479 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:18.772 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:19.293 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:19.440 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:19.515 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:19.725 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:20.454 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:20.632 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:20.728 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:21.437 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:45:22.074 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:45:23.940 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:45:24.215 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:45:24.497 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:45:24.921 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:45:25.056 -03:00 [ERR] Erro ao processar mensagem recebida: 5511956069922
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:25.196 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:45:25.874 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:26.111 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:27.026 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:27.234 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:27.322 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:27.373 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:27.597 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511991024103 -> 5511949908369
2025-08-23 13:45:28.362 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:45:28.530 -03:00 [INF] 📝 ChatLog atualizado para 5511991024103: "db7a9c9e-fa50-4023-8695-b3a4292dc4cd"
2025-08-23 13:45:28.558 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 196.0970ms
2025-08-23 13:45:28.706 -03:00 [ERR] Erro ao processar mensagem recebida: 5511991024103
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 13:45:28.826 -03:00 [INF] 📨 Chat criado/atualizado para 5511991024103: "4966894c-b7da-4690-b835-eecf7fa76c9b"
2025-08-23 13:45:40.708 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363174574729244 -> 5511949908369
2025-08-23 13:45:41.765 -03:00 [ERR] Failed executing DbCommand (155ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 13:45:41.957 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 13:45:42.075 -03:00 [ERR] Erro ao processar mensagem recebida: 120363174574729244
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 13:45:43.373 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:45:43.554 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 181.6810ms
2025-08-23 13:45:58.357 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:45:58.528 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.6150ms
2025-08-23 13:46:14.387 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:46:14.673 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 285.0930ms
2025-08-23 13:46:28.877 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:46:29.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 208.1850ms
2025-08-23 13:46:43.931 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:46:44.155 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 223.5310ms
2025-08-23 13:46:59.220 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:46:59.431 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 209.9320ms
2025-08-23 13:47:14.049 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:47:14.201 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.9560ms
2025-08-23 13:47:29.040 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:47:29.181 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4260ms
2025-08-23 13:47:44.036 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:47:44.180 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6780ms
2025-08-23 13:47:59.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:47:59.230 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.4830ms
2025-08-23 13:48:01.830 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:48:03.053 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:48:03.409 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:48:14.079 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:48:14.241 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.2780ms
2025-08-23 13:48:27.170 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 13:48:28.296 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 13:48:28.580 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 13:48:29.077 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:48:29.218 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7220ms
2025-08-23 13:48:44.086 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:48:44.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8880ms
2025-08-23 13:48:59.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:48:59.218 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.8690ms
2025-08-23 13:49:14.289 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:49:14.653 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 364.3600ms
2025-08-23 13:49:29.109 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:49:29.260 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.9840ms
2025-08-23 13:49:39.307 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:49:40.902 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:49:41.901 -03:00 [INF] 📝 Novo ChatLog criado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:49:43.597 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:49:43.735 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:49:44.016 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:49:44.106 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:49:44.251 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4270ms
2025-08-23 13:49:53.527 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:49:54.976 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:49:55.016 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:49:55.322 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:49:56.129 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:49:56.425 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:49:59.427 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:49:59.584 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.7080ms
2025-08-23 13:50:14.382 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:50:14.531 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.1930ms
2025-08-23 13:50:29.288 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:50:29.431 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2930ms
2025-08-23 13:50:44.295 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:50:44.437 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0470ms
2025-08-23 13:50:59.349 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:50:59.510 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.1920ms
2025-08-23 13:51:14.325 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:51:14.619 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 293.9870ms
2025-08-23 13:51:29.303 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:51:29.447 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9330ms
2025-08-23 13:51:44.350 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:51:44.877 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 527.4980ms
2025-08-23 13:51:59.374 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:51:59.522 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4410ms
2025-08-23 13:52:14.326 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:52:14.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.6330ms
2025-08-23 13:52:29.577 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:52:29.738 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.7980ms
2025-08-23 13:52:44.169 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:52:44.327 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:52:44.991 -03:00 [INF] Request finished GET /api/chats - 200 in 821.7080ms
2025-08-23 13:52:45.422 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1095.0800ms
2025-08-23 13:52:59.334 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:52:59.476 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3200ms
2025-08-23 13:53:14.359 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:53:14.518 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.3840ms
2025-08-23 13:53:29.287 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:53:29.287 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:53:29.287 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:53:29.300 -03:00 [INF] Request finished GET /api/health - 404 in 12.8240ms
2025-08-23 13:53:29.365 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:53:29.871 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 584.8530ms
2025-08-23 13:53:30.140 -03:00 [INF] Request finished GET /api/chats - 200 in 853.1780ms
2025-08-23 13:53:32.958 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 3593.3580ms
2025-08-23 13:53:40.298 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:53:40.298 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:53:40.298 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:53:40.313 -03:00 [INF] Request finished GET /api/health - 404 in 14.3270ms
2025-08-23 13:53:40.806 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 508.9960ms
2025-08-23 13:53:41.098 -03:00 [INF] Request finished GET /api/chats - 200 in 800.3660ms
2025-08-23 13:53:42.092 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:53:43.526 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:53:43.832 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:53:45.054 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:53:45.217 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.3780ms
2025-08-23 13:53:48.942 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:53:51.084 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:53:51.679 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:54:00.376 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:54:00.568 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.2130ms
2025-08-23 13:54:15.221 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:54:15.416 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.7080ms
2025-08-23 13:54:20.292 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:54:20.292 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:54:20.292 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:54:20.302 -03:00 [INF] Request finished GET /api/health - 404 in 9.2460ms
2025-08-23 13:54:20.796 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 503.9300ms
2025-08-23 13:54:22.668 -03:00 [INF] Request finished GET /api/chats - 200 in 2376.0440ms
2025-08-23 13:54:30.453 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:54:30.613 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.7730ms
2025-08-23 13:54:45.222 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:54:45.369 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9060ms
2025-08-23 13:54:58.270 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:54:58.270 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:54:58.270 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:54:58.272 -03:00 [INF] Request finished GET /api/health - 404 in 2.4690ms
2025-08-23 13:54:58.749 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 479.4470ms
2025-08-23 13:54:59.035 -03:00 [INF] Request finished GET /api/chats - 200 in 764.7010ms
2025-08-23 13:55:00.308 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:55:00.457 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8540ms
2025-08-23 13:55:11.580 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:55:11.580 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:55:11.580 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:55:11.587 -03:00 [INF] Request finished GET /api/health - 404 in 6.5470ms
2025-08-23 13:55:12.117 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 536.5680ms
2025-08-23 13:55:12.390 -03:00 [INF] Request finished GET /api/chats - 200 in 809.6440ms
2025-08-23 13:55:15.273 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:55:15.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6530ms
2025-08-23 13:55:30.254 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:55:30.398 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5080ms
2025-08-23 13:55:43.344 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:55:43.347 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:55:43.350 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:55:43.371 -03:00 [INF] Request finished GET /api/health - 404 in 26.2600ms
2025-08-23 13:55:44.051 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 700.9560ms
2025-08-23 13:55:44.469 -03:00 [INF] Request finished GET /api/chats - 200 in 1122.2160ms
2025-08-23 13:55:45.327 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:55:45.521 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.8610ms
2025-08-23 13:55:53.978 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:55:55.403 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:55:55.748 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:56:00.476 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:56:01.264 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 787.4120ms
2025-08-23 13:56:16.174 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:56:16.341 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.8470ms
2025-08-23 13:56:26.328 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:56:26.328 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:56:26.328 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:56:26.334 -03:00 [INF] Request finished GET /api/health - 404 in 4.9120ms
2025-08-23 13:56:26.861 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 532.5510ms
2025-08-23 13:56:27.136 -03:00 [INF] Request finished GET /api/chats - 200 in 807.6000ms
2025-08-23 13:56:30.857 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:56:31.013 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.0560ms
2025-08-23 13:56:47.344 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:56:47.538 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.7950ms
2025-08-23 13:57:00.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:57:00.936 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 181.2850ms
2025-08-23 13:57:05.229 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:57:05.229 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:57:05.229 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:57:05.233 -03:00 [INF] Request finished GET /api/health - 404 in 4.7860ms
2025-08-23 13:57:05.700 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 471.4530ms
2025-08-23 13:57:05.973 -03:00 [INF] Request finished GET /api/chats - 200 in 744.4240ms
2025-08-23 13:57:15.821 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:57:16.015 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.6290ms
2025-08-23 13:57:30.749 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:57:30.902 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.1730ms
2025-08-23 13:57:45.756 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:57:45.895 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6160ms
2025-08-23 13:58:01.329 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:58:01.542 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 213.5810ms
2025-08-23 13:58:06.044 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1110208.2780ms
2025-08-23 13:58:06.066 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1110030.2740ms
2025-08-23 13:58:09.707 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:58:09.707 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:58:09.707 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:09.730 -03:00 [INF] Request finished GET /api/health - 404 in 21.4840ms
2025-08-23 13:58:09.804 -03:00 [INF] Request starting GET /api/health
2025-08-23 13:58:09.808 -03:00 [INF] Request finished GET /api/health - 404 in 3.0300ms
2025-08-23 13:58:10.104 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 13:58:10.117 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 13:58:10.146 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 41.5050ms
2025-08-23 13:58:10.146 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 29.1740ms
2025-08-23 13:58:10.158 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 13:58:10.252 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 13:58:10.491 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 784.3740ms
2025-08-23 13:58:10.494 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:10.774 -03:00 [INF] Request finished GET /api/chats - 200 in 1067.3620ms
2025-08-23 13:58:10.908 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 413.8070ms
2025-08-23 13:58:10.910 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:11.326 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 415.4680ms
2025-08-23 13:58:11.338 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:11.619 -03:00 [INF] Request starting GET /api/chats
2025-08-23 13:58:11.747 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 408.8400ms
2025-08-23 13:58:11.758 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:12.184 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 426.4330ms
2025-08-23 13:58:12.191 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 13:58:12.328 -03:00 [INF] Request finished GET /api/chats - 200 in 708.9320ms
2025-08-23 13:58:12.639 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 447.9580ms
2025-08-23 13:58:16.108 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:58:16.261 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.1370ms
2025-08-23 13:58:31.333 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:58:31.782 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 450.1400ms
2025-08-23 13:58:34.728 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 13:58:35.985 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 13:58:36.316 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 13:58:46.044 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:58:46.231 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 187.6190ms
2025-08-23 13:59:00.985 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:59:01.133 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.7530ms
2025-08-23 13:59:16.014 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:59:16.178 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.3190ms
2025-08-23 13:59:31.130 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:59:31.283 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.1310ms
2025-08-23 13:59:46.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 13:59:46.795 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.3820ms
2025-08-23 14:00:01.667 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:00:01.845 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.5200ms
2025-08-23 14:00:16.632 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:00:16.782 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8630ms
2025-08-23 14:00:31.603 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:00:32.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 517.8750ms
2025-08-23 14:00:46.607 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:00:46.798 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 190.5670ms
2025-08-23 14:01:01.612 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:01:01.754 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4910ms
2025-08-23 14:01:16.605 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:01:16.754 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.5940ms
2025-08-23 14:01:31.618 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:01:31.953 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 335.1580ms
2025-08-23 14:01:46.950 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:01:47.158 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 208.5090ms
2025-08-23 14:02:02.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:02:03.064 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.4350ms
2025-08-23 14:02:16.966 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:02:17.109 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0260ms
2025-08-23 14:02:35.293 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:02:35.604 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 316.9460ms
2025-08-23 14:02:47.161 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:02:47.308 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3190ms
2025-08-23 14:03:02.604 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:03:02.756 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.2320ms
2025-08-23 14:03:17.337 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:03:17.484 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2260ms
2025-08-23 14:03:23.687 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363173003902460 -> 5511949908369
2025-08-23 14:03:25.781 -03:00 [ERR] Failed executing DbCommand (147ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 14:03:25.945 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 14:03:25.949 -03:00 [ERR] Erro ao processar mensagem recebida: 120363173003902460
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 14:03:32.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:03:32.915 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 189.7010ms
2025-08-23 14:03:47.340 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:03:47.494 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4910ms
2025-08-23 14:04:02.332 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:04:02.486 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.3700ms
2025-08-23 14:04:18.307 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:04:18.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.6360ms
2025-08-23 14:04:20.725 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:04:21.426 -03:00 [INF] Request finished GET /api/chats - 200 in 701.0120ms
2025-08-23 14:04:26.495 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:04:27.206 -03:00 [INF] Request finished GET /api/chats - 200 in 710.4570ms
2025-08-23 14:04:32.456 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:04:32.611 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.8070ms
2025-08-23 14:04:47.864 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:04:48.028 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.8960ms
2025-08-23 14:05:02.902 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:05:03.059 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.1170ms
2025-08-23 14:05:17.928 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:05:18.105 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.1770ms
2025-08-23 14:05:32.828 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:05:32.981 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.6010ms
2025-08-23 14:05:47.891 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:05:48.052 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.8120ms
2025-08-23 14:06:02.909 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:06:03.594 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 684.6080ms
2025-08-23 14:06:17.839 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:06:17.984 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6190ms
2025-08-23 14:06:32.842 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:06:33.037 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.5880ms
2025-08-23 14:06:48.081 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:06:48.230 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.0030ms
2025-08-23 14:07:02.872 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:07:03.028 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1360ms
2025-08-23 14:07:17.867 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:07:18.010 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1020ms
2025-08-23 14:07:32.924 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:07:33.083 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6670ms
2025-08-23 14:07:47.924 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:07:48.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9390ms
2025-08-23 14:08:03.318 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:08:03.636 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 318.4460ms
2025-08-23 14:08:18.035 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:08:18.192 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.4900ms
2025-08-23 14:08:33.091 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:08:33.314 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 223.5520ms
2025-08-23 14:08:48.014 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:08:48.166 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.7390ms
2025-08-23 14:09:03.008 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:09:03.151 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0120ms
2025-08-23 14:09:18.119 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:09:18.323 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 203.6680ms
2025-08-23 14:09:33.150 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:09:33.350 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 200.3900ms
2025-08-23 14:09:48.034 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:09:48.187 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5660ms
2025-08-23 14:10:03.106 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:10:03.269 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.2210ms
2025-08-23 14:10:18.234 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:10:18.492 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 258.5540ms
2025-08-23 14:10:33.061 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:10:33.218 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.2770ms
2025-08-23 14:10:48.063 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:10:48.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5910ms
2025-08-23 14:11:03.049 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:11:03.192 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0120ms
2025-08-23 14:11:18.210 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:11:18.439 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 228.8150ms
2025-08-23 14:11:33.057 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:11:33.200 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1690ms
2025-08-23 14:11:48.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:11:48.212 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5090ms
2025-08-23 14:12:03.823 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:12:04.023 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 200.5150ms
2025-08-23 14:12:18.118 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:12:18.262 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3570ms
2025-08-23 14:12:33.241 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:12:33.411 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.0940ms
2025-08-23 14:12:43.675 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:12:47.241 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:12:47.541 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:12:48.169 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:12:48.314 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6990ms
2025-08-23 14:12:53.386 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:12:54.664 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:12:54.939 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:13:03.214 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:13:03.369 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1190ms
2025-08-23 14:13:18.194 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:13:18.341 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9030ms
2025-08-23 14:13:33.200 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:13:33.351 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5860ms
2025-08-23 14:13:48.265 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:13:48.468 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 203.3150ms
2025-08-23 14:13:50.222 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:13:51.547 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:13:51.828 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:14:03.243 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:14:03.389 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0180ms
2025-08-23 14:14:03.542 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:14:04.662 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:14:04.933 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:14:15.289 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:14:16.394 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:14:16.665 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:14:18.224 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:14:18.362 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.9520ms
2025-08-23 14:14:24.000 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:14:25.097 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:14:25.367 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:14:27.468 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363174574729244 -> 5511949908369
2025-08-23 14:14:29.100 -03:00 [ERR] Failed executing DbCommand (148ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 14:14:29.892 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 14:14:29.910 -03:00 [ERR] Erro ao processar mensagem recebida: 120363174574729244
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 14:14:33.231 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:14:33.372 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3270ms
2025-08-23 14:14:48.241 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:14:48.387 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2730ms
2025-08-23 14:15:03.247 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:15:03.411 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.1160ms
2025-08-23 14:15:18.234 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:15:18.377 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9400ms
2025-08-23 14:15:33.261 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:15:33.420 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.1100ms
2025-08-23 14:15:48.570 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:15:48.763 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.0630ms
2025-08-23 14:16:03.472 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:16:03.626 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.8110ms
2025-08-23 14:16:18.744 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:16:18.938 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 194.0540ms
2025-08-23 14:16:33.074 -03:00 [INF] Request starting GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages
2025-08-23 14:16:33.102 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign
2025-08-23 14:16:33.424 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:16:33.562 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.5750ms
2025-08-23 14:16:34.230 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign
2025-08-23 14:16:35.099 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign - 200 in 1996.6270ms
2025-08-23 14:16:35.434 -03:00 [INF] Request finished GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages - 404 in 2360.0490ms
2025-08-23 14:16:35.438 -03:00 [INF] Request starting GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages
2025-08-23 14:16:35.742 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign
2025-08-23 14:16:35.854 -03:00 [INF] Request finished GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages - 404 in 416.1870ms
2025-08-23 14:16:35.867 -03:00 [INF] Request starting GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages
2025-08-23 14:16:36.009 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign - 200 in 1779.4330ms
2025-08-23 14:16:36.294 -03:00 [INF] Request finished GET /api/chats/bacbd815-2e30-41c9-8259-425c0276b469/messages - 404 in 427.5760ms
2025-08-23 14:16:36.728 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/assign - 200 in 985.4250ms
2025-08-23 14:16:39.259 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/step
2025-08-23 14:16:40.070 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/step
2025-08-23 14:16:40.627 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/step
2025-08-23 14:16:41.037 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/step - 200 in 1777.5860ms
2025-08-23 14:16:41.307 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.UpdateStepAsync(Guid chatId, Int32 step) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 63
   at Pregiato.API.Controllers.AttendancesController.Step(Guid chatId, StepRequest req) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Controllers/AttendancesController.cs:line 44
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 14:16:41.841 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/step - 200 in 1213.8180ms
2025-08-23 14:16:43.082 -03:00 [INF] Request starting POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/finalize
2025-08-23 14:16:44.792 -03:00 [INF] Request finished POST /api/attendances/bacbd815-2e30-41c9-8259-425c0276b469/finalize - 200 in 1686.9860ms
2025-08-23 14:16:48.457 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:16:48.634 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.3950ms
2025-08-23 14:17:03.459 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:17:03.636 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.2790ms
2025-08-23 14:17:18.476 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:17:18.640 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.5910ms
2025-08-23 14:17:33.438 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:17:33.590 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.0960ms
2025-08-23 14:17:48.445 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:17:48.613 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.9660ms
2025-08-23 14:18:03.450 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:18:03.604 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.1310ms
2025-08-23 14:18:18.533 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:18:18.707 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.3520ms
2025-08-23 14:18:34.007 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:18:34.246 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 239.5540ms
2025-08-23 14:18:48.800 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:18:48.976 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.8140ms
2025-08-23 14:19:03.631 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:19:03.796 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.5800ms
2025-08-23 14:19:18.765 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:19:19.076 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 310.7250ms
2025-08-23 14:19:33.556 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:19:34.276 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 719.6820ms
2025-08-23 14:19:48.566 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:19:48.724 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.9100ms
2025-08-23 14:20:03.663 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:20:03.884 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 220.2440ms
2025-08-23 14:20:11.375 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:20:11.375 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:20:11.410 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 14:20:11.525 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 105.1900ms
2025-08-23 14:20:11.832 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 14:20:15.958 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 4582.1420ms
2025-08-23 14:20:18.825 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:20:18.990 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.3940ms
2025-08-23 14:20:22.216 -03:00 [INF] Request finished GET /api/chats - 200 in 10840.8490ms
2025-08-23 14:20:33.779 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:20:33.932 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.4290ms
2025-08-23 14:20:42.497 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:20:42.497 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:20:42.497 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:20:42.533 -03:00 [INF] Request finished GET /api/health - 404 in 34.6560ms
2025-08-23 14:20:42.590 -03:00 [INF] Request finished GET /whatsappHub - 101 in 30757.8180ms
2025-08-23 14:20:43.150 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 652.1870ms
2025-08-23 14:20:44.316 -03:00 [INF] Request finished GET /api/chats - 200 in 1818.6050ms
2025-08-23 14:20:48.862 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:20:49.025 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.1690ms
2025-08-23 14:21:04.585 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:21:04.761 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.1370ms
2025-08-23 14:21:21.934 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:21:22.280 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 346.4230ms
2025-08-23 14:21:34.459 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:21:34.659 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 200.8650ms
2025-08-23 14:21:49.451 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:21:49.744 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 292.3650ms
2025-08-23 14:22:06.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:22:14.718 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 8593.9520ms
2025-08-23 14:22:19.421 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:22:19.771 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 349.2630ms
2025-08-23 14:22:22.356 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:22:24.635 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:22:25.896 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:22:40.986 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:22:47.193 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 6140.1620ms
2025-08-23 14:22:53.990 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:22:54.936 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 945.4850ms
2025-08-23 14:23:08.151 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:23:09.480 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1287.3290ms
2025-08-23 14:23:20.712 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:23:20.912 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 199.2950ms
2025-08-23 14:23:44.665 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:23:50.159 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 5445.7670ms
2025-08-23 14:24:02.198 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:24:03.513 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1293.9990ms
2025-08-23 14:24:12.137 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:24:18.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 5972.1150ms
2025-08-23 14:24:26.339 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:24:27.300 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 960.8070ms
2025-08-23 14:24:39.282 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:24:39.436 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9440ms
2025-08-23 14:24:39.670 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:24:40.338 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 14:24:40.559 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363172556943876 -> 5511949908369
2025-08-23 14:24:41.006 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:24:41.312 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:24:42.353 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 14:24:42.408 -03:00 [ERR] Failed executing DbCommand (154ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 14:24:42.575 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 14:24:42.600 -03:00 [ERR] Erro ao processar mensagem recebida: 120363172556943876
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 14:24:43.320 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 14:24:54.359 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:24:54.540 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.8180ms
2025-08-23 14:25:01.251 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:25:01.251 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:25:01.255 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:25:01.256 -03:00 [INF] Request finished GET /api/health - 404 in 1.6440ms
2025-08-23 14:25:02.050 -03:00 [INF] Request finished GET /api/chats - 200 in 798.1970ms
2025-08-23 14:25:02.612 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1360.1450ms
2025-08-23 14:25:09.858 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:25:10.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 877.4110ms
2025-08-23 14:25:24.605 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:25:24.780 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.7190ms
2025-08-23 14:25:39.742 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:25:40.177 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 433.8200ms
2025-08-23 14:25:54.596 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:25:54.817 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 220.8300ms
2025-08-23 14:26:10.827 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:26:10.998 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.6170ms
2025-08-23 14:26:25.038 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:26:25.192 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9330ms
2025-08-23 14:26:39.896 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:26:40.267 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 370.7590ms
2025-08-23 14:26:43.294 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:26:43.293 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:26:43.293 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:26:43.336 -03:00 [INF] Request finished GET /api/health - 404 in 43.1880ms
2025-08-23 14:26:43.853 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 560.1560ms
2025-08-23 14:26:44.150 -03:00 [INF] Request finished GET /api/chats - 200 in 856.4700ms
2025-08-23 14:26:52.340 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:26:52.341 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:26:52.343 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:26:52.353 -03:00 [INF] Request finished GET /api/health - 404 in 9.7790ms
2025-08-23 14:26:52.853 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 512.6670ms
2025-08-23 14:26:53.121 -03:00 [INF] Request finished GET /api/chats - 200 in 781.1320ms
2025-08-23 14:26:53.178 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:26:53.178 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:26:53.180 -03:00 [INF] Request finished GET /api/health - 404 in 1.2360ms
2025-08-23 14:26:53.607 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 428.7290ms
2025-08-23 14:26:54.837 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:26:55.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 208.0830ms
2025-08-23 14:26:55.219 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:26:56.283 -03:00 [INF] Request finished GET /api/chats - 200 in 1063.2810ms
2025-08-23 14:27:10.045 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:27:10.316 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 272.2070ms
2025-08-23 14:27:11.099 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:27:12.366 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:27:12.651 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:27:17.186 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 14:27:18.719 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 14:27:19.008 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 14:27:21.263 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 14:27:22.450 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 14:27:22.728 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 14:27:24.861 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:27:25.020 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.5420ms
2025-08-23 14:27:25.801 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 14:27:26.946 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 14:27:27.264 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 14:27:40.268 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:27:40.566 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 298.7170ms
2025-08-23 14:27:55.656 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:27:55.839 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 182.5450ms
2025-08-23 14:28:10.277 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:28:10.440 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.6360ms
2025-08-23 14:28:26.134 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:28:26.332 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.5040ms
2025-08-23 14:28:40.324 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:28:40.522 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.0630ms
2025-08-23 14:28:55.288 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:28:55.459 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.0690ms
2025-08-23 14:29:10.266 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:29:10.430 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.4190ms
2025-08-23 14:29:25.517 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:29:25.672 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.3770ms
2025-08-23 14:29:40.280 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:29:40.502 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 218.4810ms
2025-08-23 14:29:55.291 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:29:55.453 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.9820ms
2025-08-23 14:30:10.292 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:30:10.461 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.0610ms
2025-08-23 14:30:25.289 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:30:25.449 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.3390ms
2025-08-23 14:30:40.676 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:30:40.930 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 254.4690ms
2025-08-23 14:30:46.298 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:30:47.605 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:30:47.836 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:30:47.898 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:30:48.308 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:30:48.977 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:30:49.252 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:30:49.462 -03:00 [ERR] Erro ao processar mensagem recebida: 39256655450247
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 487
2025-08-23 14:30:55.474 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:30:55.653 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.5990ms
2025-08-23 14:30:58.570 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:31:00.364 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:31:00.645 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:31:10.413 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:31:10.577 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.1720ms
2025-08-23 14:31:25.410 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:31:25.587 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 175.7670ms
2025-08-23 14:31:40.395 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:31:40.752 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 339.5590ms
2025-08-23 14:31:55.419 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:31:55.588 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.7200ms
2025-08-23 14:32:10.423 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:32:10.588 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.5280ms
2025-08-23 14:32:25.488 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:32:25.655 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.4740ms
2025-08-23 14:32:33.805 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:32:35.151 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:32:35.495 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:32:40.641 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:32:40.794 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.0430ms
2025-08-23 14:32:55.418 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:32:55.577 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.1500ms
2025-08-23 14:33:10.433 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:33:10.586 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.4870ms
2025-08-23 14:33:25.684 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:33:25.847 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.8540ms
2025-08-23 14:33:40.641 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:33:40.800 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.9570ms
2025-08-23 14:33:55.645 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:33:55.806 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.7270ms
2025-08-23 14:34:10.647 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:34:10.809 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.2450ms
2025-08-23 14:34:25.656 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:34:25.811 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.0050ms
2025-08-23 14:34:40.663 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:34:40.826 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.1660ms
2025-08-23 14:34:55.666 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:34:55.833 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.4260ms
2025-08-23 14:35:03.614 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:35:04.872 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:35:05.150 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:35:10.665 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:35:10.824 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.2980ms
2025-08-23 14:35:25.659 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:35:25.785 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:35:25.814 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.3080ms
2025-08-23 14:35:29.052 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:35:29.333 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:35:39.486 -03:00 [INF] Request finished GET /whatsappHub - 101 in 2249327.4060ms
2025-08-23 14:35:39.505 -03:00 [INF] Request finished GET /whatsappHub - 101 in 2249253.4700ms
2025-08-23 14:35:40.682 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:35:40.838 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.7220ms
2025-08-23 14:35:55.680 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:35:55.826 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8450ms
2025-08-23 14:36:11.215 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:36:11.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 201.4910ms
2025-08-23 14:36:25.879 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:36:26.132 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 251.9630ms
2025-08-23 14:36:41.104 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:36:41.264 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.1580ms
2025-08-23 14:36:56.091 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:36:56.248 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3040ms
2025-08-23 14:37:04.653 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 14:37:05.888 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 14:37:06.164 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 14:37:11.471 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:37:11.640 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.5610ms
2025-08-23 14:37:26.079 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:37:26.223 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5920ms
2025-08-23 14:37:41.942 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:37:42.182 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 240.0060ms
2025-08-23 14:37:56.158 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:37:56.332 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 173.6090ms
2025-08-23 14:38:11.133 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:38:11.293 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.4010ms
2025-08-23 14:38:26.172 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:38:26.458 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 286.1610ms
2025-08-23 14:38:41.123 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:38:41.390 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 266.8170ms
2025-08-23 14:38:47.044 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:38:47.046 -03:00 [INF] Request finished GET /api/health - 404 in 1.7810ms
2025-08-23 14:38:56.124 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:38:56.269 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8010ms
2025-08-23 14:39:08.108 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:39:08.861 -03:00 [INF] Request finished GET /api/chats - 200 in 752.8660ms
2025-08-23 14:39:11.132 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:39:11.272 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6040ms
2025-08-23 14:39:26.182 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:39:26.332 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.0810ms
2025-08-23 14:39:41.519 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:39:41.953 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 433.5920ms
2025-08-23 14:39:56.720 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:39:57.144 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 420.1370ms
2025-08-23 14:40:11.561 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:40:11.745 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.2410ms
2025-08-23 14:40:26.495 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:40:26.646 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.5920ms
2025-08-23 14:40:41.463 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:40:41.701 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 234.8470ms
2025-08-23 14:40:56.512 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:40:56.666 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4720ms
2025-08-23 14:41:11.575 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:41:11.747 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.1300ms
2025-08-23 14:41:26.481 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:41:26.626 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4820ms
2025-08-23 14:41:41.495 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:41:41.635 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5820ms
2025-08-23 14:41:56.486 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:41:56.630 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0910ms
2025-08-23 14:42:11.530 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:42:11.681 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2670ms
2025-08-23 14:42:26.507 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:42:26.648 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1890ms
2025-08-23 14:42:41.504 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:42:41.652 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3140ms
2025-08-23 14:42:56.507 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:42:56.650 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1680ms
2025-08-23 14:43:11.533 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:43:11.688 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1160ms
2025-08-23 14:43:26.516 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:43:26.661 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7750ms
2025-08-23 14:43:42.343 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:43:42.510 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.2050ms
2025-08-23 14:43:57.297 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:43:57.451 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.7800ms
2025-08-23 14:44:01.366 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511956069922 -> 5511949908369
2025-08-23 14:44:03.639 -03:00 [INF] 📝 ChatLog atualizado para 5511956069922: "77fcbf2f-dfde-4837-b9c6-3c805cdb6b94"
2025-08-23 14:44:03.970 -03:00 [INF] 📨 Chat criado/atualizado para 5511956069922: "bacbd815-2e30-41c9-8259-425c0276b469"
2025-08-23 14:44:11.841 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:44:11.988 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3880ms
2025-08-23 14:44:26.829 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:44:26.992 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.9700ms
2025-08-23 14:44:41.877 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:44:42.022 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8520ms
2025-08-23 14:44:57.242 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:44:57.414 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.9600ms
2025-08-23 14:45:11.843 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:45:11.988 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2230ms
2025-08-23 14:45:26.845 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:45:26.996 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3580ms
2025-08-23 14:45:42.322 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:45:42.478 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.6250ms
2025-08-23 14:45:56.915 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:45:57.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9360ms
2025-08-23 14:46:11.949 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:46:12.104 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.7350ms
2025-08-23 14:46:26.909 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:46:27.047 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.0110ms
2025-08-23 14:46:41.961 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:46:42.155 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 194.2900ms
2025-08-23 14:46:56.988 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:46:57.159 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.7640ms
2025-08-23 14:47:00.975 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:00.975 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:47:00.979 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:47:00.989 -03:00 [INF] Request finished GET /api/health - 404 in 9.9600ms
2025-08-23 14:47:01.090 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:47:01.099 -03:00 [INF] Request finished GET /api/health - 404 in 8.9490ms
2025-08-23 14:47:01.128 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 14:47:01.128 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 14:47:01.186 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 57.8490ms
2025-08-23 14:47:01.186 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 57.8280ms
2025-08-23 14:47:01.201 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 14:47:01.265 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 14:47:01.895 -03:00 [INF] Request finished GET /api/chats - 200 in 919.5400ms
2025-08-23 14:47:02.654 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1679.1100ms
2025-08-23 14:47:02.659 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:02.916 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:47:03.071 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 411.7550ms
2025-08-23 14:47:03.087 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:03.743 -03:00 [INF] Request finished GET /api/chats - 200 in 785.7740ms
2025-08-23 14:47:07.178 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 4090.7460ms
2025-08-23 14:47:07.185 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:07.608 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 423.1750ms
2025-08-23 14:47:07.613 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:08.040 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 427.3580ms
2025-08-23 14:47:08.048 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:47:08.479 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 430.9480ms
2025-08-23 14:47:11.995 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:47:12.144 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4220ms
2025-08-23 14:47:27.338 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:47:27.506 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.4230ms
2025-08-23 14:47:42.211 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:47:42.388 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.8650ms
2025-08-23 14:47:46.407 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 14:47:46.713 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 305.7950ms
2025-08-23 14:47:58.179 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:47:58.716 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 534.2050ms
2025-08-23 14:48:08.689 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:48:08.689 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:48:08.675 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:48:08.779 -03:00 [INF] Request finished GET /api/health - 404 in 104.1200ms
2025-08-23 14:48:09.528 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 852.2540ms
2025-08-23 14:48:09.834 -03:00 [INF] Request finished GET /api/chats - 200 in 1144.6350ms
2025-08-23 14:48:12.422 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:48:12.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 293.3060ms
2025-08-23 14:48:27.428 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:48:28.342 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 910.8410ms
2025-08-23 14:48:28.439 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:48:28.439 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:48:28.476 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:48:28.493 -03:00 [INF] Request finished GET /api/health - 404 in 16.8510ms
2025-08-23 14:48:29.043 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 603.2570ms
2025-08-23 14:48:29.358 -03:00 [INF] Request finished GET /api/chats - 200 in 918.9020ms
2025-08-23 14:48:42.291 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:48:42.454 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.1530ms
2025-08-23 14:48:52.733 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:48:52.733 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:48:52.733 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:48:52.736 -03:00 [INF] Request finished GET /api/health - 404 in 2.7150ms
2025-08-23 14:48:53.171 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 437.7350ms
2025-08-23 14:48:53.441 -03:00 [INF] Request finished GET /api/chats - 200 in 708.2480ms
2025-08-23 14:48:59.298 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:48:59.936 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 637.7610ms
2025-08-23 14:49:12.415 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:49:12.566 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.8760ms
2025-08-23 14:49:27.384 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:49:27.547 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.0380ms
2025-08-23 14:49:42.389 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:49:42.532 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2660ms
2025-08-23 14:49:57.532 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:49:57.728 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.6900ms
2025-08-23 14:50:12.423 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:50:12.610 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.8250ms
2025-08-23 14:50:27.454 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:50:27.608 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.7990ms
2025-08-23 14:50:42.504 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:50:42.662 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.4050ms
2025-08-23 14:50:52.375 -03:00 [INF] Request finished GET /whatsappHub - 101 in 231109.9550ms
2025-08-23 14:50:52.373 -03:00 [INF] Request finished GET /whatsappHub - 101 in 231168.7910ms
2025-08-23 14:50:57.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:50:57.843 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 240.8820ms
2025-08-23 14:51:03.023 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:03.023 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:51:03.023 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:51:03.037 -03:00 [INF] Request finished GET /api/health - 404 in 12.5260ms
2025-08-23 14:51:03.060 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:51:03.060 -03:00 [INF] Request finished GET /api/health - 404 in 0.4500ms
2025-08-23 14:51:03.251 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 14:51:03.252 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 14:51:03.273 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 21.1240ms
2025-08-23 14:51:03.274 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 22.4000ms
2025-08-23 14:51:03.332 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 14:51:03.406 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 14:51:03.683 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 659.4800ms
2025-08-23 14:51:03.684 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:03.967 -03:00 [INF] Request finished GET /api/chats - 200 in 944.0030ms
2025-08-23 14:51:04.092 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 407.8030ms
2025-08-23 14:51:04.098 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:04.517 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 419.1010ms
2025-08-23 14:51:04.519 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:04.920 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 401.4390ms
2025-08-23 14:51:04.923 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:05.330 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 407.1470ms
2025-08-23 14:51:05.332 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:05.740 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 408.5150ms
2025-08-23 14:51:12.480 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:51:12.627 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.7350ms
2025-08-23 14:51:27.600 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:51:27.765 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.1270ms
2025-08-23 14:51:35.500 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:51:35.500 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:51:35.561 -03:00 [INF] Request finished GET /api/health - 404 in 60.5640ms
2025-08-23 14:51:35.500 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:51:36.043 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 542.5850ms
2025-08-23 14:51:36.363 -03:00 [INF] Request finished GET /api/chats - 200 in 862.0750ms
2025-08-23 14:51:42.720 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:51:42.863 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6090ms
2025-08-23 14:51:58.878 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:51:59.109 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 230.7790ms
2025-08-23 14:52:12.673 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:52:12.828 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.2920ms
2025-08-23 14:52:25.567 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:52:25.568 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:52:25.568 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:52:25.594 -03:00 [INF] Request finished GET /api/health - 404 in 26.2070ms
2025-08-23 14:52:26.299 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 730.6770ms
2025-08-23 14:52:26.564 -03:00 [INF] Request finished GET /api/chats - 200 in 997.9270ms
2025-08-23 14:52:27.733 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:52:27.930 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.0650ms
2025-08-23 14:52:42.937 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:52:43.321 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 379.8290ms
2025-08-23 14:52:49.292 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:52:49.292 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:52:49.299 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:52:49.331 -03:00 [INF] Request finished GET /api/health - 404 in 35.1320ms
2025-08-23 14:52:49.794 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 494.7890ms
2025-08-23 14:52:50.085 -03:00 [INF] Request finished GET /api/chats - 200 in 792.8990ms
2025-08-23 14:52:57.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:52:57.891 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.2860ms
2025-08-23 14:53:13.399 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:53:13.547 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.2930ms
2025-08-23 14:53:21.229 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:53:21.229 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:53:21.227 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:53:21.233 -03:00 [INF] Request finished GET /api/health - 404 in 5.9450ms
2025-08-23 14:53:21.678 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 452.4300ms
2025-08-23 14:53:21.945 -03:00 [INF] Request finished GET /api/chats - 200 in 719.7560ms
2025-08-23 14:53:25.207 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:53:25.207 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:53:25.217 -03:00 [INF] Request finished GET /api/health - 404 in 9.7320ms
2025-08-23 14:53:25.739 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 529.1310ms
2025-08-23 14:53:29.542 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:53:29.786 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 244.3770ms
2025-08-23 14:53:43.942 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:53:44.426 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 481.9670ms
2025-08-23 14:53:58.578 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:53:58.778 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 199.7040ms
2025-08-23 14:54:13.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:54:13.794 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.1480ms
2025-08-23 14:54:28.505 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:54:28.690 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.1070ms
2025-08-23 14:54:43.491 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:54:43.644 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.7240ms
2025-08-23 14:54:58.491 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:54:58.630 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7000ms
2025-08-23 14:55:13.521 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:55:13.666 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0690ms
2025-08-23 14:55:29.481 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:55:29.945 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 463.4060ms
2025-08-23 14:55:43.545 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:55:43.690 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.4760ms
2025-08-23 14:55:58.557 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:55:58.695 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2080ms
2025-08-23 14:56:13.554 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:56:13.700 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1710ms
2025-08-23 14:56:28.639 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:56:28.871 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 232.5720ms
2025-08-23 14:56:31.230 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:31.230 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:56:31.230 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:56:31.238 -03:00 [INF] Request finished GET /api/health - 404 in 8.3990ms
2025-08-23 14:56:31.667 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 437.2390ms
2025-08-23 14:56:31.945 -03:00 [INF] Request finished GET /api/chats - 200 in 715.6870ms
2025-08-23 14:56:42.594 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:56:42.593 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:56:42.594 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:42.635 -03:00 [INF] Request finished GET /api/health - 404 in 41.0950ms
2025-08-23 14:56:42.680 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:56:42.680 -03:00 [INF] Request finished GET /api/health - 404 in 0.2810ms
2025-08-23 14:56:42.911 -03:00 [INF] Request finished GET /whatsappHub - 101 in 339578.8230ms
2025-08-23 14:56:43.527 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 921.2490ms
2025-08-23 14:56:44.138 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:44.681 -03:00 [INF] Request finished GET /api/chats - 200 in 2086.2940ms
2025-08-23 14:56:44.925 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:56:45.071 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7050ms
2025-08-23 14:56:45.214 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1076.1200ms
2025-08-23 14:56:45.219 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:45.629 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 409.2670ms
2025-08-23 14:56:45.631 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:46.045 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 413.4490ms
2025-08-23 14:56:46.048 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:46.717 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 668.1920ms
2025-08-23 14:56:46.740 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:47.167 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 426.7560ms
2025-08-23 14:56:53.235 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:56:53.235 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:56:53.235 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:56:53.247 -03:00 [INF] Request finished GET /api/health - 404 in 12.4980ms
2025-08-23 14:56:53.693 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 457.8170ms
2025-08-23 14:56:53.955 -03:00 [INF] Request finished GET /api/chats - 200 in 720.1690ms
2025-08-23 14:56:59.155 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:56:59.309 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.6410ms
2025-08-23 14:57:14.338 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:57:14.494 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.7810ms
2025-08-23 14:57:29.206 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:57:30.462 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1223.8280ms
2025-08-23 14:57:34.353 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:57:34.353 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:57:34.353 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:57:34.387 -03:00 [INF] Request finished GET /api/health - 404 in 27.5250ms
2025-08-23 14:57:34.876 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 522.7880ms
2025-08-23 14:57:35.161 -03:00 [INF] Request finished GET /api/chats - 200 in 807.6720ms
2025-08-23 14:57:44.775 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:57:44.944 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.4660ms
2025-08-23 14:57:59.408 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:57:59.691 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 283.2340ms
2025-08-23 14:58:15.090 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:58:15.394 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 302.7970ms
2025-08-23 14:58:31.712 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 14:58:31.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:58:31.991 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.3890ms
2025-08-23 14:58:32.243 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 531.0350ms
2025-08-23 14:58:44.541 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:58:44.706 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.4820ms
2025-08-23 14:58:50.062 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:58:50.062 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:58:50.062 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:58:50.085 -03:00 [INF] Request finished GET /api/health - 404 in 22.7400ms
2025-08-23 14:58:50.639 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 577.2910ms
2025-08-23 14:58:50.934 -03:00 [INF] Request finished GET /api/chats - 200 in 871.3850ms
2025-08-23 14:58:59.542 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:58:59.701 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.8000ms
2025-08-23 14:59:04.854 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 14:59:04.854 -03:00 [INF] Request starting GET /api/chats
2025-08-23 14:59:04.856 -03:00 [INF] Request starting GET /api/health
2025-08-23 14:59:04.864 -03:00 [INF] Request finished GET /api/health - 404 in 7.5810ms
2025-08-23 14:59:05.522 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 667.5820ms
2025-08-23 14:59:05.802 -03:00 [INF] Request finished GET /api/chats - 200 in 947.9270ms
2025-08-23 14:59:14.543 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:59:14.689 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4650ms
2025-08-23 14:59:29.539 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:59:29.687 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.4700ms
2025-08-23 14:59:44.632 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 14:59:44.809 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.9420ms
2025-08-23 15:00:00.814 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:00:01.249 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 434.0800ms
2025-08-23 15:00:03.036 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:00:03.038 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:00:03.053 -03:00 [INF] Request finished GET /api/health - 404 in 9.1570ms
2025-08-23 15:00:03.076 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:00:03.679 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 603.2250ms
2025-08-23 15:00:04.044 -03:00 [INF] Request finished GET /api/chats - 200 in 1006.8520ms
2025-08-23 15:00:11.735 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:00:11.735 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:00:11.735 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:00:11.737 -03:00 [INF] Request finished GET /api/health - 404 in 2.4350ms
2025-08-23 15:00:12.436 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 701.7340ms
2025-08-23 15:00:12.708 -03:00 [INF] Request finished GET /api/chats - 200 in 973.8620ms
2025-08-23 15:00:14.663 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:00:14.906 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 242.9510ms
2025-08-23 15:00:30.237 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:00:30.435 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 198.2030ms
2025-08-23 15:00:45.063 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:00:45.248 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.2740ms
2025-08-23 15:01:00.001 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:01:00.208 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 206.0890ms
2025-08-23 15:01:16.825 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:01:17.434 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 609.8680ms
2025-08-23 15:01:29.949 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:01:30.128 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 178.4260ms
2025-08-23 15:01:45.570 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:01:46.098 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 527.9580ms
2025-08-23 15:01:59.967 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:02:00.131 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.4800ms
2025-08-23 15:02:14.966 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:02:15.134 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.8110ms
2025-08-23 15:02:30.187 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:02:30.460 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 273.5470ms
2025-08-23 15:02:44.538 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:44.538 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:02:44.539 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:02:44.546 -03:00 [INF] Request finished GET /api/health - 404 in 7.1860ms
2025-08-23 15:02:44.564 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:02:44.580 -03:00 [INF] Request finished GET /api/health - 404 in 15.4170ms
2025-08-23 15:02:44.583 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:02:44.585 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:02:44.626 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 42.5340ms
2025-08-23 15:02:44.626 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 40.4020ms
2025-08-23 15:02:44.655 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:02:44.710 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:02:44.993 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:02:45.040 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 501.8050ms
2025-08-23 15:02:45.049 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:45.129 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.2680ms
2025-08-23 15:02:45.307 -03:00 [INF] Request finished GET /api/chats - 200 in 768.8790ms
2025-08-23 15:02:45.462 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 412.8090ms
2025-08-23 15:02:45.467 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:45.931 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 463.4250ms
2025-08-23 15:02:45.933 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:46.380 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 446.1430ms
2025-08-23 15:02:46.421 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:47.060 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 639.2590ms
2025-08-23 15:02:47.067 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:02:47.477 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 410.5610ms
2025-08-23 15:03:00.002 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:03:00.200 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.5180ms
2025-08-23 15:03:01.368 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:03:01.368 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:03:01.368 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:03:01.375 -03:00 [INF] Request finished GET /api/health - 404 in 3.5400ms
2025-08-23 15:03:01.818 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 449.6690ms
2025-08-23 15:03:02.101 -03:00 [INF] Request finished GET /api/chats - 200 in 732.3000ms
2025-08-23 15:03:15.009 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:03:15.161 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.7340ms
2025-08-23 15:03:29.993 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:03:30.144 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2310ms
2025-08-23 15:03:45.135 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:03:45.285 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8840ms
2025-08-23 15:04:00.599 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:04:00.820 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 221.0160ms
2025-08-23 15:04:16.782 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:04:16.961 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.4750ms
2025-08-23 15:04:30.363 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:04:30.501 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.5120ms
2025-08-23 15:04:45.528 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:04:45.695 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.3550ms
2025-08-23 15:05:00.398 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:05:00.544 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2210ms
2025-08-23 15:05:15.490 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:05:15.641 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.8200ms
2025-08-23 15:05:30.417 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:05:30.565 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9790ms
2025-08-23 15:05:45.704 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:05:45.868 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.4190ms
2025-08-23 15:06:00.602 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:06:00.829 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 226.3380ms
2025-08-23 15:06:04.157 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:06:04.161 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:06:04.160 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:04.194 -03:00 [INF] Request finished GET /api/health - 404 in 29.9430ms
2025-08-23 15:06:04.263 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:06:04.263 -03:00 [INF] Request finished GET /api/health - 404 in 0.2160ms
2025-08-23 15:06:04.375 -03:00 [INF] Request finished GET /whatsappHub - 101 in 199664.7720ms
2025-08-23 15:06:04.799 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 638.6780ms
2025-08-23 15:06:04.818 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:05.101 -03:00 [INF] Request finished GET /api/chats - 200 in 946.4470ms
2025-08-23 15:06:05.130 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:06:05.298 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 480.5900ms
2025-08-23 15:06:05.342 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:05.793 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 448.5500ms
2025-08-23 15:06:05.824 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:05.997 -03:00 [INF] Request finished GET /api/chats - 200 in 867.3300ms
2025-08-23 15:06:06.244 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 414.0820ms
2025-08-23 15:06:06.248 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:06.660 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 411.5130ms
2025-08-23 15:06:06.671 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:06:07.087 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 416.0220ms
2025-08-23 15:06:17.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:06:17.903 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.1200ms
2025-08-23 15:06:32.426 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:06:32.607 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 181.4850ms
2025-08-23 15:06:35.044 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 15:06:35.460 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 416.1380ms
2025-08-23 15:06:47.393 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:06:47.535 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4680ms
2025-08-23 15:07:02.494 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:07:02.661 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.9120ms
2025-08-23 15:07:17.489 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:07:17.636 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.8780ms
2025-08-23 15:07:32.528 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:07:32.743 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 210.6590ms
2025-08-23 15:07:47.509 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:07:47.652 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6040ms
2025-08-23 15:08:02.500 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:08:02.647 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0380ms
2025-08-23 15:08:17.493 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:08:17.632 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7040ms
2025-08-23 15:08:32.646 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:08:33.023 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 377.7330ms
2025-08-23 15:08:47.569 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:08:47.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0930ms
2025-08-23 15:09:02.694 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:09:03.009 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 315.5220ms
2025-08-23 15:09:18.250 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:09:18.464 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 212.6580ms
2025-08-23 15:09:32.778 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:09:32.953 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.8920ms
2025-08-23 15:09:35.956 -03:00 [INF] Request starting GET /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/messages
2025-08-23 15:09:36.012 -03:00 [INF] Request starting POST /api/attendances/4966894c-b7da-4690-b835-eecf7fa76c9b/assign
2025-08-23 15:09:36.999 -03:00 [INF] Request starting POST /api/attendances/4966894c-b7da-4690-b835-eecf7fa76c9b/assign
2025-08-23 15:09:37.010 -03:00 [INF] Request finished GET /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/messages - 404 in 1053.5360ms
2025-08-23 15:09:37.016 -03:00 [INF] Request starting GET /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/messages
2025-08-23 15:09:39.316 -03:00 [ERR] An unhandled exception has occurred while executing the request.
Microsoft.EntityFrameworkCore.DbUpdateConcurrencyException: The database operation was expected to affect 1 row(s), but actually affected 0 row(s); data may have been modified or deleted since entities were loaded. See https://go.microsoft.com/fwlink/?LinkId=527962 for information on understanding and handling optimistic concurrency exceptions.
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ThrowAggregateUpdateConcurrencyExceptionAsync(RelationalDataReader reader, Int32 commandIndex, Int32 expectedRowsAffected, Int32 rowsAffected, CancellationToken cancellationToken)
   at Pomelo.EntityFrameworkCore.MySql.Update.Internal.MySqlModificationCommandBatch.ConsumeResultSetAsync(Int32 startCommandIndex, RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.AffectedCountModificationCommandBatch.ConsumeAsync(RelationalDataReader reader, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.AttendanceService.AssignAsync(Guid chatId, String operatorId, String operatorName, Guid chatLogId) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/AttendanceService.cs:line 49
   at Pregiato.API.Controllers.AttendancesController.Assign(Guid chatId, AssignRequest req) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Controllers/AttendancesController.cs:line 35
   at Microsoft.AspNetCore.Mvc.Infrastructure.ActionMethodExecutor.TaskOfIActionResultExecutor.Execute(ActionContext actionContext, IActionResultTypeMapper mapper, ObjectMethodExecutor executor, Object controller, Object[] arguments)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeActionMethodAsync>g__Awaited|12_0(ControllerActionInvoker invoker, ValueTask`1 actionResultValueTask)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeNextActionFilterAsync>g__Awaited|10_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Rethrow(ActionExecutedContextSealed context)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.<InvokeInnerFilterAsync>g__Awaited|13_0(ControllerActionInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 15:09:39.422 -03:00 [INF] Request finished POST /api/attendances/4966894c-b7da-4690-b835-eecf7fa76c9b/assign - 200 in 3394.7570ms
2025-08-23 15:09:39.567 -03:00 [INF] Request finished GET /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/messages - 404 in 2551.2570ms
2025-08-23 15:09:49.679 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:09:51.168 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1465.9480ms
2025-08-23 15:10:03.377 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:10:04.251 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 874.2100ms
2025-08-23 15:10:06.615 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:10:06.615 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:10:06.616 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:10:06.915 -03:00 [INF] Request finished GET /api/health - 404 in 297.0110ms
2025-08-23 15:10:07.465 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 851.1140ms
2025-08-23 15:10:07.771 -03:00 [INF] Request finished GET /api/chats - 200 in 1154.5530ms
2025-08-23 15:10:18.365 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:10:18.600 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 231.0380ms
2025-08-23 15:10:23.862 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:10:23.862 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:10:23.862 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:10:23.865 -03:00 [INF] Request finished GET /api/health - 404 in 3.5190ms
2025-08-23 15:10:24.404 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 541.6870ms
2025-08-23 15:10:25.628 -03:00 [INF] Request finished GET /api/chats - 200 in 1766.0210ms
2025-08-23 15:10:33.282 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:10:33.777 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 494.1760ms
2025-08-23 15:10:51.255 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:10:52.615 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1359.8730ms
2025-08-23 15:11:03.613 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:11:03.766 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.0330ms
2025-08-23 15:11:18.564 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:11:18.716 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.8490ms
2025-08-23 15:11:33.557 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:11:33.712 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.7140ms
2025-08-23 15:11:48.659 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:11:48.985 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 324.3310ms
2025-08-23 15:11:51.917 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:11:51.917 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:11:51.917 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:11:51.933 -03:00 [INF] Request finished GET /api/health - 404 in 10.1170ms
2025-08-23 15:11:54.102 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2184.9890ms
2025-08-23 15:11:54.740 -03:00 [INF] Request starting POST /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/send
2025-08-23 15:11:54.745 -03:00 [INF] Request finished POST /api/chats/4966894c-b7da-4690-b835-eecf7fa76c9b/send - 404 in 5.6060ms
2025-08-23 15:11:54.793 -03:00 [INF] Request finished GET /api/chats - 200 in 2876.0400ms
2025-08-23 15:12:03.610 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:12:03.778 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.0250ms
2025-08-23 15:12:04.928 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:12:04.933 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:12:04.933 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:12:04.951 -03:00 [INF] Request finished GET /api/health - 404 in 23.1810ms
2025-08-23 15:12:05.400 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 472.4330ms
2025-08-23 15:12:05.671 -03:00 [INF] Request finished GET /api/chats - 200 in 743.7590ms
2025-08-23 15:12:18.612 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:12:18.772 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.6830ms
2025-08-23 15:12:33.967 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:12:34.252 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 283.0580ms
2025-08-23 15:12:49.055 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:12:49.200 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7740ms
2025-08-23 15:13:03.054 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:03.054 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:13:03.055 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:13:03.068 -03:00 [INF] Request finished GET /api/health - 404 in 12.5360ms
2025-08-23 15:13:03.666 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 611.7820ms
2025-08-23 15:13:03.825 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:13:03.929 -03:00 [INF] Request finished GET /api/chats - 200 in 875.0830ms
2025-08-23 15:13:03.967 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7070ms
2025-08-23 15:13:08.504 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:13:08.504 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:08.510 -03:00 [INF] Request finished GET /api/health - 404 in 4.4370ms
2025-08-23 15:13:08.969 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 465.2760ms
2025-08-23 15:13:19.047 -03:00 [INF] Request finished GET /whatsappHub - 101 in 634384.8110ms
2025-08-23 15:13:19.047 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1335633.9030ms
2025-08-23 15:13:19.122 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:13:19.443 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 321.0800ms
2025-08-23 15:13:23.393 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:13:23.393 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:13:23.393 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:23.395 -03:00 [INF] Request finished GET /api/health - 404 in 2.2210ms
2025-08-23 15:13:23.402 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:13:23.402 -03:00 [INF] Request finished GET /api/health - 404 in 0.4290ms
2025-08-23 15:13:23.672 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:13:23.691 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:13:23.720 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 28.5140ms
2025-08-23 15:13:23.720 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 48.0510ms
2025-08-23 15:13:23.731 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:13:23.837 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:13:24.012 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 618.3230ms
2025-08-23 15:13:24.016 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:24.368 -03:00 [INF] Request finished GET /api/chats - 200 in 974.7270ms
2025-08-23 15:13:24.412 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:13:24.625 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 15:13:24.635 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 619.0610ms
2025-08-23 15:13:24.637 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:25.069 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 443.7520ms
2025-08-23 15:13:25.186 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 549.2140ms
2025-08-23 15:13:25.247 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:25.312 -03:00 [INF] Request finished GET /api/chats - 200 in 898.1930ms
2025-08-23 15:13:25.662 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 415.7060ms
2025-08-23 15:13:25.668 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:26.069 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 401.8710ms
2025-08-23 15:13:26.078 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:13:26.502 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 424.3500ms
2025-08-23 15:13:34.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:13:34.226 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.5040ms
2025-08-23 15:13:51.951 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:13:52.218 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 267.2770ms
2025-08-23 15:14:05.212 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:14:05.372 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.7060ms
2025-08-23 15:14:19.836 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:14:20.459 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 623.1760ms
2025-08-23 15:14:29.689 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:14:29.688 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:14:29.904 -03:00 [INF] Request finished GET /api/health - 404 in 215.5680ms
2025-08-23 15:14:29.688 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:14:33.344 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 3656.4630ms
2025-08-23 15:14:33.662 -03:00 [INF] Request finished GET /api/chats - 200 in 3974.6970ms
2025-08-23 15:14:34.312 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:14:34.466 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4540ms
2025-08-23 15:14:47.860 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:14:47.860 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:14:47.860 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:14:47.864 -03:00 [INF] Request finished GET /api/health - 404 in 4.0880ms
2025-08-23 15:14:48.542 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 681.6490ms
2025-08-23 15:14:48.901 -03:00 [INF] Request finished GET /api/chats - 200 in 1041.2500ms
2025-08-23 15:14:49.386 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:14:49.530 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0300ms
2025-08-23 15:15:04.441 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:15:04.637 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 196.4940ms
2025-08-23 15:15:19.938 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:15:20.358 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 418.3960ms
2025-08-23 15:15:34.503 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:15:34.714 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 210.2840ms
2025-08-23 15:15:39.357 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:15:39.357 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:15:39.358 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:15:39.363 -03:00 [INF] Request finished GET /api/health - 404 in 5.5760ms
2025-08-23 15:15:39.807 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 450.4520ms
2025-08-23 15:15:40.087 -03:00 [INF] Request finished GET /api/chats - 200 in 729.7150ms
2025-08-23 15:15:49.342 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:15:49.483 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9210ms
2025-08-23 15:16:04.352 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:16:04.507 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1420ms
2025-08-23 15:16:19.386 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:16:19.536 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.7220ms
2025-08-23 15:16:34.485 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:16:34.636 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.9300ms
2025-08-23 15:16:49.533 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:16:49.902 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 368.7330ms
2025-08-23 15:17:04.378 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:17:04.533 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.0660ms
2025-08-23 15:17:19.691 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:17:19.876 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.4590ms
2025-08-23 15:17:34.479 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:17:34.641 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.6900ms
2025-08-23 15:17:38.460 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363172556943876 -> 5511949908369
2025-08-23 15:17:41.751 -03:00 [ERR] Failed executing DbCommand (147ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:17:41.938 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:17:41.952 -03:00 [ERR] Erro ao processar mensagem recebida: 120363172556943876
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:17:49.791 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:17:49.966 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.5860ms
2025-08-23 15:18:04.715 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:18:04.858 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6720ms
2025-08-23 15:18:19.705 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:18:19.889 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 184.3640ms
2025-08-23 15:18:34.709 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:18:34.849 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9760ms
2025-08-23 15:18:49.753 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:18:49.900 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8630ms
2025-08-23 15:19:04.744 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:19:04.898 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.3390ms
2025-08-23 15:19:19.759 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:19:20.371 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 611.4740ms
2025-08-23 15:19:34.746 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:19:34.889 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5370ms
2025-08-23 15:19:49.905 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:19:50.057 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.4730ms
2025-08-23 15:20:04.774 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:20:05.028 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 250.5530ms
2025-08-23 15:20:19.836 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:20:20.062 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 225.5350ms
2025-08-23 15:20:35.581 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:20:36.230 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 647.7680ms
2025-08-23 15:20:49.871 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:20:50.015 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2330ms
2025-08-23 15:21:01.333 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 15:21:03.609 -03:00 [ERR] Failed executing DbCommand (177ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:21:03.845 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:21:03.976 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:21:06.054 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:21:06.229 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.7600ms
2025-08-23 15:21:19.914 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:21:20.056 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3440ms
2025-08-23 15:21:34.930 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:21:35.072 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5690ms
2025-08-23 15:21:50.049 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:21:50.259 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 210.1570ms
2025-08-23 15:22:04.946 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:22:05.126 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.5960ms
2025-08-23 15:22:19.957 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:22:20.120 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.6180ms
2025-08-23 15:22:35.083 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:22:35.253 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.6800ms
2025-08-23 15:22:50.273 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:22:50.421 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.7980ms
2025-08-23 15:23:06.170 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:23:06.389 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 219.0120ms
2025-08-23 15:23:20.256 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:23:20.398 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3110ms
2025-08-23 15:23:35.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:23:35.420 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1420ms
2025-08-23 15:23:50.801 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:23:51.644 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 842.0490ms
2025-08-23 15:24:05.402 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:24:05.614 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 201.0150ms
2025-08-23 15:24:20.616 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:24:20.831 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 214.2460ms
2025-08-23 15:24:35.621 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:24:35.786 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.2500ms
2025-08-23 15:24:51.064 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:24:51.276 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 211.6010ms
2025-08-23 15:25:05.954 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:25:06.360 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 405.7580ms
2025-08-23 15:25:21.093 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:25:21.437 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 344.4580ms
2025-08-23 15:25:35.954 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:25:36.100 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4020ms
2025-08-23 15:25:51.517 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:25:51.683 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.5190ms
2025-08-23 15:26:03.133 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:26:03.132 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:26:03.133 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:03.141 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 10.3430ms
2025-08-23 15:26:03.142 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 9.8210ms
2025-08-23 15:26:03.192 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:03.193 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:26:03.194 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 1.9420ms
2025-08-23 15:26:03.196 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 2.6520ms
2025-08-23 15:26:03.283 -03:00 [INF] Request finished GET /whatsappHub - 101 in 759446.4620ms
2025-08-23 15:26:04.938 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1808.0020ms
2025-08-23 15:26:05.085 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:26:07.194 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2109.0990ms
2025-08-23 15:26:08.716 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:26:08.874 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.3370ms
2025-08-23 15:26:13.395 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:13.491 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 86.6770ms
2025-08-23 15:26:21.951 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:26:22.476 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 526.0260ms
2025-08-23 15:26:22.972 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:22.973 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.6920ms
2025-08-23 15:26:29.026 -03:00 [INF] Request finished GET /whatsappHub - 101 in 785294.4410ms
2025-08-23 15:26:33.555 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:33.555 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:26:33.555 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:26:33.560 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 4.9330ms
2025-08-23 15:26:33.560 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 4.9580ms
2025-08-23 15:26:33.569 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:33.569 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:26:33.569 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.1140ms
2025-08-23 15:26:33.570 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 0.7410ms
2025-08-23 15:26:34.070 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 515.1970ms
2025-08-23 15:26:34.071 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:26:34.508 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 430.1110ms
2025-08-23 15:26:36.332 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:26:36.542 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 210.5550ms
2025-08-23 15:26:43.532 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:43.536 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 4.6730ms
2025-08-23 15:26:51.187 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:26:51.375 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 187.9670ms
2025-08-23 15:26:53.766 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:26:53.800 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 34.0350ms
2025-08-23 15:27:03.919 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:03.920 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:27:03.984 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 64.7120ms
2025-08-23 15:27:03.985 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 65.7080ms
2025-08-23 15:27:06.229 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:27:06.406 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.9990ms
2025-08-23 15:27:13.357 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:27:13.358 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:13.357 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:27:13.363 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 4.8560ms
2025-08-23 15:27:13.363 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 5.8390ms
2025-08-23 15:27:13.391 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:13.391 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.1620ms
2025-08-23 15:27:13.391 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:27:13.396 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 4.8350ms
2025-08-23 15:27:13.929 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 572.1100ms
2025-08-23 15:27:13.937 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:27:14.363 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 426.2030ms
2025-08-23 15:27:21.177 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:27:21.325 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.2790ms
2025-08-23 15:27:23.062 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:23.063 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.6690ms
2025-08-23 15:27:33.082 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:33.084 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 1.9890ms
2025-08-23 15:27:37.839 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:27:38.000 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.2550ms
2025-08-23 15:27:43.059 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:27:43.060 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 1.0920ms
2025-08-23 15:27:43.066 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:43.068 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 1.8940ms
2025-08-23 15:27:51.352 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:27:51.494 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0320ms
2025-08-23 15:27:53.098 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:27:53.100 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 2.0240ms
2025-08-23 15:28:03.085 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:03.087 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 2.3370ms
2025-08-23 15:28:06.436 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:28:06.617 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.9750ms
2025-08-23 15:28:13.404 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:13.405 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:28:13.477 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 71.1680ms
2025-08-23 15:28:13.477 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 72.1660ms
2025-08-23 15:28:21.381 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:28:21.541 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.9610ms
2025-08-23 15:28:23.072 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:23.075 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 2.5900ms
2025-08-23 15:28:28.817 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363173003902460 -> 5511949908369
2025-08-23 15:28:30.438 -03:00 [ERR] Failed executing DbCommand (178ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:28:30.702 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:28:30.719 -03:00 [ERR] Erro ao processar mensagem recebida: 120363173003902460
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:28:33.240 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:33.248 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 8.4310ms
2025-08-23 15:28:36.364 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:28:36.571 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 207.3900ms
2025-08-23 15:28:43.064 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:28:43.064 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:43.069 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 5.1100ms
2025-08-23 15:28:43.069 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 5.1280ms
2025-08-23 15:28:51.366 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:28:51.507 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6190ms
2025-08-23 15:28:53.057 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:28:53.058 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.8890ms
2025-08-23 15:29:03.080 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:03.085 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 4.6350ms
2025-08-23 15:29:06.361 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:29:06.499 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2570ms
2025-08-23 15:29:13.129 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:29:13.128 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:13.140 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 11.8880ms
2025-08-23 15:29:13.140 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 11.5690ms
2025-08-23 15:29:21.473 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:29:21.677 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 204.3100ms
2025-08-23 15:29:23.065 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:23.073 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 8.1180ms
2025-08-23 15:29:33.205 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:33.220 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 14.7160ms
2025-08-23 15:29:36.370 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:29:36.515 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7130ms
2025-08-23 15:29:43.091 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:43.091 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:29:43.093 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 1.7090ms
2025-08-23 15:29:43.093 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 1.7230ms
2025-08-23 15:29:51.432 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:29:51.585 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.9280ms
2025-08-23 15:29:53.061 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:29:53.062 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.6820ms
2025-08-23 15:30:03.235 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:30:03.240 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 3.8210ms
2025-08-23 15:30:04.891 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:30:04.891 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:04.901 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:30:04.965 -03:00 [INF] Request finished GET /api/health - 404 in 63.1970ms
2025-08-23 15:30:04.978 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:30:04.978 -03:00 [INF] Request finished GET /api/health - 404 in 0.5680ms
2025-08-23 15:30:05.157 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:30:05.158 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:30:05.178 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 20.7070ms
2025-08-23 15:30:05.178 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 19.6130ms
2025-08-23 15:30:05.188 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:30:05.305 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:30:07.034 -03:00 [INF] Request starting GET /api/whatsapp/status
2025-08-23 15:30:07.053 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2161.0720ms
2025-08-23 15:30:07.080 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:07.132 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:30:07.304 -03:00 [INF] Request finished GET /api/whatsapp/status - 200 in 270.2200ms
2025-08-23 15:30:08.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 988.6420ms
2025-08-23 15:30:08.298 -03:00 [INF] Request finished GET /api/chats - 200 in 3406.9080ms
2025-08-23 15:30:08.331 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:30:10.016 -03:00 [INF] Request finished GET /api/chats - 200 in 1685.0910ms
2025-08-23 15:30:10.508 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 3410.6180ms
2025-08-23 15:30:10.915 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:11.765 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 850.2940ms
2025-08-23 15:30:11.859 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:12.270 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 410.3000ms
2025-08-23 15:30:12.273 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:12.682 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 409.8890ms
2025-08-23 15:30:12.686 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:30:13.219 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 532.1930ms
2025-08-23 15:30:22.046 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:30:22.188 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9460ms
2025-08-23 15:30:37.032 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:30:37.183 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.5510ms
2025-08-23 15:30:52.148 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:30:52.312 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.9390ms
2025-08-23 15:31:07.359 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:31:07.672 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 313.2740ms
2025-08-23 15:31:22.288 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:31:22.452 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.6660ms
2025-08-23 15:31:37.251 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:31:37.456 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 204.8620ms
2025-08-23 15:31:47.320 -03:00 [INF] Request finished GET /whatsappHub - 101 in 102124.2210ms
2025-08-23 15:31:50.940 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:31:50.940 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:31:50.947 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 6.3760ms
2025-08-23 15:31:50.946 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 4.8790ms
2025-08-23 15:31:50.940 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:31:50.970 -03:00 [INF] Request starting GET /api/whatsapp/conversations
2025-08-23 15:31:50.970 -03:00 [INF] Request finished GET /api/whatsapp/conversations - 404 in 0.1550ms
2025-08-23 15:31:50.973 -03:00 [INF] Request starting GET /api/whatsapp/queue/metrics
2025-08-23 15:31:50.973 -03:00 [INF] Request finished GET /api/whatsapp/queue/metrics - 404 in 0.2070ms
2025-08-23 15:31:51.561 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 620.3970ms
2025-08-23 15:31:51.584 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:31:52.013 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 427.5280ms
2025-08-23 15:31:52.234 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:31:52.375 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4300ms
2025-08-23 15:31:54.937 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 15:31:56.710 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 15:31:57.069 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 15:32:07.850 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:32:08.026 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 175.2540ms
2025-08-23 15:32:22.701 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:32:22.853 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.1370ms
2025-08-23 15:32:34.740 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511996855601 -> 5511949908369
2025-08-23 15:32:36.341 -03:00 [ERR] Failed executing DbCommand (346ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:32:36.596 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:32:36.657 -03:00 [ERR] Erro ao processar mensagem recebida: 5511996855601
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:32:37.716 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:32:37.860 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.8200ms
2025-08-23 15:32:52.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:32:52.916 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 189.5300ms
2025-08-23 15:33:07.746 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:33:07.930 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 184.3540ms
2025-08-23 15:33:08.300 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 15:33:11.731 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 15:33:12.858 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 15:33:22.709 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:33:22.859 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2690ms
2025-08-23 15:33:38.219 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:33:38.368 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.5860ms
2025-08-23 15:33:43.148 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 39256655450247 -> 5511949908369
2025-08-23 15:33:44.237 -03:00 [INF] 📝 ChatLog atualizado para 39256655450247: "ab751220-fd6e-41b7-a8cf-370344f05fec"
2025-08-23 15:33:44.515 -03:00 [INF] 📨 Chat criado/atualizado para 39256655450247: "6fa491f2-6dbd-4fab-b8e5-118e4c9e89a4"
2025-08-23 15:33:52.918 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:33:53.122 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 204.1200ms
2025-08-23 15:34:07.879 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:34:08.025 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7000ms
2025-08-23 15:34:22.912 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:34:23.062 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1780ms
2025-08-23 15:34:38.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:34:38.234 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.6670ms
2025-08-23 15:34:52.906 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:34:53.047 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8120ms
2025-08-23 15:35:07.892 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:35:08.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.7860ms
2025-08-23 15:35:22.903 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:35:23.045 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5680ms
2025-08-23 15:35:37.904 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:35:38.047 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6590ms
2025-08-23 15:35:52.901 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:35:53.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2480ms
2025-08-23 15:36:07.901 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:36:08.040 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1620ms
2025-08-23 15:36:22.962 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:36:23.109 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3170ms
2025-08-23 15:36:28.533 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 15:36:29.956 -03:00 [ERR] Failed executing DbCommand (148ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:36:30.124 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:36:30.145 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:36:37.915 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:36:38.054 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9410ms
2025-08-23 15:36:45.302 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 15:36:46.279 -03:00 [ERR] Failed executing DbCommand (132ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:36:46.419 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:36:46.425 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:36:52.919 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:36:53.074 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.7830ms
2025-08-23 15:37:08.002 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:37:08.167 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.5460ms
2025-08-23 15:37:23.298 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:37:23.473 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.8690ms
2025-08-23 15:37:37.939 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:37:38.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1430ms
2025-08-23 15:37:53.338 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:37:53.502 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.8380ms
2025-08-23 15:38:07.996 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:38:08.146 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.7220ms
2025-08-23 15:38:23.004 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:38:23.150 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2410ms
2025-08-23 15:38:38.008 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:38:38.663 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 654.6640ms
2025-08-23 15:38:53.017 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:38:53.155 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3930ms
2025-08-23 15:39:08.009 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:39:08.152 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8550ms
2025-08-23 15:39:23.345 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:39:23.498 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.3680ms
2025-08-23 15:39:38.116 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:39:38.267 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5720ms
2025-08-23 15:39:53.075 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:39:53.220 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8500ms
2025-08-23 15:40:08.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:40:08.211 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5280ms
2025-08-23 15:40:23.069 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:40:23.210 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1400ms
2025-08-23 15:40:38.094 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:40:38.434 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 322.5450ms
2025-08-23 15:40:53.350 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:40:53.527 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.3860ms
2025-08-23 15:41:08.096 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:41:08.249 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5240ms
2025-08-23 15:41:23.116 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:41:23.271 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.6550ms
2025-08-23 15:41:38.735 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:41:38.913 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 178.9150ms
2025-08-23 15:41:51.594 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 15:41:53.731 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:41:53.878 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.6570ms
2025-08-23 15:41:57.809 -03:00 [ERR] Failed executing DbCommand (146ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:41:58.043 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:41:58.090 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:42:06.857 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 15:42:08.409 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:42:08.531 -03:00 [ERR] Failed executing DbCommand (137ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 15:42:08.549 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7270ms
2025-08-23 15:42:08.684 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 15:42:08.693 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 15:42:20.499 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:42:20.499 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:42:20.499 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:20.537 -03:00 [INF] Request finished GET /api/health - 404 in 39.3400ms
2025-08-23 15:42:20.559 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:42:20.558 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:42:20.593 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:42:20.595 -03:00 [INF] Request finished GET /api/health - 404 in 2.1660ms
2025-08-23 15:42:20.689 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 129.8610ms
2025-08-23 15:42:20.689 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 130.6930ms
2025-08-23 15:42:20.736 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:42:20.839 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:42:22.072 -03:00 [INF] Request finished GET /api/chats - 200 in 1572.8370ms
2025-08-23 15:42:22.127 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:42:23.840 -03:00 [INF] Request finished GET /api/chats - 200 in 1712.9070ms
2025-08-23 15:42:24.114 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:42:24.224 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 3724.3710ms
2025-08-23 15:42:24.262 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:24.285 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.3350ms
2025-08-23 15:42:26.677 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2414.7180ms
2025-08-23 15:42:28.905 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:29.723 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 817.8030ms
2025-08-23 15:42:29.870 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:31.813 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1943.4900ms
2025-08-23 15:42:31.867 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:32.319 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 451.4820ms
2025-08-23 15:42:32.358 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:42:32.883 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 525.6480ms
2025-08-23 15:42:38.801 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:42:38.957 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3150ms
2025-08-23 15:42:53.830 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:42:54.133 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 301.0400ms
2025-08-23 15:43:08.779 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:43:08.924 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1810ms
2025-08-23 15:43:23.780 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:43:23.929 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4410ms
2025-08-23 15:43:39.024 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:43:39.179 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.5890ms
2025-08-23 15:43:53.937 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:43:54.143 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 206.9450ms
2025-08-23 15:44:08.911 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:44:09.160 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 250.2930ms
2025-08-23 15:44:10.594 -03:00 [INF] Request finished GET /whatsappHub - 101 in 109857.1900ms
2025-08-23 15:44:10.594 -03:00 [INF] Request finished GET /whatsappHub - 101 in 109754.5310ms
2025-08-23 15:44:10.594 -03:00 [INF] Request finished GET /whatsappHub - 101 in 845288.5450ms
2025-08-23 15:44:20.394 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:44:20.394 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:20.394 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:44:20.398 -03:00 [INF] Request finished GET /api/health - 404 in 1.8260ms
2025-08-23 15:44:20.501 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:44:20.523 -03:00 [INF] Request finished GET /api/health - 404 in 22.1670ms
2025-08-23 15:44:20.767 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:44:20.767 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:44:20.964 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 196.9270ms
2025-08-23 15:44:20.964 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 197.0410ms
2025-08-23 15:44:21.027 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:44:21.101 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:44:21.789 -03:00 [INF] Request finished GET /api/chats - 200 in 1395.0380ms
2025-08-23 15:44:21.792 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:44:22.487 -03:00 [INF] Request finished GET /api/chats - 200 in 695.3900ms
2025-08-23 15:44:22.526 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2132.3430ms
2025-08-23 15:44:22.529 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:22.943 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 414.1230ms
2025-08-23 15:44:22.945 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:23.360 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 415.0110ms
2025-08-23 15:44:23.363 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:23.781 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 417.6880ms
2025-08-23 15:44:23.816 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:24.191 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:44:24.406 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 214.2870ms
2025-08-23 15:44:24.513 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 696.7890ms
2025-08-23 15:44:24.532 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:44:24.951 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 419.3780ms
2025-08-23 15:44:39.035 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:44:39.245 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 209.7930ms
2025-08-23 15:44:44.751 -03:00 [INF] Request finished GET /whatsappHub - 101 in 23720.5280ms
2025-08-23 15:44:44.753 -03:00 [INF] Request finished GET /whatsappHub - 101 in 23646.4620ms
2025-08-23 15:44:54.144 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:44:54.450 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 304.5380ms
2025-08-23 15:45:00.692 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:45:00.693 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:00.697 -03:00 [INF] Request finished GET /api/health - 404 in 4.9280ms
2025-08-23 15:45:00.702 -03:00 [INF] Request starting GET /api/health
2025-08-23 15:45:00.703 -03:00 [INF] Request finished GET /api/health - 404 in 0.5500ms
2025-08-23 15:45:00.716 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:45:00.923 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:45:00.927 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:45:00.929 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 5.6280ms
2025-08-23 15:45:00.929 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 2.1880ms
2025-08-23 15:45:00.978 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:45:01.007 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:45:01.235 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 542.1430ms
2025-08-23 15:45:01.251 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:01.563 -03:00 [INF] Request finished GET /api/chats - 200 in 847.5130ms
2025-08-23 15:45:01.611 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:45:01.799 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 548.1370ms
2025-08-23 15:45:01.824 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:02.280 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 455.2510ms
2025-08-23 15:45:02.282 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:02.465 -03:00 [INF] Request finished GET /api/chats - 200 in 854.1320ms
2025-08-23 15:45:02.693 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 410.4790ms
2025-08-23 15:45:02.697 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:03.103 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 406.1130ms
2025-08-23 15:45:03.107 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:03.514 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 407.1440ms
2025-08-23 15:45:08.971 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:45:09.144 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.4590ms
2025-08-23 15:45:23.936 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:45:24.083 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4060ms
2025-08-23 15:45:27.892 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:45:27.892 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:45:27.997 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:45:28.058 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 59.7850ms
2025-08-23 15:45:28.089 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:45:28.774 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 881.9280ms
2025-08-23 15:45:29.051 -03:00 [INF] Request finished GET /api/chats - 200 in 1159.0570ms
2025-08-23 15:45:39.003 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:45:39.184 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.1930ms
2025-08-23 15:45:54.015 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:45:54.197 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 182.3770ms
2025-08-23 15:46:08.995 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:46:09.156 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.2080ms
2025-08-23 15:46:23.984 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:46:24.135 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.7480ms
2025-08-23 15:46:32.281 -03:00 [INF] Request starting GET /api/chats
2025-08-23 15:46:32.281 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 15:46:32.288 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 15:46:32.307 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 18.7930ms
2025-08-23 15:46:32.312 -03:00 [INF] Request finished GET /whatsappHub - 101 in 64222.6390ms
2025-08-23 15:46:32.324 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 15:46:33.298 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1016.2120ms
2025-08-23 15:46:33.583 -03:00 [INF] Request finished GET /api/chats - 200 in 1301.3170ms
2025-08-23 15:46:39.025 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:46:39.305 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 279.7470ms
2025-08-23 15:46:53.964 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:46:54.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.4860ms
2025-08-23 15:47:08.980 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:47:09.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1240ms
2025-08-23 15:47:25.098 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:47:25.283 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.2550ms
2025-08-23 15:47:39.781 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:47:39.974 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 192.3150ms
2025-08-23 15:47:54.567 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:47:54.708 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3560ms
2025-08-23 15:48:09.609 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:48:09.777 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.6310ms
2025-08-23 15:48:24.523 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:48:24.674 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.6880ms
2025-08-23 15:48:40.001 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:48:40.237 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 235.6010ms
2025-08-23 15:48:54.543 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:48:54.725 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 181.2140ms
2025-08-23 15:49:09.877 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:49:10.270 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 393.4810ms
2025-08-23 15:49:24.683 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:49:24.997 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 313.1040ms
2025-08-23 15:49:39.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:49:39.800 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 173.3360ms
2025-08-23 15:49:55.847 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:49:56.020 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.8500ms
2025-08-23 15:50:09.969 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:50:10.166 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.0040ms
2025-08-23 15:50:24.898 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:50:25.039 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8840ms
2025-08-23 15:50:39.902 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:50:40.044 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1580ms
2025-08-23 15:50:54.939 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:50:55.093 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9490ms
2025-08-23 15:51:09.903 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:51:10.047 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3320ms
2025-08-23 15:51:24.930 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:51:25.077 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8750ms
2025-08-23 15:51:39.897 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:51:40.036 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8290ms
2025-08-23 15:51:55.169 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:51:55.381 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 212.2620ms
2025-08-23 15:52:10.042 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:52:10.197 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.5970ms
2025-08-23 15:52:24.926 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:52:25.069 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7300ms
2025-08-23 15:52:40.018 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:52:40.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.6110ms
2025-08-23 15:52:55.469 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:52:55.626 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.8690ms
2025-08-23 15:53:09.935 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:53:10.078 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6720ms
2025-08-23 15:53:25.156 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:53:25.663 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 506.1900ms
2025-08-23 15:53:39.949 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:53:40.088 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5900ms
2025-08-23 15:53:54.955 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:53:55.254 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 299.6930ms
2025-08-23 15:54:10.171 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:54:10.396 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 224.9880ms
2025-08-23 15:54:24.957 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:54:25.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3710ms
2025-08-23 15:54:39.972 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:54:40.124 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.7260ms
2025-08-23 15:54:54.974 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:54:55.114 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2290ms
2025-08-23 15:55:09.986 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:55:10.150 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.5540ms
2025-08-23 15:55:25.231 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:55:25.833 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 602.0130ms
2025-08-23 15:55:40.910 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:55:41.161 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 250.3580ms
2025-08-23 15:55:55.437 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:55:55.600 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.7060ms
2025-08-23 15:56:13.242 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:56:14.242 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1000.1940ms
2025-08-23 15:56:27.256 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:56:27.480 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 223.6700ms
2025-08-23 15:56:42.699 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:56:42.877 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.9780ms
2025-08-23 15:56:55.631 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:56:55.772 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2250ms
2025-08-23 15:57:10.884 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:57:12.859 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1974.5550ms
2025-08-23 15:57:29.676 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:57:30.308 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 632.1860ms
2025-08-23 15:57:41.089 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:57:41.399 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 309.9430ms
2025-08-23 15:57:55.783 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:57:55.947 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.8160ms
2025-08-23 15:58:10.751 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:58:10.967 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 215.8880ms
2025-08-23 15:58:25.739 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:58:25.947 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 205.5500ms
2025-08-23 15:58:40.731 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:58:40.870 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7380ms
2025-08-23 15:59:02.007 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:59:02.159 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.2300ms
2025-08-23 15:59:11.690 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:59:12.177 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 485.6040ms
2025-08-23 15:59:26.701 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:59:26.886 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.1280ms
2025-08-23 15:59:41.646 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:59:41.789 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1080ms
2025-08-23 15:59:58.048 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 15:59:58.692 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 643.8320ms
2025-08-23 16:00:11.822 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:00:11.961 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4800ms
2025-08-23 16:00:26.812 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:00:26.957 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5790ms
2025-08-23 16:00:41.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:00:42.019 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 192.1260ms
2025-08-23 16:00:56.812 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:00:57.247 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 412.5360ms
2025-08-23 16:01:11.840 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:01:11.992 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5590ms
2025-08-23 16:01:27.600 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:01:27.950 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 349.4010ms
2025-08-23 16:01:44.143 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:01:44.304 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.9930ms
2025-08-23 16:01:57.549 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:01:57.694 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2270ms
2025-08-23 16:02:12.544 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:02:12.690 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3650ms
2025-08-23 16:02:27.560 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:02:27.711 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.0680ms
2025-08-23 16:02:42.559 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:02:42.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.7220ms
2025-08-23 16:02:57.550 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:02:57.699 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.6910ms
2025-08-23 16:03:12.539 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:03:12.680 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0030ms
2025-08-23 16:03:27.607 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:03:27.768 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.0710ms
2025-08-23 16:03:42.561 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:03:42.707 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4820ms
2025-08-23 16:03:57.153 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 148524750643357 -> 5511949908369
2025-08-23 16:03:58.702 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:03:59.374 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 674.2270ms
2025-08-23 16:03:59.407 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 148524750643357 -> 5511949908369
2025-08-23 16:04:01.325 -03:00 [ERR] Failed executing DbCommand (145ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = -1), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = 50), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:04:01.467 -03:00 [INF] 📝 Novo ChatLog criado para 148524750643357: "0be64b4e-f527-487e-977f-59b089d24027"
2025-08-23 16:04:02.279 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:04:02.636 -03:00 [ERR] Erro ao processar mensagem recebida: 148524750643357
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'ContentType' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:04:03.591 -03:00 [INF] 📨 Chat criado/atualizado para 148524750643357: "83b2c7bf-8b54-4728-b8b6-5ab75bf554fb"
2025-08-23 16:04:12.633 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:04:12.775 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7390ms
2025-08-23 16:04:27.645 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:04:27.805 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.0370ms
2025-08-23 16:04:42.623 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:04:42.763 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3330ms
2025-08-23 16:04:57.641 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:04:57.779 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3970ms
2025-08-23 16:05:12.631 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:05:12.771 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6280ms
2025-08-23 16:05:27.891 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:05:28.067 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.0090ms
2025-08-23 16:05:44.156 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:05:44.717 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 541.7460ms
2025-08-23 16:05:50.184 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 16:05:51.513 -03:00 [ERR] Failed executing DbCommand (179ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:05:51.691 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:05:51.707 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:05:59.185 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:05:59.362 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 177.7760ms
2025-08-23 16:06:13.720 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:06:13.868 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.6140ms
2025-08-23 16:06:20.276 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 16:06:21.388 -03:00 [ERR] Failed executing DbCommand (142ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:06:21.542 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:06:21.554 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:06:28.755 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:06:28.910 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.7170ms
2025-08-23 16:06:44.061 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:06:44.296 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 235.1690ms
2025-08-23 16:06:59.447 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:07:00.435 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 987.5380ms
2025-08-23 16:07:13.839 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:07:13.991 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5870ms
2025-08-23 16:07:14.460 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 16:07:16.860 -03:00 [ERR] Failed executing DbCommand (212ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:07:17.054 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:07:17.074 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:07:28.867 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:07:29.013 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3020ms
2025-08-23 16:07:43.813 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:07:43.955 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1600ms
2025-08-23 16:07:58.824 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:07:58.967 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0050ms
2025-08-23 16:08:13.828 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:08:13.971 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0310ms
2025-08-23 16:08:28.935 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:08:29.086 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.8400ms
2025-08-23 16:08:43.870 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:08:44.019 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.2550ms
2025-08-23 16:08:58.896 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:08:59.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.8720ms
2025-08-23 16:09:14.425 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:09:14.605 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.1060ms
2025-08-23 16:09:28.998 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:09:29.145 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3980ms
2025-08-23 16:09:43.980 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:09:44.122 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5880ms
2025-08-23 16:09:58.995 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:09:59.141 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7760ms
2025-08-23 16:10:14.198 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:10:14.382 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.2610ms
2025-08-23 16:10:29.011 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:10:29.158 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4830ms
2025-08-23 16:10:44.036 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:10:44.188 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.7750ms
2025-08-23 16:10:59.024 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:10:59.177 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.9290ms
2025-08-23 16:11:14.341 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:11:14.643 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 298.8390ms
2025-08-23 16:11:29.196 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:11:29.410 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 212.3190ms
2025-08-23 16:11:44.113 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:11:44.306 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.5120ms
2025-08-23 16:11:59.119 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:11:59.257 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7940ms
2025-08-23 16:12:11.393 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:12:14.135 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:12:14.311 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.5730ms
2025-08-23 16:12:14.890 -03:00 [INF] 📝 Novo ChatLog criado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:12:15.538 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:12:15.948 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:12:17.818 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:12:18.151 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:12:20.354 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:12:24.783 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:12:25.082 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:12:29.125 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:12:29.266 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3410ms
2025-08-23 16:12:44.134 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:12:44.287 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.1020ms
2025-08-23 16:12:59.316 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:12:59.470 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9360ms
2025-08-23 16:13:14.459 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:13:14.615 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.8690ms
2025-08-23 16:13:26.436 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:13:27.745 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:13:28.068 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:13:31.059 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:13:31.275 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 216.6840ms
2025-08-23 16:13:45.122 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:13:47.087 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:13:47.848 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 761.6350ms
2025-08-23 16:13:49.665 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:13:51.236 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:14:02.634 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:14:02.808 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.5970ms
2025-08-23 16:14:09.419 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:14:10.854 -03:00 [INF] 📝 Novo ChatLog criado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:14:12.155 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:14:16.023 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:14:16.426 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:14:16.563 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.1430ms
2025-08-23 16:14:17.514 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:14:17.894 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:14:31.429 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:14:31.641 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 212.2800ms
2025-08-23 16:14:45.105 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:14:46.305 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:14:46.346 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511945754367 -> 5511949908369
2025-08-23 16:14:46.425 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:14:46.602 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:14:47.414 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 988.9440ms
2025-08-23 16:14:47.437 -03:00 [INF] 📝 ChatLog atualizado para 5511945754367: "2c469be3-b5c4-4869-96da-3a47072bb9bc"
2025-08-23 16:14:47.711 -03:00 [INF] 📨 Chat criado/atualizado para 5511945754367: "ec370505-8dde-44f3-a46d-b1e895bb72eb"
2025-08-23 16:14:56.135 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:14:57.779 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:15:00.623 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:15:01.442 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:15:01.585 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3210ms
2025-08-23 16:15:01.837 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:15:03.317 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:15:03.995 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:15:05.254 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:15:07.315 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:15:07.687 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:15:17.431 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:15:17.628 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.5340ms
2025-08-23 16:15:31.856 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:15:32.007 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.2710ms
2025-08-23 16:15:44.733 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:15:46.861 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:15:47.008 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8930ms
2025-08-23 16:15:47.119 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:15:47.429 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:15:48.632 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:15:49.734 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:15:50.011 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:16:01.865 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:16:02.019 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.2290ms
2025-08-23 16:16:16.904 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:16:17.118 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 213.7520ms
2025-08-23 16:16:18.555 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 16:16:19.810 -03:00 [ERR] Failed executing DbCommand (167ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:16:20.025 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:16:20.088 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:16:32.475 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:16:34.265 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1789.5600ms
2025-08-23 16:16:47.793 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:16:47.996 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 202.9150ms
2025-08-23 16:16:52.127 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511985205397 -> 5511949908369
2025-08-23 16:16:53.126 -03:00 [ERR] Failed executing DbCommand (150ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:16:53.302 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:16:53.319 -03:00 [ERR] Erro ao processar mensagem recebida: 5511985205397
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:17:02.200 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:17:02.383 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 185.4290ms
2025-08-23 16:17:17.869 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:17:18.104 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 234.1090ms
2025-08-23 16:17:32.708 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:17:32.876 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.6790ms
2025-08-23 16:17:47.446 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:17:47.610 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.5410ms
2025-08-23 16:18:02.496 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:18:02.688 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 192.4880ms
2025-08-23 16:18:17.427 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:18:17.595 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.7150ms
2025-08-23 16:18:32.423 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:18:32.568 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2100ms
2025-08-23 16:18:39.488 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363172556943876 -> 5511949908369
2025-08-23 16:18:40.926 -03:00 [ERR] Failed executing DbCommand (158ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:18:41.207 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:18:41.246 -03:00 [ERR] Erro ao processar mensagem recebida: 120363172556943876
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:18:47.432 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:18:47.580 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3060ms
2025-08-23 16:19:02.469 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:19:02.616 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8620ms
2025-08-23 16:19:17.424 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:19:17.563 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1360ms
2025-08-23 16:19:32.563 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:19:32.743 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 180.5620ms
2025-08-23 16:19:48.332 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:19:48.504 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.9100ms
2025-08-23 16:20:03.563 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:20:03.721 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6330ms
2025-08-23 16:20:17.977 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:20:18.175 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.6930ms
2025-08-23 16:20:38.285 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:20:38.435 -03:00 [WRN] As of ""2025-08-23T19:20:33.6278040+00:00"", the heartbeat has been running for ""00:00:01.2425644"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-08-23 16:20:38.472 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 187.4160ms
2025-08-23 16:20:49.534 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:20:49.704 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.6850ms
2025-08-23 16:21:04.547 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:21:04.708 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.7370ms
2025-08-23 16:21:19.518 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:21:19.668 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.1620ms
2025-08-23 16:21:34.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:21:34.795 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 194.5380ms
2025-08-23 16:21:46.560 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:21:47.958 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:21:48.239 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:21:51.370 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:21:51.742 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 372.1250ms
2025-08-23 16:22:05.965 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:22:06.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.3340ms
2025-08-23 16:22:20.672 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:22:20.813 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2150ms
2025-08-23 16:22:35.760 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:22:35.916 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.9450ms
2025-08-23 16:22:50.741 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:22:50.891 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9640ms
2025-08-23 16:22:51.549 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:22:52.908 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:22:53.251 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:23:07.502 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:23:07.687 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 183.7850ms
2025-08-23 16:23:20.712 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:23:20.855 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3700ms
2025-08-23 16:23:35.718 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:23:35.872 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.5110ms
2025-08-23 16:23:50.719 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:23:50.869 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8370ms
2025-08-23 16:24:06.239 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:24:06.436 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.5260ms
2025-08-23 16:24:21.028 -03:00 [WRN] As of ""2025-08-23T19:24:18.3667990+00:00"", the heartbeat has been running for ""00:00:01.3268752"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-08-23 16:24:21.149 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:24:21.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 268.1800ms
2025-08-23 16:24:25.982 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511996855601 -> 5511949908369
2025-08-23 16:24:27.356 -03:00 [ERR] Failed executing DbCommand (201ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = 4000), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = 200), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:24:27.542 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:24:27.556 -03:00 [ERR] Erro ao processar mensagem recebida: 5511996855601
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'MessageId' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:24:35.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:24:36.053 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.7860ms
2025-08-23 16:24:50.818 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:24:50.971 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5260ms
2025-08-23 16:24:59.077 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:25:00.227 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:25:00.570 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:25:05.823 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:25:05.962 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2590ms
2025-08-23 16:25:13.909 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:25:17.598 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:25:17.874 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:25:20.867 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:25:21.019 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.3910ms
2025-08-23 16:25:36.397 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:25:36.806 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 409.1960ms
2025-08-23 16:25:43.356 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:25:44.458 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:25:44.732 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:25:50.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:25:51.029 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7520ms
2025-08-23 16:26:06.489 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:26:07.171 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 682.8790ms
2025-08-23 16:26:21.062 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:26:21.219 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.3740ms
2025-08-23 16:26:24.651 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:26:25.841 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:26:26.126 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:26:31.324 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:26:33.480 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:26:34.065 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:26:36.061 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:26:36.201 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6920ms
2025-08-23 16:26:51.051 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:26:51.195 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3550ms
2025-08-23 16:27:06.059 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:27:06.229 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.8620ms
2025-08-23 16:27:21.057 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:27:21.199 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0300ms
2025-08-23 16:27:36.063 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:27:36.204 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2070ms
2025-08-23 16:27:51.065 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:27:51.208 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6130ms
2025-08-23 16:28:06.074 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:28:06.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4630ms
2025-08-23 16:28:14.606 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 120363173003902460 -> 5511949908369
2025-08-23 16:28:16.439 -03:00 [ERR] Failed executing DbCommand (567ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = Guid), @p2='?' (Size = 20), @p3='?' (Size = -1), @p4='?' (Size = 20), @p5='?' (DbType = DateTime), @p6='?' (Size = 10), @p7='?' (DbType = DateTime), @p8='?' (Size = -1), @p9='?' (DbType = DateTime), @p10='?' (Size = -1), @p11='?' (Size = 4000), @p12='?' (Size = 20), @p13='?' (DbType = DateTime), @p14='?' (Size = 150), @p15='?' (DbType = Int32), @p16='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `ChatLogs` (`Id`, `ChatId`, `ContactPhoneE164`, `Content`, `ContentType`, `CreatedAt`, `Direction`, `LastMessageAt`, `LastMessagePreview`, `LastMessageUtc`, `MessageId`, `PayloadJson`, `PhoneNumber`, `Timestamp`, `Title`, `UnreadCount`, `UpdatedAt`)
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7, @p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15, @p16);
SELECT `RowVersion`
FROM `ChatLogs`
WHERE ROW_COUNT() = 1 AND `Id` = @p0;
2025-08-23 16:28:16.627 -03:00 [ERR] An exception occurred in the database while saving changes for context type 'Pregiato.Infrastructure.Data.PregiatoDbContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2025-08-23 16:28:16.639 -03:00 [ERR] Erro ao processar mensagem recebida: 120363173003902460
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> MySqlConnector.MySqlException (0x80004005): Data too long for column 'LastMessagePreview' at row 1
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 894
   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37
   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 130
   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 483
   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56
   at MySqlConnector.MySqlCommand.ExecuteReaderAsync(CommandBehavior behavior, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 357
   at MySqlConnector.MySqlCommand.ExecuteDbDataReaderAsync(CommandBehavior behavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 350
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.<>c__DisplayClass30_0`2.<<ExecuteAsync>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteImplementationAsync[TState,TResult](Func`4 operation, Func`4 verifySucceeded, TState state, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.ExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Pregiato.API.Services.RabbitBackgroundService.ProcessIncomingMessage(WhatsAppMessage message) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Services/RabbitBackgroundService.cs:line 454
2025-08-23 16:28:21.073 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:28:21.217 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.8140ms
2025-08-23 16:28:36.071 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:28:36.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6360ms
2025-08-23 16:28:51.079 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:28:51.224 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7750ms
2025-08-23 16:29:04.756 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:29:06.017 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:29:06.089 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:29:06.252 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6420ms
2025-08-23 16:29:06.293 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:29:21.145 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:29:21.385 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 241.0600ms
2025-08-23 16:29:36.389 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:29:36.564 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 174.8990ms
2025-08-23 16:29:47.099 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:29:48.170 -03:00 [INF] 📨 Mensagem WhatsApp recebida via RabbitMQ: 5511986752766 -> 5511949908369
2025-08-23 16:29:48.308 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:29:48.580 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:29:50.673 -03:00 [INF] 📝 ChatLog atualizado para 5511986752766: "fce4aacb-ad93-434c-a31f-0ba57989878e"
2025-08-23 16:29:51.125 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:29:51.206 -03:00 [INF] 📨 Chat criado/atualizado para 5511986752766: "0b316ec5-0ee5-4366-a525-eed1daa319fa"
2025-08-23 16:29:51.269 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6920ms
2025-08-23 16:30:06.125 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:30:06.266 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2620ms
2025-08-23 16:30:21.131 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:30:21.296 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.7630ms
2025-08-23 16:30:36.119 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:30:36.279 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.8920ms
2025-08-23 16:30:51.601 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 16:30:51.604 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 16:30:51.601 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 16:30:51.710 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 109.9900ms
2025-08-23 16:30:51.710 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 109.2280ms
2025-08-23 16:30:51.710 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 106.4880ms
2025-08-23 16:30:51.826 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 16:30:51.849 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 16:30:51.943 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 16:30:51.958 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 16:30:52.002 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.1040ms
2025-08-23 16:30:52.187 -03:00 [INF] Request finished GET /whatsappHub - 101 in 2751179.9080ms
2025-08-23 16:30:52.187 -03:00 [INF] Request finished GET /whatsappHub - 101 in 2751208.6460ms
2025-08-23 16:30:52.187 -03:00 [INF] Request finished GET /whatsappHub - 101 in 2659862.2830ms
2025-08-23 16:30:53.466 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1508.6030ms
2025-08-23 16:30:53.466 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1640.6320ms
2025-08-23 16:30:53.466 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1522.8900ms
2025-08-23 17:00:00.339 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:15:40.977 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:15:41.881 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 17:15:42.599 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1621.2210ms
2025-08-23 17:15:49.247 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 17:15:49.694 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:15:49.709 -03:00 [INF] Request starting GET /api/chats
2025-08-23 17:15:49.740 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 17:15:49.745 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 17:15:49.758 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 18.6260ms
2025-08-23 17:15:49.760 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 14.4130ms
2025-08-23 17:15:49.794 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 17:15:49.796 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.6990ms
2025-08-23 17:15:49.799 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 17:15:49.800 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.5410ms
2025-08-23 17:15:49.990 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 17:15:50.025 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 17:15:50.057 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 17:15:50.939 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 17:15:52.200 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 17:15:52.551 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 17:15:52.891 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 17:15:53.848 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 17:15:55.692 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:15:55.861 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.9650ms
2025-08-23 17:16:05.683 -03:00 [ERR] An error occurred using the connection to database 'railway' on server 'gondola.proxy.rlwy.net'.
2025-08-23 17:16:05.854 -03:00 [ERR] An error occurred using the connection to database 'railway' on server 'gondola.proxy.rlwy.net'.
2025-08-23 17:16:07.339 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 17644.7170ms
2025-08-23 17:16:07.355 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:16:07.615 -03:00 [INF] Request finished GET /api/chats - 200 in 17905.9280ms
2025-08-23 17:16:07.813 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 458.2700ms
2025-08-23 17:16:07.818 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:16:08.230 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 412.0430ms
2025-08-23 17:16:08.235 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:16:08.649 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 414.3940ms
2025-08-23 17:16:08.652 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:16:09.058 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 405.8790ms
2025-08-23 17:16:09.062 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 17:16:09.470 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 407.9330ms
2025-08-23 17:16:10.688 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:16:10.831 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2770ms
2025-08-23 17:31:51.728 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:32:06.583 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:32:06.774 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 17:32:21.981 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:32:21.987 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 17:32:23.830 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1848.1130ms
2025-08-23 17:32:36.555 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:32:36.719 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.6400ms
2025-08-23 17:34:58.361 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:34:58.613 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 251.5080ms
2025-08-23 17:50:28.209 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:50:43.249 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 17:50:43.330 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:50:44.540 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1209.6320ms
2025-08-23 17:50:58.155 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:50:58.311 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1100ms
2025-08-23 17:51:13.174 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 17:51:13.336 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.9020ms
2025-08-23 18:06:43.978 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:06:59.254 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:06:59.256 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:07:00.518 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1263.6540ms
2025-08-23 18:07:14.005 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:07:14.156 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.0960ms
2025-08-23 18:07:29.100 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:07:29.251 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.1760ms
2025-08-23 18:10:06.707 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:10:08.807 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 18:10:11.029 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 18:10:12.592 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 18:10:12.787 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 18:10:12.970 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 18:10:12.982 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 18:10:21.353 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:10:21.761 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:10:22.750 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1397.0220ms
2025-08-23 18:10:37.494 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:10:38.010 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 532.2530ms
2025-08-23 18:10:51.471 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:10:51.618 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0460ms
2025-08-23 18:11:06.487 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:11:06.650 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.4880ms
2025-08-23 18:11:11.710 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:11:11.709 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:11:11.710 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:11:11.831 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 121.6430ms
2025-08-23 18:11:11.831 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 122.5100ms
2025-08-23 18:11:11.831 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 122.4490ms
2025-08-23 18:11:11.846 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:11:11.848 -03:00 [INF] Request finished GET /whatsappHub - 101 in 3321823.4430ms
2025-08-23 18:11:11.851 -03:00 [INF] Request finished GET /whatsappHub - 101 in 3321793.3960ms
2025-08-23 18:11:11.851 -03:00 [INF] Request finished GET /whatsappHub - 101 in 3321861.5740ms
2025-08-23 18:11:11.879 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:11:11.955 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:11:12.699 -03:00 [INF] Request finished GET /whatsappHub - 101 in 819.7780ms
2025-08-23 18:11:12.699 -03:00 [INF] Request finished GET /whatsappHub - 101 in 744.1300ms
2025-08-23 18:11:12.704 -03:00 [INF] Request finished GET /whatsappHub - 101 in 857.4110ms
2025-08-23 18:14:03.296 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:14:12.320 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:12.320 -03:00 [INF] Request starting GET /api/chats
2025-08-23 18:14:12.332 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:14:12.333 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:14:12.334 -03:00 [INF] Request starting GET /api/chats
2025-08-23 18:14:12.369 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 35.7150ms
2025-08-23 18:14:12.369 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 34.8240ms
2025-08-23 18:14:12.411 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:14:12.411 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:14:12.412 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.2050ms
2025-08-23 18:14:12.412 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.9800ms
2025-08-23 18:14:12.490 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:14:12.507 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:14:12.522 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:14:19.611 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:14:19.724 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:14:20.027 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 303.0980ms
2025-08-23 18:14:20.410 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 8089.1630ms
2025-08-23 18:14:20.432 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:20.757 -03:00 [INF] Request finished GET /api/chats - 200 in 8423.2130ms
2025-08-23 18:14:20.757 -03:00 [INF] Request finished GET /api/chats - 200 in 8436.4690ms
2025-08-23 18:14:20.917 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 484.3720ms
2025-08-23 18:14:20.919 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:21.441 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 521.7320ms
2025-08-23 18:14:21.449 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:21.964 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 514.8980ms
2025-08-23 18:14:21.968 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:22.488 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 520.2680ms
2025-08-23 18:14:22.490 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:14:23.018 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 527.9180ms
2025-08-23 18:14:32.944 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:14:33.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.7830ms
2025-08-23 18:14:47.894 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:14:48.086 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 191.5920ms
2025-08-23 18:15:02.899 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:15:03.058 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6670ms
2025-08-23 18:15:17.905 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:15:18.046 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8360ms
2025-08-23 18:15:32.900 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:15:33.041 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9040ms
2025-08-23 18:15:45.021 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:15:45.022 -03:00 [INF] Request finished GET /whatsappHub - 101 in 92498.6200ms
2025-08-23 18:15:45.022 -03:00 [INF] Request finished GET /whatsappHub - 101 in 92514.6960ms
2025-08-23 18:15:45.023 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:15:45.032 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 8.7180ms
2025-08-23 18:15:45.022 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:15:45.033 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 10.4610ms
2025-08-23 18:15:45.032 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 11.0470ms
2025-08-23 18:15:45.024 -03:00 [INF] Request finished GET /whatsappHub - 101 in 92533.5380ms
2025-08-23 18:15:45.051 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:15:45.086 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:15:45.101 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:15:45.387 -03:00 [INF] Request finished GET /whatsappHub - 101 in 286.2500ms
2025-08-23 18:15:45.394 -03:00 [INF] Request finished GET /whatsappHub - 101 in 342.9900ms
2025-08-23 18:15:45.395 -03:00 [INF] Request finished GET /whatsappHub - 101 in 308.3850ms
2025-08-23 18:15:47.913 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:15:48.077 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.4070ms
2025-08-23 18:23:44.541 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:23:52.379 -03:00 [INF] Request starting GET /api/chats
2025-08-23 18:23:52.378 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:23:52.389 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:23:52.417 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:23:52.438 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 19.8300ms
2025-08-23 18:23:52.438 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 49.2140ms
2025-08-23 18:23:52.524 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:23:52.525 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:23:52.525 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.4630ms
2025-08-23 18:23:52.525 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.3050ms
2025-08-23 18:23:52.716 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:23:52.792 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:23:52.841 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:23:59.536 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:23:59.579 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:24:00.993 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1456.4500ms
2025-08-23 18:24:07.426 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Program.<>c.<<Main>$>b__0_5(IServiceProvider provider) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 72
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method32(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:24:07.426 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method31(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:24:07.525 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:24:12.298 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:24:12.317 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:24:12.319 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:24:12.319 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:24:14.231 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:24:14.387 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.9550ms
2025-08-23 18:24:14.670 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2351.5210ms
2025-08-23 18:24:14.801 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2483.9380ms
2025-08-23 18:24:22.892 -03:00 [ERR] An error occurred using the connection to database 'railway' on server 'gondola.proxy.rlwy.net'.
2025-08-23 18:24:23.338 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 15812.5480ms
2025-08-23 18:24:23.833 -03:00 [INF] Request finished GET /whatsappHub - 101 in 31117.5740ms
2025-08-23 18:24:23.833 -03:00 [INF] Request finished GET /whatsappHub - 101 in 30992.5590ms
2025-08-23 18:24:24.015 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:24:24.015 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:24:24.018 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 3.3710ms
2025-08-23 18:24:24.018 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 3.4320ms
2025-08-23 18:24:24.038 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:24:24.063 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:24:27.515 -03:00 [ERR] An error occurred using the connection to database 'railway' on server 'gondola.proxy.rlwy.net'.
2025-08-23 18:24:27.818 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 15519.7220ms
2025-08-23 18:24:28.529 -03:00 [ERR] An error occurred using the connection to database 'railway' on server 'gondola.proxy.rlwy.net'.
2025-08-23 18:24:28.833 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 16514.2050ms
2025-08-23 18:24:29.582 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:24:29.739 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.4040ms
2025-08-23 18:24:44.424 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:24:45.106 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 681.8060ms
2025-08-23 18:24:59.275 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:24:59.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6730ms
2025-08-23 18:25:14.270 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:25:14.420 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4490ms
2025-08-23 18:25:14.918 -03:00 [INF] Request finished GET /whatsappHub - 101 in 50855.5130ms
2025-08-23 18:25:14.918 -03:00 [INF] Request finished GET /whatsappHub - 101 in 50880.0920ms
2025-08-23 18:25:14.946 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:25:14.956 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:25:14.968 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 21.3540ms
2025-08-23 18:25:14.969 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 13.6090ms
2025-08-23 18:25:15.003 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:25:15.058 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:25:15.489 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 18:25:16.861 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 18:25:18.575 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 18:25:19.128 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 18:25:19.346 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 18:25:19.348 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 18:25:29.264 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:25:29.404 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8310ms
2025-08-23 18:25:44.935 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:25:45.081 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.5870ms
2025-08-23 18:25:59.491 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:25:59.645 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.2700ms
2025-08-23 18:26:14.436 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:26:14.587 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.5980ms
2025-08-23 18:26:29.383 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:26:29.531 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.1710ms
2025-08-23 18:26:44.705 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:26:44.910 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 205.6310ms
2025-08-23 18:26:59.586 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:26:59.735 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.0140ms
2025-08-23 18:27:14.810 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:27:14.959 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.6280ms
2025-08-23 18:27:29.497 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:27:29.696 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 196.0070ms
2025-08-23 18:27:44.537 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:27:44.684 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.1700ms
2025-08-23 18:27:59.515 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:27:59.660 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4780ms
2025-08-23 18:28:14.517 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:28:14.762 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 223.2400ms
2025-08-23 18:28:29.505 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:28:29.650 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7090ms
2025-08-23 18:28:44.511 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:28:44.654 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2640ms
2025-08-23 18:28:59.513 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:28:59.657 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2240ms
2025-08-23 18:29:14.659 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:29:14.812 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.9080ms
2025-08-23 18:29:29.639 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:29:29.779 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5530ms
2025-08-23 18:29:45.418 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:29:45.570 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.4610ms
2025-08-23 18:30:00.385 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:30:00.540 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.0220ms
2025-08-23 18:30:15.399 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:30:15.545 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2380ms
2025-08-23 18:30:30.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:30:30.897 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4320ms
2025-08-23 18:30:45.708 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:30:45.861 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.3330ms
2025-08-23 18:31:01.209 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:31:01.355 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9270ms
2025-08-23 18:31:11.640 -03:00 [WRN] As of ""2025-08-23T21:31:11.5429780+00:00"", the heartbeat has been running for ""00:00:01.0592918"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-08-23 18:31:17.230 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:31:17.375 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0350ms
2025-08-23 18:31:31.341 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:31:31.482 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7030ms
2025-08-23 18:31:46.769 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:31:46.950 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 182.4720ms
2025-08-23 18:32:01.755 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:32:01.910 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.6910ms
2025-08-23 18:32:16.702 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:32:16.993 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 290.4680ms
2025-08-23 18:32:31.682 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:32:32.176 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 425.1650ms
2025-08-23 18:32:46.967 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:32:47.123 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.7440ms
2025-08-23 18:33:02.426 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:33:02.621 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 194.9220ms
2025-08-23 18:33:10.760 -03:00 [WRN] As of ""2025-08-23T21:33:08.0255140+00:00"", the heartbeat has been running for ""00:00:01.0543005"" which is longer than ""00:00:01"". This could be caused by thread pool starvation.
2025-08-23 18:33:17.082 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:33:17.242 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.7760ms
2025-08-23 18:33:32.020 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:33:32.162 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5150ms
2025-08-23 18:33:46.982 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:33:47.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6750ms
2025-08-23 18:34:03.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:34:04.035 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8160ms
2025-08-23 18:34:18.099 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:34:18.269 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.8600ms
2025-08-23 18:34:33.222 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:34:33.376 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.4790ms
2025-08-23 18:34:48.157 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:34:48.306 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9660ms
2025-08-23 18:35:03.413 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:35:03.568 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.2440ms
2025-08-23 18:35:18.833 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:35:19.004 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 171.5800ms
2025-08-23 18:35:33.170 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:35:33.318 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0740ms
2025-08-23 18:35:48.174 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:35:48.313 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9240ms
2025-08-23 18:36:03.195 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:36:03.344 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.0710ms
2025-08-23 18:36:18.186 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:36:18.331 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4380ms
2025-08-23 18:36:33.559 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:36:33.713 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.8600ms
2025-08-23 18:36:48.643 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:36:48.801 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.7010ms
2025-08-23 18:37:03.563 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:37:03.807 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 244.6900ms
2025-08-23 18:37:18.469 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:37:18.664 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.4160ms
2025-08-23 18:37:33.350 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:37:33.520 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.7150ms
2025-08-23 18:37:48.304 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:37:48.446 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8640ms
2025-08-23 18:38:03.476 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:38:03.692 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 215.4450ms
2025-08-23 18:38:18.343 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:38:18.493 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4160ms
2025-08-23 18:38:33.707 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:38:34.227 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 520.5870ms
2025-08-23 18:38:48.689 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:38:48.838 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.7590ms
2025-08-23 18:39:03.678 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:39:03.817 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2420ms
2025-08-23 18:39:20.058 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:39:20.226 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.2100ms
2025-08-23 18:39:36.087 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:39:36.237 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.6900ms
2025-08-23 18:39:49.106 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:39:49.792 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 684.9230ms
2025-08-23 18:40:03.941 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:40:04.252 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 311.8020ms
2025-08-23 18:40:18.913 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:40:19.062 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1200ms
2025-08-23 18:40:33.903 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:40:34.051 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.2780ms
2025-08-23 18:40:49.600 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:40:49.868 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 267.8270ms
2025-08-23 18:41:03.947 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:41:04.106 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.2020ms
2025-08-23 18:41:20.302 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:41:20.539 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 237.4370ms
2025-08-23 18:41:35.947 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:41:36.096 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9070ms
2025-08-23 18:41:50.285 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:41:50.429 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1870ms
2025-08-23 18:42:05.319 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:42:05.471 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5830ms
2025-08-23 18:42:21.548 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:42:21.719 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.7200ms
2025-08-23 18:42:35.576 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:42:35.737 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.2250ms
2025-08-23 18:42:50.480 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:42:50.636 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3640ms
2025-08-23 18:43:06.641 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:43:06.975 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 334.8490ms
2025-08-23 18:43:20.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:43:20.893 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4610ms
2025-08-23 18:43:35.970 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:43:36.171 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 200.8140ms
2025-08-23 18:43:50.765 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:43:50.913 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.8480ms
2025-08-23 18:44:05.830 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:44:05.976 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1190ms
2025-08-23 18:44:20.867 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:44:21.031 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.5990ms
2025-08-23 18:44:26.129 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:26.131 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:26.129 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:26.172 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 41.6420ms
2025-08-23 18:44:26.172 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 41.7370ms
2025-08-23 18:44:26.172 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 41.9560ms
2025-08-23 18:44:26.208 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:26.226 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1151168.2340ms
2025-08-23 18:44:26.226 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1151223.8750ms
2025-08-23 18:44:26.227 -03:00 [INF] Request finished GET /whatsappHub - 101 in 1233435.1900ms
2025-08-23 18:44:26.240 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:26.256 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:26.883 -03:00 [INF] Request finished GET /whatsappHub - 101 in 624.0420ms
2025-08-23 18:44:26.884 -03:00 [INF] Request finished GET /whatsappHub - 101 in 676.6260ms
2025-08-23 18:44:26.883 -03:00 [INF] Request finished GET /whatsappHub - 101 in 640.0120ms
2025-08-23 18:44:36.216 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:44:36.415 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 198.9440ms
2025-08-23 18:44:43.564 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:43.569 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:43.569 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:43.570 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.2520ms
2025-08-23 18:44:43.571 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 1.1080ms
2025-08-23 18:44:43.578 -03:00 [INF] Request starting GET /api/chats
2025-08-23 18:44:43.656 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:43.656 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.3740ms
2025-08-23 18:44:43.659 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 18:44:43.659 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.2600ms
2025-08-23 18:44:43.741 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:43.762 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:43.778 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 18:44:48.192 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 4628.3800ms
2025-08-23 18:44:48.227 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:48.564 -03:00 [INF] Request finished GET /api/chats - 200 in 4986.2190ms
2025-08-23 18:44:48.571 -03:00 [INF] Request starting GET /api/chats
2025-08-23 18:44:48.668 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 440.5560ms
2025-08-23 18:44:48.670 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:49.101 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 430.8470ms
2025-08-23 18:44:49.102 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:49.252 -03:00 [INF] Request finished GET /api/chats - 200 in 680.4190ms
2025-08-23 18:44:49.519 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 416.6440ms
2025-08-23 18:44:49.522 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:49.942 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 420.2530ms
2025-08-23 18:44:49.961 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 18:44:50.374 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 412.9900ms
2025-08-23 18:44:50.862 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:44:50.996 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 134.3800ms
2025-08-23 18:58:35.922 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:58:50.823 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:58:51.903 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:59:05.820 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:59:06.084 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 18:59:07.346 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1526.2070ms
2025-08-23 18:59:20.628 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:59:20.780 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.8030ms
2025-08-23 18:59:20.805 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 18:59:22.303 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 18:59:23.444 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 18:59:23.633 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 18:59:23.877 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 18:59:23.881 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 18:59:35.624 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:59:35.772 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4760ms
2025-08-23 18:59:50.620 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 18:59:50.767 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.5010ms
2025-08-23 19:00:05.838 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:00:05.990 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.3170ms
2025-08-23 19:00:20.652 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:00:20.794 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2440ms
2025-08-23 19:00:29.998 -03:00 [INF] Request finished GET /whatsappHub - 101 in 946235.1860ms
2025-08-23 19:00:30.005 -03:00 [INF] Request finished GET /whatsappHub - 101 in 946227.2810ms
2025-08-23 19:00:30.005 -03:00 [INF] Request finished GET /whatsappHub - 101 in 946263.9910ms
2025-08-23 19:00:30.090 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:30.090 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:30.090 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:30.097 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.5670ms
2025-08-23 19:00:30.097 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.5840ms
2025-08-23 19:00:30.098 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 7.5650ms
2025-08-23 19:00:30.252 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:00:30.278 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:00:30.296 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:00:30.468 -03:00 [INF] Request finished GET /whatsappHub - 101 in 189.7610ms
2025-08-23 19:00:30.469 -03:00 [INF] Request finished GET /whatsappHub - 101 in 172.9060ms
2025-08-23 19:00:30.468 -03:00 [INF] Request finished GET /whatsappHub - 101 in 216.0520ms
2025-08-23 19:00:35.674 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:00:35.839 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 165.0650ms
2025-08-23 19:00:37.142 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:00:37.146 -03:00 [INF] Request starting GET /api/chats
2025-08-23 19:00:37.147 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:37.150 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:37.156 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 6.5050ms
2025-08-23 19:00:37.157 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 9.4790ms
2025-08-23 19:00:37.200 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:37.200 -03:00 [INF] Request starting POST /whatsappHub/negotiate
2025-08-23 19:00:37.200 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 0.2640ms
2025-08-23 19:00:37.202 -03:00 [INF] Request finished POST /whatsappHub/negotiate - 200 in 2.1060ms
2025-08-23 19:00:37.212 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:00:37.235 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:00:37.247 -03:00 [INF] Request starting GET /whatsappHub
2025-08-23 19:15:44.746 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 907603.3600ms
2025-08-23 19:15:44.754 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:15:45.535 -03:00 [INF] Request finished GET /api/chats - 200 in 908389.3940ms
2025-08-23 19:15:45.541 -03:00 [INF] Request starting GET /api/chats
2025-08-23 19:15:49.282 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:15:50.295 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1013.6770ms
2025-08-23 19:15:55.626 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:15:55.626 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:15:55.626 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:15:55.626 -03:00 [INF] Request starting GET /api/users/by-email/jonathanfrnnd3@gmail.com
2025-08-23 19:15:56.093 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 466.9060ms
2025-08-23 19:15:56.897 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1271.5720ms
2025-08-23 19:15:56.900 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 1274.0870ms
2025-08-23 19:15:58.068 -03:00 [INF] Request finished GET /api/users/by-email/jonathanfrnnd3@gmail.com - 200 in 2442.7070ms
2025-08-23 19:15:59.790 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method31(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 19:16:00.568 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService(IServiceProvider provider, Type serviceType)
   at Microsoft.Extensions.DependencyInjection.ServiceProviderServiceExtensions.GetRequiredService[T](IServiceProvider provider)
   at Program.<>c.<<Main>$>b__0_5(IServiceProvider provider) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 72
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method32(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 19:16:04.179 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:16:05.462 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1281.8030ms
2025-08-23 19:16:19.206 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:16:19.352 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9380ms
2025-08-23 19:16:34.224 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:16:34.380 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.2630ms
2025-08-23 19:16:49.175 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:16:49.313 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7440ms
2025-08-23 19:17:04.177 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:17:04.314 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.7470ms
2025-08-23 19:17:19.182 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:17:19.318 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.9110ms
2025-08-23 19:17:34.183 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:17:34.318 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.1700ms
2025-08-23 19:17:49.191 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:17:49.335 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9510ms
2025-08-23 19:18:04.188 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:18:04.326 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.2500ms
2025-08-23 19:18:19.198 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:18:19.342 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2070ms
2025-08-23 19:18:34.200 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:18:34.344 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5620ms
2025-08-23 19:18:49.229 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:18:49.368 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.4650ms
2025-08-23 19:19:04.204 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:19:04.346 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8890ms
2025-08-23 19:19:19.205 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:19:19.344 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2540ms
2025-08-23 19:19:34.237 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:19:34.383 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3370ms
2025-08-23 19:19:49.208 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:19:49.352 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0200ms
2025-08-23 19:20:04.211 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:20:04.361 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.7580ms
2025-08-23 19:20:19.209 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:20:19.351 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5890ms
2025-08-23 19:20:34.214 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:20:34.353 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5090ms
2025-08-23 19:20:49.213 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:20:49.361 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0080ms
2025-08-23 19:21:04.219 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:21:04.360 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8560ms
2025-08-23 19:21:19.218 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:21:19.359 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8830ms
2025-08-23 19:21:34.224 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:21:34.366 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3040ms
2025-08-23 19:21:49.244 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:21:49.389 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5250ms
2025-08-23 19:22:04.231 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:22:04.383 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.5410ms
2025-08-23 19:22:43.323 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:22:43.473 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3980ms
2025-08-23 19:22:58.325 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:22:58.474 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.4260ms
2025-08-23 19:23:13.329 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:23:13.470 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8900ms
2025-08-23 19:38:53.134 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:39:08.154 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:39:08.175 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 19:39:09.427 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1272.5800ms
2025-08-23 19:39:23.136 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:39:23.284 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.4970ms
2025-08-23 19:39:38.132 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:39:38.272 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7730ms
2025-08-23 19:39:53.142 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:39:53.285 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0050ms
2025-08-23 19:40:08.142 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:40:08.284 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7450ms
2025-08-23 19:40:23.147 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:40:23.291 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6320ms
2025-08-23 19:40:38.154 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:40:38.299 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5960ms
2025-08-23 19:40:41.298 -03:00 [INF] Tentando conectar ao RabbitMQ...
2025-08-23 19:40:42.659 -03:00 [INF] ✅ Conexão RabbitMQ estabelecida com amqps://mouse.rmq5.cloudamqp.com:5671
2025-08-23 19:40:43.793 -03:00 [INF] 📋 Filas RabbitMQ configuradas
2025-08-23 19:40:43.981 -03:00 [INF] 🎧 Consumidor de QR codes configurado
2025-08-23 19:40:44.169 -03:00 [INF] 🎧 Consumidor de mensagens WhatsApp configurado
2025-08-23 19:40:44.172 -03:00 [INF] ✅ RabbitMQ conectado e configurado
2025-08-23 19:40:53.153 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:40:53.299 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4710ms
2025-08-23 19:41:08.149 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:41:08.309 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.3730ms
2025-08-23 19:41:23.157 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:41:23.302 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.5880ms
2025-08-23 19:41:38.154 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:41:38.294 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7230ms
2025-08-23 19:41:53.160 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:41:53.311 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.0190ms
2025-08-23 19:42:08.179 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:42:08.335 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.1630ms
2025-08-23 19:42:23.164 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:42:23.303 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8510ms
2025-08-23 19:42:38.165 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:42:38.310 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8140ms
2025-08-23 19:42:53.161 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:42:53.309 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0800ms
2025-08-23 19:43:08.164 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:43:08.330 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 166.1770ms
2025-08-23 19:43:23.173 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:43:23.320 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5410ms
2025-08-23 19:43:38.175 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:43:38.317 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6050ms
2025-08-23 19:43:53.175 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:43:53.320 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0040ms
2025-08-23 19:44:08.213 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:44:08.377 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.0710ms
2025-08-23 19:44:23.220 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:44:23.454 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 234.8390ms
2025-08-23 19:44:38.210 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:44:38.368 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.8740ms
2025-08-23 19:44:53.205 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:44:53.349 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.7080ms
2025-08-23 19:45:08.212 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:45:08.357 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7200ms
2025-08-23 19:45:23.226 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:45:23.372 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.7510ms
2025-08-23 19:45:38.217 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:45:38.361 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.8710ms
2025-08-23 19:45:53.214 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:45:53.357 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3990ms
2025-08-23 19:46:08.219 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:46:08.361 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0630ms
2025-08-23 19:46:23.239 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:46:23.386 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3120ms
2025-08-23 19:46:38.230 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:46:38.379 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.6160ms
2025-08-23 19:46:53.228 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:46:53.365 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.3790ms
2025-08-23 19:47:08.228 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:47:08.380 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.3050ms
2025-08-23 19:47:23.228 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:47:23.369 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6990ms
2025-08-23 19:47:38.237 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:47:38.377 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6400ms
2025-08-23 19:47:53.235 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:47:53.383 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5630ms
2025-08-23 19:48:08.235 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:48:08.378 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2270ms
2025-08-23 19:48:23.241 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:48:23.392 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3760ms
2025-08-23 19:48:38.245 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:48:38.385 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5470ms
2025-08-23 19:48:53.248 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:48:53.390 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9860ms
2025-08-23 19:49:08.241 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:49:08.383 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5670ms
2025-08-23 19:49:23.250 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:49:23.392 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0300ms
2025-08-23 19:49:38.358 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:49:38.528 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.4120ms
2025-08-23 19:49:53.276 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:49:53.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0370ms
2025-08-23 19:50:08.264 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:50:08.404 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3870ms
2025-08-23 19:50:23.268 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:50:23.408 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9700ms
2025-08-23 19:50:38.281 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:50:38.430 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4170ms
2025-08-23 19:50:53.274 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:50:53.416 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6790ms
2025-08-23 19:51:08.282 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:51:08.421 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.4310ms
2025-08-23 19:51:23.285 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:51:23.426 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5050ms
2025-08-23 19:51:38.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:51:38.421 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6120ms
2025-08-23 19:51:53.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:51:53.421 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4680ms
2025-08-23 19:52:08.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:52:08.424 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5880ms
2025-08-23 19:52:23.299 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:52:23.439 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9980ms
2025-08-23 19:52:38.283 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:52:38.430 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2930ms
2025-08-23 19:52:53.296 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:52:53.441 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0660ms
2025-08-23 19:53:08.303 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:53:08.464 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.2390ms
2025-08-23 19:53:23.320 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:53:23.484 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.1680ms
2025-08-23 19:53:38.326 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:53:38.661 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 334.6350ms
2025-08-23 19:53:53.299 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:53:53.439 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5880ms
2025-08-23 19:54:08.304 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:54:08.445 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1000ms
2025-08-23 19:54:23.303 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:54:23.450 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.2590ms
2025-08-23 19:54:38.311 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:54:38.451 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0100ms
2025-08-23 19:54:53.304 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:54:53.450 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4910ms
2025-08-23 19:55:08.314 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:55:08.459 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7350ms
2025-08-23 19:55:23.319 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:55:23.472 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.7830ms
2025-08-23 19:55:38.320 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:55:38.465 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.1110ms
2025-08-23 19:55:53.313 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:55:53.456 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9350ms
2025-08-23 19:56:08.318 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:56:08.460 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4160ms
2025-08-23 19:56:23.315 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:56:23.464 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1420ms
2025-08-23 19:56:38.314 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:56:38.455 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5050ms
2025-08-23 19:56:53.316 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:56:53.462 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3030ms
2025-08-23 19:57:08.319 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:57:08.469 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.7970ms
2025-08-23 19:57:23.319 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:57:23.462 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2610ms
2025-08-23 19:57:38.323 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:57:38.462 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6290ms
2025-08-23 19:57:53.329 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:57:53.473 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9840ms
2025-08-23 19:58:08.326 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:58:08.472 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0620ms
2025-08-23 19:58:23.330 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:58:23.471 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6500ms
2025-08-23 19:58:38.330 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:58:38.470 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4990ms
2025-08-23 19:58:53.337 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:58:53.481 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6960ms
2025-08-23 19:59:08.333 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:59:08.474 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5550ms
2025-08-23 19:59:23.333 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:59:23.474 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3110ms
2025-08-23 19:59:38.335 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:59:38.486 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3380ms
2025-08-23 19:59:53.346 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 19:59:53.491 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3780ms
2025-08-23 20:00:08.349 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:00:08.494 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6350ms
2025-08-23 20:00:23.387 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:00:23.544 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.8720ms
2025-08-23 20:00:38.410 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:00:38.578 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.4480ms
2025-08-23 20:00:53.350 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:00:53.491 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7660ms
2025-08-23 20:01:08.352 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:01:08.496 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2460ms
2025-08-23 20:01:23.351 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:01:23.498 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8890ms
2025-08-23 20:01:38.355 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:01:38.503 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.6280ms
2025-08-23 20:01:53.353 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:01:53.495 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0760ms
2025-08-23 20:02:08.357 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:02:08.498 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9270ms
2025-08-23 20:02:23.374 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:02:23.520 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1680ms
2025-08-23 20:02:38.390 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:02:38.585 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 195.3090ms
2025-08-23 20:02:53.367 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:02:53.508 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7090ms
2025-08-23 20:03:08.391 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:03:08.548 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3160ms
2025-08-23 20:03:23.373 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:03:23.512 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9830ms
2025-08-23 20:03:38.399 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:03:38.549 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8170ms
2025-08-23 20:03:53.384 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:03:53.528 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6520ms
2025-08-23 20:04:08.392 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:04:08.531 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1840ms
2025-08-23 20:04:23.399 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:04:23.542 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5530ms
2025-08-23 20:04:38.408 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:04:38.564 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.3810ms
2025-08-23 20:04:53.396 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:04:53.538 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8190ms
2025-08-23 20:05:08.407 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:05:08.546 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7710ms
2025-08-23 20:05:23.410 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:05:23.554 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0450ms
2025-08-23 20:05:38.409 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:05:38.552 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8980ms
2025-08-23 20:05:53.411 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:05:53.555 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2800ms
2025-08-23 20:06:08.422 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:06:08.577 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.0040ms
2025-08-23 20:06:23.417 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:06:23.558 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.3880ms
2025-08-23 20:06:38.424 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:06:38.572 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3480ms
2025-08-23 20:06:53.421 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:06:53.561 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5750ms
2025-08-23 20:07:08.424 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:07:08.567 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6000ms
2025-08-23 20:07:23.426 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:07:23.567 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1150ms
2025-08-23 20:07:38.428 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:07:38.575 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.2280ms
2025-08-23 20:07:53.429 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:07:53.570 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4120ms
2025-08-23 20:08:08.465 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:08:08.627 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.6670ms
2025-08-23 20:08:23.439 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:08:23.583 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4820ms
2025-08-23 20:08:38.462 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:08:38.617 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4610ms
2025-08-23 20:08:53.544 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:08:53.688 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5930ms
2025-08-23 20:09:08.456 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:09:08.598 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1830ms
2025-08-23 20:09:23.455 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:09:23.609 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.6230ms
2025-08-23 20:09:38.565 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:09:38.714 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.5070ms
2025-08-23 20:09:53.541 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:09:53.694 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5670ms
2025-08-23 20:10:08.545 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:10:08.689 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3960ms
2025-08-23 20:10:23.549 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:10:23.692 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4780ms
2025-08-23 20:10:38.558 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:10:38.709 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.7300ms
2025-08-23 20:10:53.551 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:10:53.704 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.2600ms
2025-08-23 20:11:08.549 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:11:08.689 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4240ms
2025-08-23 20:11:23.580 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:11:23.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5200ms
2025-08-23 20:11:38.567 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:11:38.717 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.8200ms
2025-08-23 20:11:53.556 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:11:53.711 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.6810ms
2025-08-23 20:12:08.556 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:12:08.698 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6910ms
2025-08-23 20:12:23.562 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:12:23.706 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9910ms
2025-08-23 20:12:38.567 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:12:38.714 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4370ms
2025-08-23 20:12:53.569 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:12:53.724 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.6210ms
2025-08-23 20:13:08.561 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:13:08.702 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9980ms
2025-08-23 20:13:23.566 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:13:23.714 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3980ms
2025-08-23 20:13:38.566 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:13:38.708 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1180ms
2025-08-23 20:13:53.570 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:13:53.711 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6380ms
2025-08-23 20:14:08.578 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:14:08.731 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.4490ms
2025-08-23 20:14:23.573 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:14:23.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5310ms
2025-08-23 20:14:38.573 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:14:38.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0100ms
2025-08-23 20:14:53.577 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:14:53.718 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8490ms
2025-08-23 20:15:08.579 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:15:08.719 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2470ms
2025-08-23 20:15:23.587 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:15:23.731 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0680ms
2025-08-23 20:15:38.580 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:15:38.728 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0410ms
2025-08-23 20:15:53.583 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:15:53.726 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7570ms
2025-08-23 20:16:08.589 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:16:08.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2820ms
2025-08-23 20:16:23.589 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:16:23.739 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.3460ms
2025-08-23 20:16:38.588 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:16:38.731 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0060ms
2025-08-23 20:16:53.591 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:16:53.733 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7530ms
2025-08-23 20:17:08.595 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:17:08.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8680ms
2025-08-23 20:17:23.598 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:17:23.748 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2300ms
2025-08-23 20:17:38.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:17:38.750 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1110ms
2025-08-23 20:17:53.599 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:17:53.742 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7930ms
2025-08-23 20:18:08.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:18:08.747 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9680ms
2025-08-23 20:18:23.609 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:18:23.751 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0290ms
2025-08-23 20:18:38.618 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:18:38.758 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2590ms
2025-08-23 20:18:53.609 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:18:53.753 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2120ms
2025-08-23 20:19:08.615 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:19:08.760 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2160ms
2025-08-23 20:19:23.623 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:19:23.766 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0690ms
2025-08-23 20:19:38.618 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:19:38.770 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.7180ms
2025-08-23 20:19:53.622 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:19:53.771 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.7840ms
2025-08-23 20:20:08.619 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:20:08.764 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2720ms
2025-08-23 20:20:23.627 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:20:23.775 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.2550ms
2025-08-23 20:20:38.628 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:20:38.773 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8140ms
2025-08-23 20:20:53.642 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:20:53.796 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.9360ms
2025-08-23 20:21:08.633 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:21:08.774 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1620ms
2025-08-23 20:21:23.636 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:21:23.776 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2270ms
2025-08-23 20:21:38.643 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:21:38.789 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6060ms
2025-08-23 20:21:53.774 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:21:53.918 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.4160ms
2025-08-23 20:22:08.679 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:22:08.821 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6920ms
2025-08-23 20:22:23.668 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:22:23.808 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0690ms
2025-08-23 20:22:38.665 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:22:38.810 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7920ms
2025-08-23 20:22:53.697 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:22:53.861 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.0440ms
2025-08-23 20:23:08.667 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:23:08.809 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7520ms
2025-08-23 20:23:23.678 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:23:23.822 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5540ms
2025-08-23 20:23:38.675 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:23:38.817 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6690ms
2025-08-23 20:23:53.672 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:23:53.816 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.8690ms
2025-08-23 20:24:08.675 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:24:08.815 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3000ms
2025-08-23 20:24:23.687 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:24:23.830 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1750ms
2025-08-23 20:24:38.687 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:24:38.843 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.6000ms
2025-08-23 20:24:53.689 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:24:53.833 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5080ms
2025-08-23 20:25:08.699 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:25:08.844 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2660ms
2025-08-23 20:25:23.781 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:25:23.967 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 186.6770ms
2025-08-23 20:25:38.693 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:25:38.837 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3930ms
2025-08-23 20:25:53.704 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:25:53.847 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9840ms
2025-08-23 20:26:08.702 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:26:08.844 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4290ms
2025-08-23 20:26:23.703 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:26:23.858 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.3870ms
2025-08-23 20:26:38.710 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:26:38.854 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0500ms
2025-08-23 20:26:53.709 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:26:53.855 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3350ms
2025-08-23 20:27:08.742 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:27:08.890 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.6400ms
2025-08-23 20:27:23.721 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:27:23.863 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1190ms
2025-08-23 20:27:38.717 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:27:38.860 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5100ms
2025-08-23 20:27:53.715 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:27:53.858 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3220ms
2025-08-23 20:28:08.726 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:28:08.868 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7390ms
2025-08-23 20:28:23.725 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:28:23.864 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3040ms
2025-08-23 20:28:38.730 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:28:38.874 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3310ms
2025-08-23 20:28:53.724 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:28:53.865 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1320ms
2025-08-23 20:29:08.730 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:29:08.870 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7530ms
2025-08-23 20:29:23.732 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:29:23.879 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3830ms
2025-08-23 20:29:38.735 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:29:38.881 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0060ms
2025-08-23 20:29:53.733 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:29:53.871 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7050ms
2025-08-23 20:30:08.736 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:30:08.884 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4190ms
2025-08-23 20:30:23.733 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:30:23.886 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5300ms
2025-08-23 20:30:38.740 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:30:38.880 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9530ms
2025-08-23 20:30:53.742 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:30:53.884 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3650ms
2025-08-23 20:31:08.742 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:31:08.886 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2200ms
2025-08-23 20:31:23.740 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:31:23.880 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2340ms
2025-08-23 20:31:38.748 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:31:38.892 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4100ms
2025-08-23 20:31:53.752 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:31:53.906 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.0130ms
2025-08-23 20:32:08.871 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:32:09.046 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.0580ms
2025-08-23 20:32:23.816 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:32:24.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 226.8470ms
2025-08-23 20:32:38.768 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:32:38.911 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.4710ms
2025-08-23 20:32:53.769 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:32:53.926 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.3010ms
2025-08-23 20:33:08.778 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:33:08.921 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1990ms
2025-08-23 20:33:23.785 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:33:23.927 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6180ms
2025-08-23 20:33:38.792 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:33:38.981 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 189.0920ms
2025-08-23 20:33:53.910 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:33:54.118 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 207.7000ms
2025-08-23 20:34:08.815 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:34:08.958 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4730ms
2025-08-23 20:34:23.816 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:34:23.957 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4190ms
2025-08-23 20:34:38.812 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:34:38.954 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0120ms
2025-08-23 20:34:53.816 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:34:53.960 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0310ms
2025-08-23 20:35:08.816 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:35:08.956 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3690ms
2025-08-23 20:35:23.822 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:35:23.964 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9590ms
2025-08-23 20:35:38.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:35:38.968 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3570ms
2025-08-23 20:35:53.828 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:35:53.971 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0890ms
2025-08-23 20:36:08.823 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:36:09.089 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 267.2150ms
2025-08-23 20:36:23.847 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:36:23.993 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1520ms
2025-08-23 20:36:38.864 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:36:39.018 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.6310ms
2025-08-23 20:36:53.833 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:36:53.981 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4470ms
2025-08-23 20:37:08.846 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:37:08.996 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.2070ms
2025-08-23 20:37:23.865 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:37:24.048 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 183.0720ms
2025-08-23 20:37:38.852 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:37:38.998 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0130ms
2025-08-23 20:37:53.860 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:37:54.001 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5710ms
2025-08-23 20:38:08.870 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:38:09.049 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.6970ms
2025-08-23 20:38:23.854 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:38:23.994 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0040ms
2025-08-23 20:38:38.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:38:39.032 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8140ms
2025-08-23 20:38:53.861 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:38:54.001 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0640ms
2025-08-23 20:39:08.867 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:39:09.007 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0190ms
2025-08-23 20:39:23.868 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:39:24.011 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0210ms
2025-08-23 20:39:38.869 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:39:39.012 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6900ms
2025-08-23 20:39:53.877 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:39:54.022 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5320ms
2025-08-23 20:40:08.876 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:40:09.022 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7620ms
2025-08-23 20:40:23.875 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:40:24.015 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4140ms
2025-08-23 20:40:38.880 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:40:39.026 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3940ms
2025-08-23 20:40:53.909 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:40:54.058 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.0740ms
2025-08-23 20:41:08.926 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:41:09.073 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8600ms
2025-08-23 20:41:23.898 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:41:24.042 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3050ms
2025-08-23 20:41:38.888 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:41:39.029 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9140ms
2025-08-23 20:41:53.896 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:41:54.040 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.4750ms
2025-08-23 20:42:08.927 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:42:09.076 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3510ms
2025-08-23 20:42:23.897 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:42:24.047 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.3910ms
2025-08-23 20:42:38.898 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:42:39.044 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0590ms
2025-08-23 20:42:53.910 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:42:54.051 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9590ms
2025-08-23 20:43:08.931 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:43:09.078 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0040ms
2025-08-23 20:43:23.940 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:43:24.116 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 176.2560ms
2025-08-23 20:43:38.956 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:43:39.106 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3340ms
2025-08-23 20:43:53.915 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:43:54.059 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1540ms
2025-08-23 20:44:08.945 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:44:09.096 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3060ms
2025-08-23 20:44:23.923 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:44:24.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.4910ms
2025-08-23 20:44:38.919 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:44:39.063 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9030ms
2025-08-23 20:44:53.922 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:44:54.064 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7580ms
2025-08-23 20:45:08.921 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:45:09.064 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2560ms
2025-08-23 20:45:23.937 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:45:24.078 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2330ms
2025-08-23 20:45:38.931 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:45:39.074 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3710ms
2025-08-23 20:45:53.935 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:45:54.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4550ms
2025-08-23 20:46:08.939 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:46:09.085 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3740ms
2025-08-23 20:46:23.952 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:46:24.102 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.5830ms
2025-08-23 20:46:38.939 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:46:39.083 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6870ms
2025-08-23 20:46:53.948 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:46:54.087 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1320ms
2025-08-23 20:47:08.977 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:47:09.190 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 213.4480ms
2025-08-23 20:47:23.941 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:47:24.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4200ms
2025-08-23 20:47:38.958 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:47:39.107 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.7550ms
2025-08-23 20:47:53.952 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:47:54.106 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.2590ms
2025-08-23 20:48:08.957 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:48:09.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.0630ms
2025-08-23 20:48:23.956 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:48:24.097 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.3240ms
2025-08-23 20:48:38.958 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:48:39.096 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2800ms
2025-08-23 20:48:53.959 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:48:54.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.4020ms
2025-08-23 20:49:08.967 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:49:09.110 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3370ms
2025-08-23 20:49:23.964 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:49:24.104 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2110ms
2025-08-23 20:49:38.963 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:49:39.111 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.2640ms
2025-08-23 20:49:53.983 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:49:54.125 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2300ms
2025-08-23 20:50:08.982 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:50:09.137 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4830ms
2025-08-23 20:50:23.979 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:50:24.121 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7820ms
2025-08-23 20:50:38.973 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:50:39.118 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8820ms
2025-08-23 20:50:53.984 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:50:54.130 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7770ms
2025-08-23 20:51:08.992 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:51:09.146 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.1550ms
2025-08-23 20:51:23.987 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:51:24.135 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3160ms
2025-08-23 20:51:38.984 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:51:39.129 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.1950ms
2025-08-23 20:51:53.982 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:51:54.123 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1520ms
2025-08-23 20:52:08.997 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:52:09.142 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5480ms
2025-08-23 20:52:24.047 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:52:24.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.8630ms
2025-08-23 20:52:38.999 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:52:39.142 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6520ms
2025-08-23 20:52:54.010 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:52:54.172 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.1090ms
2025-08-23 20:53:09.002 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:53:09.144 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9040ms
2025-08-23 20:53:24.010 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:53:24.153 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8930ms
2025-08-23 20:53:39.111 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:53:39.303 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 192.0540ms
2025-08-23 20:53:54.025 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:53:54.168 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6610ms
2025-08-23 20:54:09.056 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:54:09.220 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.5810ms
2025-08-23 20:54:24.031 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:54:24.172 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7510ms
2025-08-23 20:54:39.027 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:54:39.171 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0800ms
2025-08-23 20:54:54.032 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:54:54.172 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8470ms
2025-08-23 20:55:09.035 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:55:09.177 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6750ms
2025-08-23 20:55:24.036 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:55:24.184 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.8070ms
2025-08-23 20:55:39.040 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:55:39.181 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.3010ms
2025-08-23 20:55:54.039 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:55:54.180 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2860ms
2025-08-23 20:56:09.041 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:56:09.183 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8920ms
2025-08-23 20:56:24.043 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:56:24.189 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9730ms
2025-08-23 20:56:39.062 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:56:39.213 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.8420ms
2025-08-23 20:56:54.047 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:56:54.190 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7520ms
2025-08-23 20:57:09.057 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:57:09.206 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.0260ms
2025-08-23 20:57:24.053 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:57:24.197 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3990ms
2025-08-23 20:57:39.058 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:57:39.198 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4140ms
2025-08-23 20:57:54.078 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:57:54.229 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.9780ms
2025-08-23 20:58:09.080 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:58:09.223 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6900ms
2025-08-23 20:58:24.079 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:58:24.234 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.7180ms
2025-08-23 20:58:39.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:58:39.209 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9970ms
2025-08-23 20:58:54.080 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:58:54.221 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9890ms
2025-08-23 20:59:09.077 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:59:09.245 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 168.1660ms
2025-08-23 20:59:24.085 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:59:24.242 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.7120ms
2025-08-23 20:59:39.075 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:59:39.216 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0730ms
2025-08-23 20:59:54.076 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 20:59:54.215 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6510ms
2025-08-23 21:00:09.131 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:00:09.313 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 181.1980ms
2025-08-23 21:00:24.091 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:00:24.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6530ms
2025-08-23 21:00:39.087 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:00:39.230 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2270ms
2025-08-23 21:00:54.090 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:00:54.232 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4680ms
2025-08-23 21:01:09.109 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:01:09.261 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.3460ms
2025-08-23 21:01:24.101 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:01:24.248 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0660ms
2025-08-23 21:17:04.190 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:17:19.112 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:17:19.264 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 21:17:20.434 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1322.0080ms
2025-08-23 21:17:34.092 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:17:34.234 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0950ms
2025-08-23 21:17:49.084 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:17:49.223 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6230ms
2025-08-23 21:18:04.105 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:18:04.252 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9810ms
2025-08-23 21:18:19.088 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:18:19.230 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0330ms
2025-08-23 21:18:34.096 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:18:34.236 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2510ms
2025-08-23 21:18:49.097 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:18:49.236 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.0510ms
2025-08-23 21:19:04.096 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:19:04.239 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.7740ms
2025-08-23 21:19:19.096 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:19:19.235 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7120ms
2025-08-23 21:19:34.105 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:19:34.246 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7420ms
2025-08-23 21:19:49.105 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:19:49.245 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3640ms
2025-08-23 21:35:29.050 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:35:44.050 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:35:44.076 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 21:35:45.346 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1295.2160ms
2025-08-23 21:35:59.098 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:35:59.253 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.7870ms
2025-08-23 21:36:16.194 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:36:16.333 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9690ms
2025-08-23 21:36:31.183 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:36:31.325 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2520ms
2025-08-23 21:36:46.181 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:36:46.322 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9140ms
2025-08-23 21:37:01.182 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:37:09.135 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 7952.7680ms
2025-08-23 21:37:16.191 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:37:16.340 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4120ms
2025-08-23 21:37:31.190 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:37:31.419 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 228.7950ms
2025-08-23 21:37:46.189 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:37:46.335 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4060ms
2025-08-23 21:53:26.058 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:53:41.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:53:41.119 -03:00 [ERR] An unhandled exception has occurred while executing the request.
MySqlConnector.MySqlException (0x80004005): Connect Timeout expired.
 ---> MySqlConnector.MySqlException (0x80004005): The Command Timeout expired before the operation completed.
 ---> System.IO.IOException: Unable to read data from the transport connection: Operation timed out.
 ---> System.Net.Sockets.SocketException (60): Operation timed out
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   --- End of inner exception stack trace ---
   at System.Net.Sockets.NetworkStream.Read(Span`1 buffer)
   at System.Net.Security.SslStream.EnsureFullTlsFrameAsync[TIOAdapter](CancellationToken cancellationToken, Int32 estimatedSize)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.Net.Security.SslStream.ReadAsyncInternal[TIOAdapter](Memory`1 buffer, CancellationToken cancellationToken)
   at System.Runtime.CompilerServices.PoolingAsyncValueTaskMethodBuilder`1.StateMachineBox`1.System.Threading.Tasks.Sources.IValueTaskSource<TResult>.GetResult(Int16 token)
   at System.IO.Stream.Read(Span`1 buffer)
   at MySqlConnector.Protocol.Serialization.StreamByteHandler.<ReadBytesAsync>g__DoReadBytesSync|6_0(Memory`1 buffer) in /_/src/MySqlConnector/Protocol/Serialization/StreamByteHandler.cs:line 34
   at MySqlConnector.Protocol.Serialization.BufferedByteReader.ReadBytesAsync(IByteHandler byteHandler, ArraySegment`1 buffer, Int32 totalBytesToRead, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/BufferedByteReader.cs:line 34
   at MySqlConnector.Protocol.Serialization.ProtocolUtility.ReadPayloadAsync(BufferedByteReader bufferedByteReader, IByteHandler byteHandler, Func`1 getNextSequenceNumber, ArraySegmentHolder`1 previousPayloads, ProtocolErrorBehavior protocolErrorBehavior, IOBehavior ioBehavior) in /_/src/MySqlConnector/Protocol/Serialization/ProtocolUtility.cs:line 421
   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 882
   at MySqlConnector.Core.ServerSession.TryResetConnectionAsync(ConnectionSettings cs, MySqlConnection connection, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 593
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 74
   at MySqlConnector.Core.ConnectionPool.GetSessionAsync(MySqlConnection connection, Int64 startingTimestamp, Int32 timeoutMilliseconds, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ConnectionPool.cs:line 144
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 919
   at MySqlConnector.MySqlConnection.CreateSessionAsync(ConnectionPool pool, Int64 startingTimestamp, Activity activity, Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 951
   at MySqlConnector.MySqlConnection.OpenAsync(Nullable`1 ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlConnection.cs:line 419
   at Microsoft.EntityFrameworkCore.ServerVersion.AutoDetect(String connectionString)
   at Program.<>c__DisplayClass0_0.<<Main>$>b__4(DbContextOptionsBuilder options) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 62
   at Microsoft.Extensions.DependencyInjection.EntityFrameworkServiceCollectionExtensions.CreateDbContextOptions[TContext](IServiceProvider applicationServiceProvider, Action`2 optionsAction)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at ResolveService(ILEmitResolverBuilderRuntimeContext, ServiceProviderEngineScope)
   at Microsoft.Extensions.DependencyInjection.ServiceLookup.ServiceProviderEngineScope.GetService(Type serviceType)
   at lambda_method369(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Program.<>c.<<<Main>$>b__0_7>d.MoveNext() in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Program.cs:line 142
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Pregiato.API.Middleware.ClerkAuthenticationMiddleware.InvokeAsync(HttpContext context) in /Users/worldgames/Documents/PREGIATO/My_pregiato /mypregiato/back/Pregiato.API/Middleware/ClerkAuthenticationMiddleware.cs:line 51
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2025-08-23 21:53:42.181 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1114.6790ms
2025-08-23 21:53:56.068 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:53:56.217 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4000ms
2025-08-23 21:54:11.062 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:54:11.203 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3560ms
2025-08-23 21:54:26.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:54:26.210 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5420ms
2025-08-23 21:54:41.069 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:54:41.210 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7650ms
2025-08-23 21:54:56.074 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:54:56.212 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1230ms
2025-08-23 21:55:11.073 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:55:11.212 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9760ms
2025-08-23 21:55:26.091 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:55:26.238 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8000ms
2025-08-23 21:55:41.091 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:55:41.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5030ms
2025-08-23 21:55:56.166 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:55:56.354 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 187.2480ms
2025-08-23 21:56:11.095 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:56:11.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7390ms
2025-08-23 21:56:26.094 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:56:26.235 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4110ms
2025-08-23 21:56:41.093 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:56:41.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1480ms
2025-08-23 21:56:56.103 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:56:56.242 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.5150ms
2025-08-23 21:57:11.099 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:57:11.240 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5430ms
2025-08-23 21:57:26.101 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:57:26.241 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3450ms
2025-08-23 21:57:41.105 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:57:41.247 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8340ms
2025-08-23 21:57:56.117 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:57:56.264 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.4480ms
2025-08-23 21:58:11.114 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:58:11.260 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.3880ms
2025-08-23 21:58:26.109 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:58:26.249 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7160ms
2025-08-23 21:58:41.114 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:58:41.262 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.4450ms
2025-08-23 21:58:56.114 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:58:56.264 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.3820ms
2025-08-23 21:59:11.117 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:59:11.255 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.4200ms
2025-08-23 21:59:26.166 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:59:26.339 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.9300ms
2025-08-23 21:59:41.123 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:59:41.262 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9960ms
2025-08-23 21:59:56.125 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 21:59:56.261 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2490ms
2025-08-23 22:00:11.129 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:00:11.278 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.7740ms
2025-08-23 22:00:26.231 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:00:26.375 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5070ms
2025-08-23 22:00:41.131 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:00:41.269 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7880ms
2025-08-23 22:00:56.145 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:00:56.280 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 134.8160ms
2025-08-23 22:01:11.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:01:11.422 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1580ms
2025-08-23 22:01:26.146 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:01:26.285 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9660ms
2025-08-23 22:01:41.146 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:01:41.285 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6390ms
2025-08-23 22:01:56.152 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:01:56.292 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8670ms
2025-08-23 22:02:11.150 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:02:11.291 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.9970ms
2025-08-23 22:02:26.151 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:02:26.299 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.1600ms
2025-08-23 22:02:41.164 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:02:41.307 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2820ms
2025-08-23 22:02:56.162 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:02:56.307 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4170ms
2025-08-23 22:03:11.162 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:03:11.302 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1870ms
2025-08-23 22:03:26.276 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:03:26.556 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 279.5220ms
2025-08-23 22:03:41.267 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:03:41.445 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 178.1670ms
2025-08-23 22:03:56.211 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:03:56.352 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7240ms
2025-08-23 22:04:11.239 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:04:11.388 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9140ms
2025-08-23 22:04:26.233 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:04:26.381 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.8480ms
2025-08-23 22:04:41.589 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:04:41.732 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3180ms
2025-08-23 22:04:56.254 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:04:56.392 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3150ms
2025-08-23 22:05:11.247 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:05:11.390 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3350ms
2025-08-23 22:05:26.245 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:05:26.385 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9820ms
2025-08-23 22:05:41.358 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:05:41.556 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.7830ms
2025-08-23 22:05:56.596 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:05:56.742 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.9980ms
2025-08-23 22:06:11.327 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:06:11.482 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.4380ms
2025-08-23 22:06:26.317 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:06:26.461 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3710ms
2025-08-23 22:06:41.462 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:06:41.610 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.6490ms
2025-08-23 22:06:56.323 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:06:56.475 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5790ms
2025-08-23 22:07:11.343 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:07:11.497 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.1870ms
2025-08-23 22:07:26.322 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:07:26.463 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8490ms
2025-08-23 22:07:41.325 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:07:41.461 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.3890ms
2025-08-23 22:07:56.325 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:07:56.470 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.9430ms
2025-08-23 22:08:11.332 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:08:11.468 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.7990ms
2025-08-23 22:08:26.327 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:08:26.471 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0090ms
2025-08-23 22:08:41.337 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:08:41.476 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1630ms
2025-08-23 22:08:56.334 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:08:56.481 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.0950ms
2025-08-23 22:09:11.340 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:09:11.483 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7210ms
2025-08-23 22:09:26.342 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:09:26.485 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9770ms
2025-08-23 22:09:41.336 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:09:41.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1180ms
2025-08-23 22:09:56.337 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:09:56.478 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7310ms
2025-08-23 22:10:11.446 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:10:11.610 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.1990ms
2025-08-23 22:10:26.351 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:10:26.491 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8080ms
2025-08-23 22:10:41.354 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:10:41.496 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8840ms
2025-08-23 22:10:56.382 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:10:56.550 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.8050ms
2025-08-23 22:11:11.400 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:11:11.541 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4220ms
2025-08-23 22:11:26.373 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:11:26.513 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0500ms
2025-08-23 22:11:41.380 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:11:41.520 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0290ms
2025-08-23 22:11:56.381 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:11:56.521 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5360ms
2025-08-23 22:12:11.379 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:12:11.521 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9900ms
2025-08-23 22:12:26.379 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:12:26.533 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5230ms
2025-08-23 22:12:41.378 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:12:41.515 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.1780ms
2025-08-23 22:12:56.394 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:12:56.533 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1150ms
2025-08-23 22:13:11.398 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:13:11.537 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7560ms
2025-08-23 22:13:26.399 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:13:27.884 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 1485.0240ms
2025-08-23 22:13:41.394 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:13:41.537 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2950ms
2025-08-23 22:13:56.427 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:13:56.568 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4680ms
2025-08-23 22:14:11.406 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:14:11.546 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3990ms
2025-08-23 22:14:26.401 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:14:26.549 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3110ms
2025-08-23 22:14:41.410 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:14:41.553 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3510ms
2025-08-23 22:14:56.412 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:14:56.556 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3290ms
2025-08-23 22:15:11.410 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:15:11.548 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3290ms
2025-08-23 22:15:26.412 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:15:26.548 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.6790ms
2025-08-23 22:15:41.418 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:15:41.556 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4860ms
2025-08-23 22:15:56.418 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:15:56.565 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5300ms
2025-08-23 22:16:11.429 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:16:11.577 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.2480ms
2025-08-23 22:16:26.551 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:16:26.707 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3500ms
2025-08-23 22:16:41.435 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:16:41.572 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.4400ms
2025-08-23 22:16:56.438 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:16:56.582 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9700ms
2025-08-23 22:17:11.441 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:17:11.580 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2770ms
2025-08-23 22:17:26.437 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:17:26.573 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.3420ms
2025-08-23 22:17:41.441 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:17:41.582 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8910ms
2025-08-23 22:17:56.442 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:17:56.590 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5810ms
2025-08-23 22:18:11.449 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:18:11.589 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4180ms
2025-08-23 22:18:26.455 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:18:26.598 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6440ms
2025-08-23 22:18:41.468 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:18:41.611 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8700ms
2025-08-23 22:18:56.468 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:18:56.664 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 196.0020ms
2025-08-23 22:19:11.456 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:19:11.605 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1150ms
2025-08-23 22:19:26.455 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:19:26.605 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.6160ms
2025-08-23 22:19:41.459 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:19:41.604 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3340ms
2025-08-23 22:19:56.461 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:19:56.600 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9490ms
2025-08-23 22:20:11.507 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:20:11.657 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2360ms
2025-08-23 22:20:26.473 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:20:26.620 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4260ms
2025-08-23 22:20:41.472 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:20:41.618 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.8200ms
2025-08-23 22:20:56.477 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:20:56.616 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3800ms
2025-08-23 22:21:11.484 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:21:11.620 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.4030ms
2025-08-23 22:21:26.478 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:21:26.616 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.5060ms
2025-08-23 22:21:41.496 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:21:41.641 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6720ms
2025-08-23 22:21:56.498 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:21:56.644 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1370ms
2025-08-23 22:22:11.503 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:22:11.644 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0900ms
2025-08-23 22:22:26.540 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:22:26.699 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6340ms
2025-08-23 22:22:41.529 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:22:41.668 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1690ms
2025-08-23 22:22:56.502 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:22:56.639 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.2160ms
2025-08-23 22:23:11.507 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:23:11.643 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.4620ms
2025-08-23 22:23:26.512 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:23:26.649 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9660ms
2025-08-23 22:23:41.516 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:23:41.659 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8000ms
2025-08-23 22:23:56.518 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:23:56.660 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.6230ms
2025-08-23 22:24:11.535 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:24:11.682 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5740ms
2025-08-23 22:24:26.517 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:24:26.657 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9290ms
2025-08-23 22:24:41.522 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:24:41.663 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0320ms
2025-08-23 22:24:56.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:24:56.664 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2880ms
2025-08-23 22:25:11.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:25:11.673 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.5670ms
2025-08-23 22:25:26.528 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:25:26.670 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9540ms
2025-08-23 22:25:41.543 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:25:41.682 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2270ms
2025-08-23 22:25:56.545 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:25:56.686 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8140ms
2025-08-23 22:26:11.536 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:26:11.671 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.1500ms
2025-08-23 22:26:26.540 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:26:26.677 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8780ms
2025-08-23 22:26:41.542 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:26:41.682 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0470ms
2025-08-23 22:26:56.584 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:26:56.797 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 213.5210ms
2025-08-23 22:27:11.567 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:27:11.739 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 172.6060ms
2025-08-23 22:27:26.566 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:27:26.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1360ms
2025-08-23 22:27:41.555 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:27:41.696 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4980ms
2025-08-23 22:27:56.557 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:27:56.696 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4330ms
2025-08-23 22:28:11.562 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:28:11.704 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7860ms
2025-08-23 22:28:26.558 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:28:26.702 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3940ms
2025-08-23 22:28:41.574 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:28:41.723 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.3500ms
2025-08-23 22:28:56.565 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:28:56.705 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0280ms
2025-08-23 22:29:11.573 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:29:11.718 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3920ms
2025-08-23 22:29:26.568 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:29:26.706 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.6550ms
2025-08-23 22:29:42.033 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:29:42.213 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 179.9330ms
2025-08-23 22:29:56.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:29:56.752 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.4190ms
2025-08-23 22:30:11.593 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:30:11.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.4640ms
2025-08-23 22:30:26.621 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:30:26.849 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 227.8030ms
2025-08-23 22:30:41.591 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:30:41.734 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4880ms
2025-08-23 22:30:56.710 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:30:56.857 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9980ms
2025-08-23 22:31:11.670 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:31:11.825 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.1730ms
2025-08-23 22:31:26.638 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:31:26.780 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0780ms
2025-08-23 22:31:41.638 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:31:41.779 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1350ms
2025-08-23 22:31:56.649 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:31:56.790 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8700ms
2025-08-23 22:32:11.645 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:32:11.783 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.0120ms
2025-08-23 22:32:26.641 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:32:26.777 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.0470ms
2025-08-23 22:32:41.649 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:32:41.786 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8260ms
2025-08-23 22:32:56.662 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:32:56.807 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.1230ms
2025-08-23 22:33:11.695 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:33:11.868 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 173.3160ms
2025-08-23 22:33:26.663 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:33:26.806 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7310ms
2025-08-23 22:33:41.672 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:33:41.813 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3870ms
2025-08-23 22:33:56.672 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:33:56.814 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7440ms
2025-08-23 22:34:11.692 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:34:11.846 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.2820ms
2025-08-23 22:34:26.682 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:34:26.819 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.1980ms
2025-08-23 22:34:41.674 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:34:41.818 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.4310ms
2025-08-23 22:34:56.683 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:34:56.827 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1670ms
2025-08-23 22:35:11.681 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:35:11.826 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7070ms
2025-08-23 22:35:26.680 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:35:26.819 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6450ms
2025-08-23 22:35:41.691 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:35:41.829 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.6520ms
2025-08-23 22:35:56.684 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:35:56.829 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.1370ms
2025-08-23 22:36:11.727 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:36:11.879 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.5600ms
2025-08-23 22:36:26.703 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:36:26.842 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.0940ms
2025-08-23 22:36:41.693 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:36:41.851 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.7660ms
2025-08-23 22:36:56.694 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:36:56.830 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2570ms
2025-08-23 22:37:11.699 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:37:11.834 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.3640ms
2025-08-23 22:37:26.699 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:37:26.844 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5110ms
2025-08-23 22:37:41.701 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:37:41.839 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3450ms
2025-08-23 22:37:56.705 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:37:56.842 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0530ms
2025-08-23 22:38:11.707 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:38:11.849 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1150ms
2025-08-23 22:38:26.707 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:38:26.846 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3080ms
2025-08-23 22:38:41.719 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:38:41.857 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.3370ms
2025-08-23 22:38:56.712 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:38:56.848 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2700ms
2025-08-23 22:39:11.717 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:39:11.858 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8230ms
2025-08-23 22:39:26.723 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:39:26.862 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6370ms
2025-08-23 22:39:41.722 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:39:41.863 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7790ms
2025-08-23 22:39:56.787 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:39:56.946 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.6970ms
2025-08-23 22:40:11.840 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:40:12.000 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.8860ms
2025-08-23 22:40:26.768 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:40:26.919 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.0250ms
2025-08-23 22:40:41.742 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:40:41.879 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8950ms
2025-08-23 22:40:56.756 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:40:56.896 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9810ms
2025-08-23 22:41:11.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:41:11.904 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.7990ms
2025-08-23 22:41:26.755 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:41:26.894 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7340ms
2025-08-23 22:41:41.758 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:41:41.902 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1900ms
2025-08-23 22:41:56.757 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:41:56.901 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3950ms
2025-08-23 22:42:11.755 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:42:11.892 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.7740ms
2025-08-23 22:42:26.761 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:42:26.896 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.2990ms
2025-08-23 22:42:41.766 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:42:41.905 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6910ms
2025-08-23 22:42:56.765 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:42:56.912 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9320ms
2025-08-23 22:43:11.782 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:43:11.927 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0350ms
2025-08-23 22:43:26.768 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:43:26.907 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9710ms
2025-08-23 22:43:41.780 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:43:41.927 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.8350ms
2025-08-23 22:43:56.767 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:43:56.904 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9910ms
2025-08-23 22:44:11.769 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:44:11.916 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9670ms
2025-08-23 22:44:26.774 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:44:26.913 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1800ms
2025-08-23 22:44:41.776 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:44:41.924 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0670ms
2025-08-23 22:44:56.788 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:44:56.930 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6470ms
2025-08-23 22:45:11.781 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:45:11.925 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3870ms
2025-08-23 22:45:26.787 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:45:26.927 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9530ms
2025-08-23 22:45:41.817 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:45:41.988 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.0830ms
2025-08-23 22:45:56.873 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:45:57.026 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.0020ms
2025-08-23 22:46:11.796 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:46:11.937 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5070ms
2025-08-23 22:46:26.846 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:46:27.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 221.2610ms
2025-08-23 22:46:41.806 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:46:41.943 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2850ms
2025-08-23 22:46:56.809 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:46:56.950 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0900ms
2025-08-23 22:47:11.815 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:47:11.958 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2420ms
2025-08-23 22:47:26.805 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:47:26.943 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0530ms
2025-08-23 22:47:41.820 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:47:41.960 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5330ms
2025-08-23 22:47:56.813 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:47:56.956 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1060ms
2025-08-23 22:48:11.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:48:11.979 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5140ms
2025-08-23 22:48:26.813 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:48:26.963 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3690ms
2025-08-23 22:48:41.814 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:48:41.951 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8380ms
2025-08-23 22:48:56.817 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:48:56.954 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0900ms
2025-08-23 22:49:11.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:49:11.972 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4110ms
2025-08-23 22:49:26.826 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:49:26.969 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1530ms
2025-08-23 22:49:41.823 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:49:41.966 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.7190ms
2025-08-23 22:49:56.838 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:49:56.978 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8520ms
2025-08-23 22:50:11.836 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:50:11.973 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.7410ms
2025-08-23 22:50:26.829 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:50:26.966 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2820ms
2025-08-23 22:50:41.838 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:50:41.975 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8480ms
2025-08-23 22:50:56.840 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:50:56.983 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3070ms
2025-08-23 22:51:11.842 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:51:11.979 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.4240ms
2025-08-23 22:51:26.840 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:51:26.979 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2150ms
2025-08-23 22:51:41.843 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:51:41.991 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3030ms
2025-08-23 22:51:56.859 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:51:57.019 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.5520ms
2025-08-23 22:52:11.861 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:52:12.002 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8880ms
2025-08-23 22:52:26.857 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:52:26.997 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9360ms
2025-08-23 22:52:41.854 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:52:41.995 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.8710ms
2025-08-23 22:52:56.862 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:52:56.998 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.3230ms
2025-08-23 22:53:11.864 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:53:12.015 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.8170ms
2025-08-23 22:53:26.905 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:53:27.075 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 167.7310ms
2025-08-23 22:53:41.869 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:53:42.005 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.7680ms
2025-08-23 22:53:56.869 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:53:57.023 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.1920ms
2025-08-23 22:54:11.873 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:54:12.013 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0720ms
2025-08-23 22:54:26.874 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:54:27.010 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.7520ms
2025-08-23 22:54:41.889 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:54:42.046 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.8600ms
2025-08-23 22:54:56.896 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:54:57.044 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.3710ms
2025-08-23 22:55:11.879 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:55:12.016 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.4540ms
2025-08-23 22:55:26.883 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:55:27.022 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8980ms
2025-08-23 22:55:41.885 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:55:42.030 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.3880ms
2025-08-23 22:55:56.886 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:55:57.032 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7730ms
2025-08-23 22:56:11.887 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:56:12.031 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3290ms
2025-08-23 22:56:26.904 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:56:27.048 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.0350ms
2025-08-23 22:56:41.918 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:56:42.056 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1950ms
2025-08-23 22:56:56.899 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:56:57.036 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9940ms
2025-08-23 22:57:11.908 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:57:12.057 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.5770ms
2025-08-23 22:57:26.903 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:57:27.045 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1460ms
2025-08-23 22:57:41.919 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:57:42.067 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.1390ms
2025-08-23 22:57:57.111 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:57:57.307 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 197.0550ms
2025-08-23 22:58:11.968 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:58:12.133 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.3990ms
2025-08-23 22:58:26.911 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:58:27.057 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7500ms
2025-08-23 22:58:41.920 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:58:42.063 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3400ms
2025-08-23 22:58:56.928 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:58:57.069 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3650ms
2025-08-23 22:59:11.922 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:59:12.062 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8970ms
2025-08-23 22:59:26.926 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:59:27.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5980ms
2025-08-23 22:59:41.924 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:59:42.061 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8300ms
2025-08-23 22:59:56.931 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 22:59:57.068 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.4140ms
2025-08-23 23:00:11.933 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:00:12.082 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.1220ms
2025-08-23 23:00:27.039 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:00:27.232 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 193.5760ms
2025-08-23 23:00:41.942 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:00:42.079 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0000ms
2025-08-23 23:00:56.960 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:00:57.103 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.6550ms
2025-08-23 23:01:12.104 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:01:12.260 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.3180ms
2025-08-23 23:01:26.958 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:01:27.123 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.2320ms
2025-08-23 23:01:41.941 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:01:42.077 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.7680ms
2025-08-23 23:01:56.949 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:01:57.089 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3600ms
2025-08-23 23:02:11.948 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:02:12.091 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5620ms
2025-08-23 23:02:26.950 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:02:27.089 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1970ms
2025-08-23 23:02:41.954 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:02:42.097 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9310ms
2025-08-23 23:02:56.957 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:02:57.098 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7360ms
2025-08-23 23:03:11.960 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:03:12.099 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1800ms
2025-08-23 23:03:26.969 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:03:27.107 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7370ms
2025-08-23 23:03:41.972 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:03:42.116 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.0930ms
2025-08-23 23:03:56.973 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:03:57.116 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9960ms
2025-08-23 23:04:11.973 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:04:12.116 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5680ms
2025-08-23 23:04:27.039 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:04:27.233 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 194.9510ms
2025-08-23 23:04:42.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:04:42.221 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.6910ms
2025-08-23 23:04:57.028 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:04:57.170 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8080ms
2025-08-23 23:05:12.035 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:05:12.176 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6180ms
2025-08-23 23:05:27.032 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:05:27.177 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0210ms
2025-08-23 23:05:42.030 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:05:42.168 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.7610ms
2025-08-23 23:05:57.050 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:05:57.198 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.9350ms
2025-08-23 23:06:12.195 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:06:12.381 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 186.6270ms
2025-08-23 23:06:27.039 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:06:27.178 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.0090ms
2025-08-23 23:06:42.044 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:06:42.185 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5930ms
2025-08-23 23:06:57.041 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:06:57.190 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 149.4510ms
2025-08-23 23:07:12.108 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:07:12.266 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.4060ms
2025-08-23 23:07:27.046 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:07:27.184 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.5370ms
2025-08-23 23:07:42.053 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:07:42.197 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.1370ms
2025-08-23 23:07:57.066 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:07:57.227 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.7370ms
2025-08-23 23:08:12.361 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:08:12.874 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 498.0120ms
2025-08-23 23:08:27.131 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:08:27.287 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.1470ms
2025-08-23 23:08:42.134 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:08:42.297 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 163.2370ms
2025-08-23 23:08:57.133 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:08:57.272 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8080ms
2025-08-23 23:09:12.163 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:09:12.310 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9960ms
2025-08-23 23:09:27.134 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:09:27.274 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9800ms
2025-08-23 23:09:42.138 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:09:42.277 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7050ms
2025-08-23 23:09:57.145 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:09:57.296 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.3320ms
2025-08-23 23:10:12.151 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:10:12.291 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7630ms
2025-08-23 23:10:27.151 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:10:27.290 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6950ms
2025-08-23 23:10:42.149 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:10:42.304 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 155.0130ms
2025-08-23 23:10:57.159 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:10:57.297 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.8970ms
2025-08-23 23:11:12.197 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:11:12.385 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 188.0300ms
2025-08-23 23:11:27.230 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:11:27.391 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.3470ms
2025-08-23 23:11:42.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:11:42.438 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.9050ms
2025-08-23 23:11:57.197 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:11:57.342 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2800ms
2025-08-23 23:12:12.187 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:12:12.327 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1930ms
2025-08-23 23:12:27.201 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:12:27.351 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.1630ms
2025-08-23 23:12:42.179 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:12:42.325 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.4830ms
2025-08-23 23:12:57.187 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:12:57.333 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9240ms
2025-08-23 23:13:12.192 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:13:12.333 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1310ms
2025-08-23 23:13:27.194 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:13:27.339 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7300ms
2025-08-23 23:13:42.189 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:13:42.326 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.3470ms
2025-08-23 23:13:57.189 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:13:57.327 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2400ms
2025-08-23 23:14:12.193 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:14:12.334 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7610ms
2025-08-23 23:14:27.192 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:14:27.339 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.9840ms
2025-08-23 23:14:42.207 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:14:42.352 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.0480ms
2025-08-23 23:14:57.198 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:14:57.335 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9570ms
2025-08-23 23:15:12.200 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:15:12.339 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2100ms
2025-08-23 23:15:27.201 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:15:27.342 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0110ms
2025-08-23 23:15:42.212 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:15:42.350 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.1420ms
2025-08-23 23:15:57.212 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:15:57.353 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4740ms
2025-08-23 23:16:12.212 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:16:12.358 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4790ms
2025-08-23 23:16:27.213 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:16:27.365 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.7260ms
2025-08-23 23:16:42.214 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:16:42.352 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3650ms
2025-08-23 23:16:57.295 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:16:57.455 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 160.2550ms
2025-08-23 23:17:12.238 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:17:12.397 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 159.7420ms
2025-08-23 23:17:27.241 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:17:27.387 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3300ms
2025-08-23 23:17:42.242 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:17:42.382 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7420ms
2025-08-23 23:17:57.251 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:17:57.388 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.8380ms
2025-08-23 23:18:12.249 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:18:12.393 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6500ms
2025-08-23 23:18:27.247 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:18:27.399 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.0960ms
2025-08-23 23:18:42.250 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:18:42.390 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1930ms
2025-08-23 23:18:57.250 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:18:57.396 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.1440ms
2025-08-23 23:19:12.255 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:19:12.399 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.5690ms
2025-08-23 23:19:27.264 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:19:27.407 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1460ms
2025-08-23 23:19:42.255 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:19:42.393 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.5240ms
2025-08-23 23:19:57.257 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:19:57.397 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6750ms
2025-08-23 23:20:12.260 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:20:12.406 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2750ms
2025-08-23 23:20:27.276 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:20:27.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0580ms
2025-08-23 23:20:42.280 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:20:42.418 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4970ms
2025-08-23 23:20:57.269 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:20:57.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.0810ms
2025-08-23 23:21:12.274 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:21:12.421 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.7700ms
2025-08-23 23:21:27.279 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:21:27.422 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1850ms
2025-08-23 23:21:42.365 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:21:42.707 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 341.8090ms
2025-08-23 23:21:57.278 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:21:57.417 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8560ms
2025-08-23 23:22:12.292 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:22:12.435 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0690ms
2025-08-23 23:22:27.280 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:22:27.416 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.5610ms
2025-08-23 23:22:42.308 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:22:42.464 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.3640ms
2025-08-23 23:22:57.290 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:22:57.432 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7150ms
2025-08-23 23:23:12.300 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:23:12.450 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.1430ms
2025-08-23 23:23:27.855 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:23:28.762 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 906.9560ms
2025-08-23 23:23:42.345 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:23:42.510 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 164.6730ms
2025-08-23 23:23:57.312 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:23:57.457 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.4910ms
2025-08-23 23:24:12.336 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:24:12.479 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5420ms
2025-08-23 23:24:27.335 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:24:27.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3920ms
2025-08-23 23:24:42.315 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:24:42.457 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0000ms
2025-08-23 23:24:57.317 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:24:57.453 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2570ms
2025-08-23 23:25:12.347 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:25:12.501 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 153.5050ms
2025-08-23 23:25:27.336 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:25:27.481 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.5570ms
2025-08-23 23:25:42.327 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:25:42.466 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.1390ms
2025-08-23 23:25:57.328 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:25:57.477 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.7830ms
2025-08-23 23:26:12.335 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:26:12.481 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.5950ms
2025-08-23 23:26:27.335 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:26:27.473 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3110ms
2025-08-23 23:26:42.523 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:26:42.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2030ms
2025-08-23 23:26:57.388 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:26:57.526 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.0450ms
2025-08-23 23:27:12.397 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:27:12.543 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.7080ms
2025-08-23 23:27:27.391 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:27:27.529 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3090ms
2025-08-23 23:27:42.400 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:27:42.540 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7190ms
2025-08-23 23:27:57.394 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:27:57.530 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.6530ms
2025-08-23 23:28:12.401 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:28:12.538 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.6050ms
2025-08-23 23:28:27.405 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:28:27.542 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.4890ms
2025-08-23 23:28:42.404 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:28:42.543 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3540ms
2025-08-23 23:28:57.402 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:28:57.545 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9580ms
2025-08-23 23:29:12.413 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:29:12.552 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7070ms
2025-08-23 23:29:27.405 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:29:27.547 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7290ms
2025-08-23 23:29:42.656 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:29:42.910 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 253.9040ms
2025-08-23 23:29:57.416 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:29:57.561 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7390ms
2025-08-23 23:30:12.425 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:30:12.564 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9320ms
2025-08-23 23:30:27.425 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:30:27.567 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0870ms
2025-08-23 23:30:42.437 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:30:42.581 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5540ms
2025-08-23 23:30:57.430 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:30:57.569 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.4700ms
2025-08-23 23:31:12.437 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:31:12.575 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3180ms
2025-08-23 23:31:27.434 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:31:27.580 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 146.2350ms
2025-08-23 23:31:42.435 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:31:42.586 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.2660ms
2025-08-23 23:31:57.446 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:31:57.587 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1300ms
2025-08-23 23:32:12.440 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:32:12.579 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3510ms
2025-08-23 23:32:27.451 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:32:27.587 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 135.6820ms
2025-08-23 23:32:42.455 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:32:42.595 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8700ms
2025-08-23 23:32:57.458 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:32:57.602 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.6680ms
2025-08-23 23:33:12.477 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:33:12.648 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 170.7050ms
2025-08-23 23:33:27.455 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:33:27.594 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.3990ms
2025-08-23 23:33:42.459 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:33:42.597 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.2200ms
2025-08-23 23:33:57.469 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:33:57.614 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.3560ms
2025-08-23 23:34:12.470 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:34:12.609 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1720ms
2025-08-23 23:34:27.470 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:34:27.612 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3440ms
2025-08-23 23:34:42.467 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:34:42.609 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8380ms
2025-08-23 23:34:57.957 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:34:58.106 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.9490ms
2025-08-23 23:35:12.522 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:35:12.665 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2980ms
2025-08-23 23:35:27.517 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:35:27.662 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.7180ms
2025-08-23 23:35:42.514 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:35:42.657 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.8450ms
2025-08-23 23:35:57.516 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:35:57.655 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8500ms
2025-08-23 23:36:12.527 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:36:12.665 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.9830ms
2025-08-23 23:36:27.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:36:27.675 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 148.3960ms
2025-08-23 23:36:42.526 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:36:42.667 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.7610ms
2025-08-23 23:36:57.529 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:36:57.673 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.9980ms
2025-08-23 23:37:12.590 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:37:12.746 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 156.1960ms
2025-08-23 23:37:27.552 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:37:27.700 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 147.5470ms
2025-08-23 23:37:42.542 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:37:42.701 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 158.8000ms
2025-08-23 23:37:57.543 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:37:57.683 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.3580ms
2025-08-23 23:38:12.540 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:38:12.744 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 203.6300ms
2025-08-23 23:38:27.542 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:38:27.685 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.7520ms
2025-08-23 23:38:42.547 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:38:42.688 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6000ms
2025-08-23 23:38:57.551 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:38:57.693 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3780ms
2025-08-23 23:39:12.549 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:39:12.693 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3250ms
2025-08-23 23:39:27.549 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:39:27.687 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3180ms
2025-08-23 23:39:42.567 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:39:42.719 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 151.6410ms
2025-08-23 23:39:57.557 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:39:57.699 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2390ms
2025-08-23 23:40:12.558 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:40:12.700 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7770ms
2025-08-23 23:40:27.574 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:40:27.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.2670ms
2025-08-23 23:40:43.290 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:40:43.758 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 466.4650ms
2025-08-23 23:40:57.643 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:40:57.798 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 154.3970ms
2025-08-23 23:41:12.585 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:41:12.724 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2920ms
2025-08-23 23:41:27.571 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:41:27.712 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.5490ms
2025-08-23 23:41:42.597 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:41:42.736 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6040ms
2025-08-23 23:41:57.587 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:41:57.727 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7900ms
2025-08-23 23:42:12.578 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:42:12.719 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.6750ms
2025-08-23 23:42:27.578 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:42:27.715 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.6360ms
2025-08-23 23:42:42.589 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:42:42.732 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.2910ms
2025-08-23 23:42:57.583 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:42:57.723 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.4470ms
2025-08-23 23:43:12.586 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:43:12.725 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.7320ms
2025-08-23 23:43:27.601 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:43:27.744 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.5690ms
2025-08-23 23:43:42.595 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:43:42.732 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0780ms
2025-08-23 23:43:57.594 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:43:57.736 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2910ms
2025-08-23 23:44:12.604 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:44:12.744 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.2980ms
2025-08-23 23:44:27.596 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:44:27.733 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0160ms
2025-08-23 23:44:42.604 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:44:42.762 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.9340ms
2025-08-23 23:44:57.609 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:44:57.747 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3440ms
2025-08-23 23:45:12.613 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:45:12.752 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6910ms
2025-08-23 23:45:27.669 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:45:27.826 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 157.2050ms
2025-08-23 23:45:42.620 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:45:42.759 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.7640ms
2025-08-23 23:45:57.620 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:45:57.763 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1200ms
2025-08-23 23:46:12.625 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:46:12.766 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.5020ms
2025-08-23 23:46:27.638 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:46:27.777 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.6590ms
2025-08-23 23:46:42.624 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:46:42.760 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.2030ms
2025-08-23 23:46:57.627 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:46:57.778 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.7800ms
2025-08-23 23:47:12.625 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:47:12.765 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.9580ms
2025-08-23 23:47:27.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:47:27.768 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.7240ms
2025-08-23 23:47:42.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:47:42.769 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.5880ms
2025-08-23 23:47:57.626 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:47:57.763 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9170ms
2025-08-23 23:48:12.638 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:48:12.779 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.0390ms
2025-08-23 23:48:27.640 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:48:27.784 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.3110ms
2025-08-23 23:48:42.646 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:48:42.785 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.2850ms
2025-08-23 23:48:57.644 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:48:57.787 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 143.1770ms
2025-08-23 23:49:12.639 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:49:12.776 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.9060ms
2025-08-23 23:49:27.652 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:49:27.803 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 150.2710ms
2025-08-23 23:49:42.648 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:49:42.793 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.5560ms
2025-08-23 23:49:57.655 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:49:57.798 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.3820ms
2025-08-23 23:50:12.651 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:50:12.796 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.1840ms
2025-08-23 23:50:27.661 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:50:27.802 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.1400ms
2025-08-23 23:50:42.656 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:50:42.794 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.8240ms
2025-08-23 23:50:57.675 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:50:57.817 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.0210ms
2025-08-23 23:51:12.657 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:51:12.800 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.9670ms
2025-08-23 23:51:27.660 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:51:27.806 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.7300ms
2025-08-23 23:51:42.669 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:51:42.810 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.2370ms
2025-08-23 23:51:57.678 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:51:57.942 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 248.2550ms
2025-08-23 23:52:12.671 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:52:12.810 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.1430ms
2025-08-23 23:52:27.670 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:52:27.808 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.9090ms
2025-08-23 23:52:42.680 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:52:42.818 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 137.0640ms
2025-08-23 23:52:57.683 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:52:57.853 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 169.1020ms
2025-08-23 23:53:12.683 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:53:12.821 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8360ms
2025-08-23 23:53:27.899 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:53:28.107 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 207.0840ms
2025-08-23 23:53:42.687 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:53:42.831 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.2410ms
2025-08-23 23:53:57.690 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:53:57.836 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.6640ms
2025-08-23 23:54:12.693 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:54:12.830 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.5880ms
2025-08-23 23:54:27.695 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:54:27.831 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.3310ms
2025-08-23 23:54:42.710 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:54:42.850 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.0060ms
2025-08-23 23:54:57.706 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:54:57.848 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2140ms
2025-08-23 23:55:12.706 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:55:12.848 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8970ms
2025-08-23 23:55:27.710 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:55:27.853 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.1780ms
2025-08-23 23:55:42.707 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:55:42.845 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.8320ms
2025-08-23 23:55:57.710 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:55:57.850 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.9910ms
2025-08-23 23:56:12.711 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:56:12.850 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.3660ms
2025-08-23 23:56:27.717 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:56:27.858 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.4650ms
2025-08-23 23:56:42.719 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:56:42.880 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 161.5650ms
2025-08-23 23:56:57.770 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:56:57.972 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 202.7950ms
2025-08-23 23:57:12.729 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:57:12.891 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 162.6070ms
2025-08-23 23:57:27.726 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:57:27.871 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 144.6820ms
2025-08-23 23:57:42.729 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:57:42.865 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 136.1550ms
2025-08-23 23:57:57.727 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:57:57.869 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8140ms
2025-08-23 23:58:12.733 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:58:12.875 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.9300ms
2025-08-23 23:58:27.735 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:58:27.887 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 152.1180ms
2025-08-23 23:58:42.736 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:58:42.876 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 140.1740ms
2025-08-23 23:58:57.734 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:58:57.874 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 139.8080ms
2025-08-23 23:59:12.737 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:59:12.879 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 142.2080ms
2025-08-23 23:59:27.754 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:59:27.899 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 145.2520ms
2025-08-23 23:59:42.740 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:59:42.878 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 138.6080ms
2025-08-23 23:59:57.753 -03:00 [INF] Request starting POST /api/whatsapp/session/updated
2025-08-23 23:59:57.895 -03:00 [INF] Request finished POST /api/whatsapp/session/updated - 200 in 141.8730ms
